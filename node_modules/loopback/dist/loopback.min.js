!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={name:"AccessToken",properties:{id:{type:"string",id:!0},ttl:{type:"number",ttl:!0,"default":1209600,description:"time to live in seconds (2 weeks by default)"},created:{type:"Date"}},relations:{user:{type:"belongsTo",model:"User",foreignKey:"userId"}},acls:[{principalType:"ROLE",principalId:"$everyone",permission:"DENY"},{principalType:"ROLE",principalId:"$everyone",property:"create",permission:"ALLOW"}]}},{}],2:[function(a,b){(function(c,d){var e=(a("../../lib/loopback"),a("assert")),f=a("uid2"),g=64;b.exports=function(a){function b(a,b){var c,e,f=b.params||[],g=b.headers||[],h=b.cookies||[],i=0;for(f=f.concat(["access_token"]),g=g.concat(["X-Access-Token","authorization"]),h=h.concat(["access_token","authorization"]),c=f.length;c>i;i++){var j=f[i];if(e=a.params&&void 0!==a.params[j]?a.params[j]:a.body&&void 0!==a.body[j]?a.body[j]:a.query&&void 0!==a.query[j]?a.query[j]:void 0,"string"==typeof e)return e}for(i=0,c=g.length;c>i;i++)if(e=a.header(g[i]),"string"==typeof e){if(0===e.indexOf("Bearer ")){e=e.substring(7);var k=new d(e,"base64");e=k.toString("utf8")}else if(/^Basic /i.test(e)){e=e.substring(6),e=new d(e,"base64").toString("utf8");var l=/^([^:]*):(.*)$/.exec(e);l&&(e=l[2].length>l[1].length?l[2]:l[1])}return e}if(a.signedCookies)for(i=0,c=h.length;c>i;i++)if(e=a.signedCookies[h[i]],"string"==typeof e)return e;return null}a.definition.rawProperties.created["default"]=a.definition.properties.created["default"]=function(){return new Date},a.ANONYMOUS=new a({id:"$anonymous"}),a.createAccessTokenId=function(a){f(this.settings.accessTokenIdLength||g,function(b,c){b?a(b):a(null,c)})},a.observe("before save",function(b,c){return!b.instance||b.instance.id?c():void a.createAccessTokenId(function(a,d){return a?c(a):(b.instance.id=d,void c())})}),a.findForRequest=function(a,d,e){void 0===e&&"function"==typeof d&&(e=d,d={});var f=b(a,d);f?this.findById(f,function(a,b){a?e(a):b?b.validate(function(a,c){if(a)e(a);else if(c)e(null,b);else{var d=new Error("Invalid Access Token");d.status=d.statusCode=401,d.code="INVALID_TOKEN",e(d)}}):e()}):c.nextTick(function(){e()})},a.prototype.validate=function(a){try{e(this.created&&"function"==typeof this.created.getTime,"token.created must be a valid Date"),e(0!==this.ttl,"token.ttl must be not be 0"),e(this.ttl,"token.ttl must exist"),e(this.ttl>=-1,"token.ttl must be >= -1");var b=Date.now(),c=this.created.getTime(),d=(b-c)/1e3,f=this.ttl,g=f>d;g?a(null,g):this.destroy(function(b){a(b,g)})}catch(h){a(h)}}}}).call(this,a("_process"),a("buffer").Buffer)},{"../../lib/loopback":30,_process:187,assert:38,buffer:40,uid2:270}],3:[function(a,b){b.exports={name:"ACL",properties:{model:{type:"string",description:"The name of the model"},property:{type:"string",description:"The name of the property, method, scope, or relation"},accessType:"string",permission:"string",principalType:"string",principalId:"string"}}},{}],4:[function(a,b){(function(c){var d=a("../../lib/loopback"),e=a("async"),f=a("assert"),g=a("debug")("loopback:security:acl"),h=a("../../lib/access-context"),i=h.AccessContext,j=h.Principal,k=h.AccessRequest,l=d.Role;f(l,"Role model must be defined before ACL model"),b.exports=function(a){a.ALL=i.ALL,a.DEFAULT=i.DEFAULT,a.ALLOW=i.ALLOW,a.ALARM=i.ALARM,a.AUDIT=i.AUDIT,a.DENY=i.DENY,a.READ=i.READ,a.WRITE=i.WRITE,a.EXECUTE=i.EXECUTE,a.USER=j.USER,a.APP=a.APPLICATION=j.APPLICATION,a.ROLE=j.ROLE,a.SCOPE=j.SCOPE,a.getMatchingScore=function(b,c){for(var d=["model","property","accessType"],e=0,f=0;f<d.length;f++){e=4*e;var g=b[d[f]]||a.ALL,h=c[d[f]]||a.ALL,j="property"===d[f]&&-1!==c.methodNames.indexOf(g),k="accessType"===d[f]&&g===a.EXECUTE;if(g===h||j||k)e+=3;else if(g===a.ALL)e+=2;else{if(h!==a.ALL)return-1;e+=1}}switch(e=4*e,b.principalType){case a.USER:e+=4;break;case a.APP:e+=3;break;case a.ROLE:e+=2;break;default:e+=1}if(e=8*e,b.principalType===a.ROLE)switch(b.principalId){case l.OWNER:e+=4;break;case l.RELATED:e+=3;break;case l.AUTHENTICATED:case l.UNAUTHENTICATED:e+=2;break;case l.EVERYONE:e+=1;break;default:e+=5}return e=4*e,e+=i.permissionOrder[b.permission||a.ALLOW]-1},a.prototype.score=function(a){return this.constructor.getMatchingScore(this,a)},a.resolvePermission=function(b,c){c instanceof k||(c=new k(c)),b=b.sort(function(b,d){return a.getMatchingScore(d,c)-a.getMatchingScore(b,c)});for(var d=a.DEFAULT,e=0,f=0;f<b.length;f++){var h=b[f];if(e=a.getMatchingScore(h,c),0>e)break;if(!c.isWildcard()){d=h.permission;break}if(c.exactlyMatches(h)){d=h.permission;break}var j=i.permissionOrder[h.permission],l=i.permissionOrder[d];j>l&&(d=h.permission)}g.enabled&&(g("The following ACLs were searched: "),b.forEach(function(a){a.debug(),g("with score:",a.score(c))}));var m=new k(c.model,c.property,c.accessType,d||a.DEFAULT);return m},a.getStaticACLs=function(b,c){var e=d.findModel(b),f=[];e&&e.settings.acls&&e.settings.acls.forEach(function(d){var e=d.property;Array.isArray(e)&&e.indexOf(c)>=0&&(e=c),e&&e!==a.ALL&&c!==e||f.push(new a({model:b,property:e||a.ALL,principalType:d.principalType,principalId:d.principalId,accessType:d.accessType||a.ALL,permission:d.permission}))});var g=e&&(e.definition.properties[c]||e._scopeMeta&&e._scopeMeta[c]||e[c]||e.prototype[c]);return g&&g.acls&&g.acls.forEach(function(b){f.push(new a({model:e.modelName,property:c,principalType:b.principalType,principalId:b.principalId,accessType:b.accessType,permission:b.permission}))}),f},a.checkPermission=function(b,e,f,h,i,j){null!==e&&void 0!==e&&"string"!=typeof e&&(e=e.toString()),h=h||a.ALL;var l=h===a.ALL?void 0:{inq:[h,a.ALL]};i=i||a.ALL;var m=i===a.ALL?void 0:{inq:[i,a.ALL,a.EXECUTE]},n=new k(f,h,i),o=this.getStaticACLs(f,h),p=this.resolvePermission(o,n);if(p&&p.permission===a.DENY)return g("Permission denied by statically resolved permission"),g(" Resolved Permission: %j",p),void c.nextTick(function(){j&&j(null,p)});var q=this;this.find({where:{principalType:b,principalId:e,model:f,property:l,accessType:m}},function(b,c){if(b)return void(j&&j(b));if(o=o.concat(c),p=q.resolvePermission(o,n),p&&p.permission===a.DEFAULT){var e=d.findModel(f);p.permission=e&&e.settings.defaultPermission||a.ALLOW}j&&j(null,p)})},a.prototype.debug=function(){g.enabled&&(g("---ACL---"),g("model %s",this.model),g("property %s",this.property),g("principalType %s",this.principalType),g("principalId %s",this.principalId),g("accessType %s",this.accessType),g("permission %s",this.permission))},a.checkAccessForContext=function(b,c){b instanceof i||(b=new i(b));var f=b.model,h=b.property,j=b.accessType,m=b.modelName,n=b.methodNames,o=h===a.ALL?void 0:{inq:n.concat([a.ALL])},p=j===a.ALL?void 0:{inq:[j,a.ALL]},q=new k(m,h,j,a.DEFAULT,n),r=[],s=this.getStaticACLs(f.modelName,h),t=this,u=d.getModelByType(l);this.find({where:{model:f.modelName,property:o,accessType:p}},function(d,h){if(d)return void(c&&c(d));var i=[];h=h.concat(s),h.forEach(function(c){for(var d=0;d<b.principals.length;d++){var e=b.principals[d],f=e.type===c.principalType,g=String(e.id)===String(c.principalId);if(f&&g)return void r.push(c)}c.principalType===a.ROLE&&i.push(function(a){u.isInRole(c.principalId,b,function(b,d){!b&&d&&r.push(c),a(b,c)})})}),e.parallel(i,function(b){if(b)return void(c&&c(b,null));var d=t.resolvePermission(r,q);d&&d.permission===a.DEFAULT&&(d.permission=f&&f.settings.defaultPermission||a.ALLOW),g("---Resolved---"),d.debug(),c&&c(null,d)})})},a.checkAccessForToken=function(b,c,d,e,g){f(b,"Access token is required");var h=new i({accessToken:b,model:c,property:e,method:e,modelId:d});this.checkAccessForContext(h,function(b,c){return b?void(g&&g(b)):void(g&&g(null,c.permission!==a.DENY))})}}}).call(this,a("_process"))},{"../../lib/access-context":22,"../../lib/loopback":30,_process:187,assert:38,async:35,debug:211}],5:[function(a,b){b.exports={name:"Application",properties:{id:{type:"string",id:!0},realm:{type:"string"},name:{type:"string",required:!0},description:"string",icon:{type:"string",description:"The icon image url"},owner:{type:"string",description:"The user id of the developer who registers the application"},collaborators:{type:["string"],description:"A list of users ids who have permissions to work on this app"},email:"string",emailVerified:"boolean",url:{type:"string",description:"The application URL for OAuth 2.0"},callbackUrls:{type:["string"],description:"OAuth 2.0 code/token callback URLs"},permissions:{type:["string"],description:"A list of permissions required by the application"},clientKey:"string",javaScriptKey:"string",restApiKey:"string",windowsKey:"string",masterKey:"string",pushSettings:{apns:{production:{type:"boolean",description:["Production or development mode. It denotes what default APNS","servers to be used to send notifications.","See API documentation for more details."]},certData:{type:"string",description:"The certificate data loaded from the cert.pem file"},keyData:{type:"string",description:"The key data loaded from the key.pem file"},pushOptions:{type:{gateway:"string",port:"number"}},feedbackOptions:{type:{gateway:"string",port:"number",batchFeedback:"boolean",interval:"number"}}},gcm:{serverApiKey:"string"}},authenticationEnabled:{type:"boolean","default":!0},anonymousAllowed:{type:"boolean","default":!0},authenticationSchemes:[{scheme:{type:"string",description:"See the API docs for the list of supported values."},credential:{type:"object",description:"Scheme-specific credentials"}}],status:{type:"string","default":"sandbox",description:"Status of the application, production/sandbox/disabled"},created:"date",modified:"date"}}},{}],6:[function(a,b){function c(a,b,c){a=a||"loopback",b=b||"sha1",c=c||"hex";var d=e.createHmac(b,a),f=e.randomBytes(32);d.update(f);var g=d.digest(c);return g}var d=a("assert"),e=a("crypto");b.exports=function(a){a.definition.rawProperties.created["default"]=a.definition.properties.created["default"]=function(){return new Date},a.definition.rawProperties.modified["default"]=a.definition.properties.modified["default"]=function(){return new Date},a.observe("before save",function(a,b){if(!a.instance)return b();var d=a.instance;d.created=d.modified=new Date,d.id=c("id","md5"),d.clientKey=c("client"),d.javaScriptKey=c("javaScript"),d.restApiKey=c("restApi"),d.windowsKey=c("windows"),d.masterKey=c("master"),b()}),a.register=function(a,b,c,e){d(a,"owner is required"),d(b,"name is required"),"function"!=typeof c||e||(e=c,c={});var f={owner:a,name:b};for(var g in c)g in f||(f[g]=c[g]);this.create(f,e)},a.prototype.resetKeys=function(a){this.clientKey=c("client"),this.javaScriptKey=c("javaScript"),this.restApiKey=c("restApi"),this.windowsKey=c("windows"),this.masterKey=c("master"),this.modified=new Date,this.save(a)},a.resetKeys=function(a,b){this.findById(a,function(a,c){return a?void(b&&b(a,c)):void c.resetKeys(b)})},a.authenticate=function(a,b,c){this.findById(a,function(a,d){if(a||!d)return void(c&&c(a,null));for(var e=null,f=["clientKey","javaScriptKey","restApiKey","windowsKey","masterKey"],g=0;g<f.length;g++)if(d[f[g]]===b){e={application:d,keyType:f[g]};break}c&&c(null,e)})}}},{assert:38,crypto:44}],7:[function(a,b){b.exports={name:"Change",trackChanges:!1,properties:{id:{type:"string",id:!0},rev:{type:"string"},prev:{type:"string"},checkpoint:{type:"number"},modelName:{type:"string"},modelId:{type:"string"}}}},{}],8:[function(a,b){var c=a("../../lib/loopback").PersistedModel,d=a("../../lib/loopback"),e=a("crypto"),f={stringify:a("canonical-json")},g=a("async"),h=a("assert"),i=a("debug")("loopback:change");b.exports=function(a){function b(a,b,c){this.SourceModel=b,this.TargetModel=c,this.SourceChange=b.getChangeModel(),this.TargetChange=c.getChangeModel(),this.modelId=a}a.UPDATE="update",a.CREATE="create",a.DELETE="delete",a.UNKNOWN="unknown",a.Conflict=b,a.setup=function(){c.setup.call(this);var a=this;a.getter.id=function(){var b=this.modelName&&this.modelId;return b?a.idForModel(this.modelName,this.modelId):null}},a.setup(),a.rectifyModelChanges=function(a,b,c){var d=[],e=this;b.forEach(function(b){d.push(function(c){e.findOrCreateChange(a,b,function(a,b){return a?e.handleError(a,c):void b.rectify(c)})})}),g.parallel(d,c)},a.idForModel=function(a,b){return this.hash([a,b].join("-"))},a.findOrCreateChange=function(a,b,c){h(d.findModel(a),a+" does not exist");var e=this.idForModel(a,b),f=this;this.findById(e,function(d,g){if(d)return c(d);if(g)c(null,g);else{var h=new f({id:e,modelName:a,modelId:b});h.debug("creating change"),f.updateOrCreate(h,c)}})},a.prototype.rectify=function(b){function c(c,f){if(c)return b(c);var g=f[0],h=f[1];h?e===h?d.debug("rev and prev are equal (not updating rev)"):(d.rev=h,d.debug("updated revision (was "+e+")"),d.checkpoint!==g&&(d.prev=e,d.debug("updated prev"))):(d.rev=null,d.debug("updated revision (was "+e+")"),d.checkpoint!==g&&(e?d.prev=e:d.prev||(d.debug("ERROR - could not determing prev"),d.prev=a.UNKNOWN),d.debug("updated prev"))),d.checkpoint!=g&&(i("update checkpoint to",g),d.checkpoint=g),d.prev===a.UNKNOWN?d.remove(b):d.save(b)}var d=this,e=this.rev;d.debug("rectify change"),b=b||function(a){if(a)throw new Error(a)},g.parallel([function(a){d.constructor.getCheckpointModel().current(a)},function(a){d.currentRevision(a)}],c)},a.prototype.currentRevision=function(b){var c=this.getModelCtor(),d=this.getModelId();c.findById(d,function(c,d){return c?a.handleError(c,b):void(d?b(null,a.revisionForInst(d)):b(null,null))})},a.hash=function(b){return e.createHash(a.settings.hashAlgorithm||"sha1").update(b).digest("hex")},a.revisionForInst=function(a){return h(a,"Change.revisionForInst() requires an instance object."),this.hash(f.stringify(a))},a.prototype.type=function(){return this.rev&&this.prev?a.UPDATE:this.rev&&!this.prev?a.CREATE:!this.rev&&this.prev?a.DELETE:a.UNKNOWN},a.prototype.equals=function(a){if(!a)return!1;var b=this.rev||null,c=a.rev||null;return b===c},a.prototype.conflictsWith=function(b){return b?this.equals(b)?!1:a.bothDeleted(this,b)?!1:this.isBasedOn(b)?!1:!0:!1},a.bothDeleted=function(b,c){return b.type()===a.DELETE&&c.type()===a.DELETE},a.prototype.isBasedOn=function(a){return this.prev===a.rev},a.diff=function(b,c,d,e){if(!Array.isArray(d)||0===d.length)return e(null,{deltas:[],conflicts:[]});var f={},g=[];d.forEach(function(b){g.push(b.modelId),f[b.modelId]=new a(b)}),c=Number(c)||0,this.find({where:{modelName:b,modelId:{inq:g}}},function(b,d){if(b)return e(b);var h=[],i=[],j=[],k=d.filter(function(a){return a.checkpoint>=c});k.forEach(function(b){b=new a(b),j.push(b.modelId);var c=f[b.modelId];c&&!b.equals(c)&&(c.conflictsWith(b)?(c.debug("remote conflict"),b.debug("local conflict"),i.push(b)):(c.debug("remote delta"),h.push(c)))}),g.forEach(function(a){if(-1===j.indexOf(a)){var b=f[a],c=d.filter(function(b){return b.modelId===a})[0];b.prev=c?c.rev:null,h.push(b)}}),e(null,{deltas:h,conflicts:i})})},a.rectifyAll=function(a){i("rectify all");this.find(function(b,c){return b?a(b):void g.each(c,function(a,b){a.rectify(b)},a)})},a.getCheckpointModel=function(){var a=this.Checkpoint;return a?a:(this.Checkpoint=a=d.Checkpoint.extend("checkpoint"),h(this.dataSource,"Cannot getCheckpointModel(): "+this.modelName+" is not attached to a dataSource"),a.attachTo(this.dataSource),a)},a.handleError=function(a){if(!this.settings.ignoreErrors)throw a},a.prototype.debug=function(){if(i.enabled){var a=Array.prototype.slice.call(arguments);a[0]=a[0]+" %s",a.push(this.modelName),i.apply(this,a),i("	id",this.id),i("	rev",this.rev),i("	prev",this.prev),i("	checkpoint",this.checkpoint),i("	modelName",this.modelName),i("	modelId",this.modelId),i("	type",this.type())}},a.prototype.getModelCtor=function(){return this.constructor.settings.trackModel},a.prototype.getModelId=function(){var a=this.getModelCtor(),b=this.modelId,c=new a;return c.setId(b),c.getId()},a.prototype.getModel=function(a){var b=this.constructor.settings.trackModel,c=this.getModelId();b.findById(c,a)},b.prototype.models=function(a){function b(a){i.findById(h.modelId,function(b,c){return b?a(b):(e=c,void a())})}function c(a){j.findById(h.modelId,function(b,c){return b?a(b):(f=c,void a())})}function d(b){return b?a(b):void a(null,e,f)}var e,f,h=this,i=this.SourceModel,j=this.TargetModel;g.parallel([b,c],d)},b.prototype.changes=function(a){function b(a){h.SourceChange.findOne({where:{modelId:h.modelId}},function(b,c){return b?a(b):(e=c,void a())})}function c(a){h.TargetChange.findOne({where:{modelId:h.modelId}},function(b,c){return b?a(b):(f=c,void a())})}function d(b){return b?a(b):void a(null,e,f)}var e,f,h=this;g.parallel([b,c],d)},b.prototype.resolve=function(a){var b=this;b.changes(function(b,c,d){return b?a(b):(c.prev=d.rev,void c.save(a))})},b.prototype.type=function(b){this.changes(function(c,d,e){if(c)return b(c);var f=d.type(),g=e.type();return f===a.UPDATE&&g===a.UPDATE?b(null,a.UPDATE):f===a.DELETE||g===a.DELETE?b(null,a.DELETE):b(null,a.UNKNOWN)})}}},{"../../lib/loopback":30,assert:38,async:35,"canonical-json":210,crypto:44,debug:211}],9:[function(a,b){b.exports={name:"Checkpoint",properties:{seq:{type:"number"},time:{type:"date"},sourceId:{type:"string"}}}},{}],10:[function(a,b){a("assert");b.exports=function(a){a.definition.rawProperties.time["default"]=a.definition.properties.time["default"]=function(){return new Date},a.current=function(a){var b=this;this.find({limit:1,order:"seq DESC"},function(c,d){if(c)return a(c);var e=d[0];e?a(null,e.seq):b.create({seq:1},function(b,c){return b?a(b):void a(null,c.seq)})})},a.observe("before save",function(a,b){if(!a.instance)return b(new Error("Checkpoint does not support partial updates."));var c=a.instance;c.getId()||void 0!==c.seq?b():c.constructor.current(function(a,d){return a?b(a):(c.seq=d+1,void b())})})}},{assert:38}],11:[function(a,b){b.exports={name:"Email",base:"Model",properties:{to:{type:"String",required:!0},from:{type:"String",required:!0},subject:{type:"String",required:!0},text:{type:"String"},html:{type:"String"}}}},{}],12:[function(a,b){b.exports=function(a){a.send=function(){throw new Error("You must connect the Email Model to a Mail connector")},a.prototype.send=function(){throw new Error("You must connect the Email Model to a Mail connector")}}},{}],13:[function(a,b){b.exports={name:"RoleMapping",description:"Map principals to roles",properties:{id:{type:"string",id:!0,generated:!0},principalType:{type:"string",description:"The principal type, such as user, application, or role"},principalId:"string"},relations:{role:{type:"belongsTo",model:"Role",foreignKey:"roleId"}}}},{}],14:[function(a,b){(function(c){var d=a("../../lib/loopback");b.exports=function(a){a.USER="USER",a.APP=a.APPLICATION="APP",a.ROLE="ROLE",a.prototype.application=function(b){if(this.principalType===a.APPLICATION){var e=this.constructor.Application||d.getModelByType(d.Application);e.findById(this.principalId,b)}else c.nextTick(function(){b&&b(null,null)})},a.prototype.user=function(b){if(this.principalType===a.USER){var e=this.constructor.User||d.getModelByType(d.User);e.findById(this.principalId,b)}else c.nextTick(function(){b&&b(null,null)})},a.prototype.childRole=function(b){if(this.principalType===a.ROLE){var e=this.constructor.Role||d.getModelByType(d.Role);e.findById(this.principalId,b)}else c.nextTick(function(){b&&b(null,null)})}}}).call(this,a("_process"))},{"../../lib/loopback":30,_process:187}],15:[function(a,b){b.exports={name:"Role",properties:{id:{type:"string",id:!0,generated:!0},name:{type:"string",required:!0},description:"string",created:"date",modified:"date"},relations:{principals:{type:"hasMany",model:"RoleMapping",foreignKey:"roleId"}}}},{}],16:[function(a,b){(function(c){var d=a("../../lib/loopback"),e=a("debug")("loopback:security:role"),f=a("assert"),g=a("async"),h=a("../../lib/access-context").AccessContext,i=d.RoleMapping;f(i,"RoleMapping model must be defined before Role model"),b.exports=function(a){function b(a){return a?a===d.User||a.prototype instanceof d.User:!1}function j(a,b){return void 0===a||null===a||""===a||void 0===b||null===b||""===b?!1:a===b||a.toString()===b.toString()}a.definition.rawProperties.created["default"]=a.definition.properties.created["default"]=function(){return new Date},a.definition.rawProperties.modified["default"]=a.definition.properties.modified["default"]=function(){return new Date},a.once("dataSourceAttached",function(){var b=this.RoleMapping||d.getModelByType(i);a.prototype.users=function(a){b.find({where:{roleId:this.id,principalType:i.USER}},function(b,c){return b?void(a&&a(b)):c.map(function(a){return a.principalId})})},a.prototype.applications=function(a){b.find({where:{roleId:this.id,principalType:i.APPLICATION}},function(b,c){return b?void(a&&a(b)):c.map(function(a){return a.principalId})})},a.prototype.roles=function(a){b.find({where:{roleId:this.id,principalType:i.ROLE}},function(b,c){return b?void(a&&a(b)):c.map(function(a){return a.principalId})})}}),a.OWNER="$owner",a.RELATED="$related",a.AUTHENTICATED="$authenticated",a.UNAUTHENTICATED="$unauthenticated",a.EVERYONE="$everyone",a.registerResolver=function(b,c){a.resolvers||(a.resolvers={}),a.resolvers[b]=c},a.registerResolver(a.OWNER,function(b,d,e){if(!d||!d.model||!d.modelId)return void c.nextTick(function(){e&&e(null,!1)});var f=d.model,g=d.modelId,h=d.getUserId();a.isOwner(f,g,h,e)}),a.isOwner=function(a,d,g,h){return f(a,"Model class is required"),e("isOwner(): %s %s userId: %s",a&&a.modelName,d,g),g?b(a)?void c.nextTick(function(){h(null,j(d,g))}):void a.findById(d,function(c,f){function i(a,b){!a&&b?(e("User found: %j",b.id),h&&h(null,j(b.id,g))):h&&h(a,!1)}if(c||!f)return e("Model not found for id %j",d),void(h&&h(c,!1));e("Model found: %j",f);var k=f.userId||f.owner;if(k&&"function"!=typeof k)return void(h&&h(null,j(k,g)));for(var l in a.relations){var m=a.relations[l];if("belongsTo"===m.type&&b(m.modelTo))return e("Checking relation %s to %s: %j",l,m.modelTo.modelName,m),void f[l](i)}e("No matching belongsTo relation found for model %j and user: %j",d,g),h&&h(null,!1)}):void c.nextTick(function(){h(null,!1)})},a.registerResolver(a.AUTHENTICATED,function(b,d,e){return d?void a.isAuthenticated(d,e):void c.nextTick(function(){e&&e(null,!1)})}),a.isAuthenticated=function(a,b){c.nextTick(function(){b&&b(null,a.isAuthenticated())})},a.registerResolver(a.UNAUTHENTICATED,function(a,b,d){c.nextTick(function(){d&&d(null,!b||!b.isAuthenticated())})}),a.registerResolver(a.EVERYONE,function(a,b,d){c.nextTick(function(){d&&d(null,!0)})}),a.isInRole=function(b,f,j){f instanceof h||(f=new h(f)),e("isInRole(): %s",b),f.debug();var k=a.resolvers[b];if(k)return e("Custom resolver found for role %s",b),void k(b,f,j);if(0===f.principals.length)return e("isInRole() returns: false"),void c.nextTick(function(){j&&j(null,!1)});var l=f.principals.some(function(a){var c=a.type||void 0,d=a.id||void 0;return c===i.ROLE&&d===b});if(l)return e("isInRole() returns: %j",l),void c.nextTick(function(){j&&j(null,!0)});var m=this.RoleMapping||d.getModelByType(i);this.findOne({where:{name:b}},function(a,b){return a?void(j&&j(a)):b?(e("Role found: %j",b),void g.some(f.principals,function(a,d){var f=a.type||void 0,g=a.id||void 0,h=b.id.toString();null!==g&&void 0!==g&&"string"!=typeof g&&(g=g.toString()),f&&g?m.findOne({where:{roleId:h,principalType:f,principalId:g}},function(a,b){e("Role mapping found: %j",b),d(!a&&b)}):c.nextTick(function(){d(!1)})},function(a){e("isInRole() returns: %j",a),j&&j(null,a)})):void(j&&j(null,!1))})},a.getRoles=function(b,c){b instanceof h||(b=new h(b));var f=[],j=function(a){a&&-1===f.indexOf(a)&&f.push(a)},k=this,l=[];Object.keys(a.resolvers).forEach(function(a){l.push(function(c){k.isInRole(a,b,function(b,d){e.enabled&&e("In role %j: %j",a,d),!b&&d?(j(a),c()):c(b,null)})})});var m=this.RoleMapping||d.getModelByType(i);b.principals.forEach(function(a){var b=a.type||void 0,c=null==a.id?void 0:a.id;"string"!=typeof c&&null!=c&&(c=c.toString()),b===i.ROLE&&c&&j(c),b&&c&&l.push(function(a){m.find({where:{principalType:b,principalId:c}},function(b,c){return e("Role mappings found: %s %j",b,c),b?void(a&&a(b)):(c.forEach(function(a){j(a.roleId)}),void(a&&a()))})})}),g.parallel(l,function(a){e("getRoles() returns: %j %j",a,f),c&&c(a,f)})}}}).call(this,a("_process"))},{"../../lib/access-context":22,"../../lib/loopback":30,_process:187,assert:38,async:35,debug:211}],17:[function(a,b){b.exports={name:"Scope",description:["Schema for Scope which represents the permissions that are granted","to client applications by the resource owner"],properties:{name:{type:"string",required:!0},description:"string"}}},{}],18:[function(a,b){var c=a("assert"),d=a("../../lib/loopback");b.exports=function(a){a.checkPermission=function(a,b,e,f,g){var h=d.ACL;c(h,"ACL model must be defined before Scope.checkPermission is called"),this.findOne({where:{name:a}},function(a,c){if(a)g&&g(a);else{var i=d.getModelByType(h);i.checkPermission(h.SCOPE,c.id,b,e,f,g)}})}}},{"../../lib/loopback":30,assert:38}],19:[function(a,b){b.exports={name:"User",properties:{realm:{type:"string"},username:{type:"string"},password:{type:"string",required:!0},credentials:{type:"object",deprecated:!0},challenges:{type:"object",deprecated:!0},email:{type:"string",required:!0},emailVerified:"boolean",verificationToken:"string",status:"string",created:"date",lastUpdated:"date"},hidden:["password"],acls:[{principalType:"ROLE",principalId:"$everyone",permission:"DENY"},{principalType:"ROLE",principalId:"$everyone",permission:"ALLOW",property:"create"},{principalType:"ROLE",principalId:"$owner",permission:"ALLOW",property:"deleteById"},{principalType:"ROLE",principalId:"$everyone",permission:"ALLOW",property:"login"},{principalType:"ROLE",principalId:"$everyone",permission:"ALLOW",property:"logout"},{principalType:"ROLE",principalId:"$owner",permission:"ALLOW",property:"findById"},{principalType:"ROLE",principalId:"$owner",permission:"ALLOW",property:"updateAttributes"},{principalType:"ROLE",principalId:"$everyone",permission:"ALLOW",property:"confirm"},{principalType:"ROLE",principalId:"$everyone",permission:"ALLOW",property:"resetPassword",accessType:"EXECUTE"}],relations:{accessTokens:{type:"hasMany",model:"AccessToken",foreignKey:"userId"}}}},{}],20:[function(a,b){(function(c){var d,e=a("../../lib/loopback"),f=a("path"),g=10,h=a("crypto");try{d=a("bcrypt"),d&&"function"!=typeof d.compare&&(d=a("bcryptjs"))}catch(i){d=a("bcryptjs")}var j=1209600,k=900,l=31556926,m=a("assert"),n=a("debug")("loopback:user");b.exports=function(a){function b(a,b){var c=[null,a];if(!b)return c;var d=a.indexOf(b);return-1!==d&&(c[0]=a.substring(0,d),c[1]=a.substring(d+b.length)),c}a.prototype.createAccessToken=function(a,b,c){void 0===c&&"function"==typeof b&&(c=b,b=void 0),"object"!=typeof a||b||(b=a,a=b.ttl),b=b||{};var d=this.constructor;a=Math.min(a||d.settings.ttl,d.settings.maxTTL),this.accessTokens.create({ttl:a},c)},a.normalizeCredentials=function(a,c,d){var e={};if(a=a||{},c){a.realm&&(e.realm=a.realm);var f;a.email?(f=b(a.email,d),e.email=f[1],f[0]&&(e.realm=f[0])):a.username&&(f=b(a.username,d),e.username=f[1],f[0]&&(e.realm=f[0]))}else a.email?e.email=a.email:a.username&&(e.username=a.username);return e},a.login=function(a,b,c){var d=this;"function"==typeof b&&(c=b,b=void 0),b=b||"",b=Array.isArray(b)?b.map(function(a){return a.toLowerCase()}):b.toLowerCase();var e,f=!(!d.settings.realmRequired&&!d.settings.realmDelimiter);f&&(e=d.settings.realmDelimiter);var g=d.normalizeCredentials(a,f,e);if(f&&!g.realm){var h=new Error("realm is required");return h.statusCode=400,h.code="REALM_REQUIRED",c(h)}if(!g.email&&!g.username){var i=new Error("username or email is required");return i.statusCode=400,i.code="USERNAME_EMAIL_REQUIRED",c(i)}d.findOne({where:g},function(e,f){function h(a,d){return a?c(a):((Array.isArray(b)?-1!==b.indexOf("user"):"user"===b)&&(d.__data.user=f),void c(a,d))}var i=new Error("login failed");i.statusCode=401,i.code="LOGIN_FAILED",e?(n("An error is reported from User.findOne: %j",e),c(i)):f?f.hasPassword(a.password,function(b,e){if(b)n("An error is reported from User.hasPassword: %j",b),c(i);else if(e){if(d.settings.emailVerificationRequired&&!f.emailVerified)return n("User email has not been verified"),b=new Error("login failed as the email has not been verified"),b.statusCode=401,b.code="LOGIN_FAILED_EMAIL_NOT_VERIFIED",c(b);2===f.createAccessToken.length?f.createAccessToken(a.ttl,h):f.createAccessToken(a.ttl,a,h)}else n("The password is invalid for user %s",g.email||g.username),c(i)}):(n("No matching record is found for user %s",g.email||g.username),c(i))})},a.logout=function(a,b){this.relations.accessTokens.modelTo.findById(a,function(a,c){a?b(a):c?c.destroy(b):b(new Error("could not find accessToken"))})},a.prototype.hasPassword=function(a,b){this.password&&a?d.compare(a,this.password,function(a,c){return a?b(a):void b(null,c)}):b(null,!1)},a.prototype.verify=function(b,d){function g(a){b.verifyHref+="&token="+a.verificationToken,b.text=b.text||"Please verify your email by opening this link in a web browser:\n	{href}",b.text=b.text.replace("{href}",b.verifyHref);var c=e.template(b.template);k.send({to:b.to||a.email,from:b.from,subject:b.subject||"Thanks for Registering",text:b.text,html:c(b),headers:b.headers||{}},function(b,c){b?d(b):d(null,{email:c,token:a.verificationToken,uid:a.id})})}var h=this,i=this.constructor;m("object"==typeof b,"options required when calling user.verify()"),m(b.type,"You must supply a verification type (options.type)"),m("email"===b.type,"Unsupported verification type"),m(b.to||this.email,"Must include options.to when calling user.verify() or the user must have an email property"),m(b.from,"Must include options.from when calling user.verify() or the user must have an email property"),b.redirect=b.redirect||"/",b.template=f.resolve(b.template||f.join(c,"..","..","templates","verify.ejs")),b.user=this,b.protocol=b.protocol||"http";var j=i.app;b.host=b.host||j&&j.get("host")||"localhost",b.port=b.port||j&&j.get("port")||3e3,b.restApiRoot=b.restApiRoot||j&&j.get("restApiRoot")||"/api",b.verifyHref=b.verifyHref||b.protocol+"://"+b.host+":"+b.port+b.restApiRoot+i.http.path+i.sharedClass.find("confirm",!0).http.path+"?uid="+b.user.id+"&redirect="+b.redirect;var k=b.mailer||this.constructor.email||e.getModelByType(e.Email),l=b.generateVerificationToken||a.generateVerificationToken;l(h,function(a,b){return a?d(a):(h.verificationToken=b,void h.save(function(a){a?d(a):g(h)}))})},a.generateVerificationToken=function(a,b){h.randomBytes(64,function(a,c){b(a,c&&c.toString("hex"))})},a.confirm=function(a,b,c,d){this.findById(a,function(c,e){c?d(c):e&&e.verificationToken===b?(e.verificationToken=void 0,e.emailVerified=!0,e.save(function(a){a?d(a):d()})):(e?(c=new Error("Invalid token: "+b),c.statusCode=400,c.code="INVALID_TOKEN"):(c=new Error("User not found: "+a),c.statusCode=404,c.code="USER_NOT_FOUND"),d(c))})},a.resetPassword=function(a,b){var c=this,d=c.settings.resetPasswordTokenTTL||k;if(a=a||{},"string"==typeof a.email)c.findOne({where:{email:a.email}},function(e,f){e?b(e):f?f.accessTokens.create({ttl:d},function(d,e){d?b(d):(b(),c.emit("resetPasswordRequest",{email:a.email,accessToken:e,user:f}))}):b()});else{var e=new Error("email is required");e.statusCode=400,e.code="EMAIL_REQUIRED",b(e)}},a.hashPassword=function(a){this.validatePassword(a);var b=d.genSaltSync(this.settings.saltWorkFactor||g);return d.hashSync(a,b)},a.validatePassword=function(a){if("string"==typeof a&&a)return!0;var b=new Error("Invalid password: "+a);throw b.statusCode=422,b},a.setup=function(){a.base.setup.call(this);var b=this;this.settings.maxTTL=this.settings.maxTTL||l,this.settings.ttl=this.settings.ttl||j,
b.setter.password=function(a){this.$password=0===a.indexOf("$2a$")&&60===a.length?a:this.constructor.hashPassword(a)},b.beforeRemote("create",function(a,b,c){var d=a.req.body;d&&d.emailVerified&&(d.emailVerified=!1),c()}),b.remoteMethod("login",{description:"Login a user with username/email and password",accepts:[{arg:"credentials",type:"object",required:!0,http:{source:"body"}},{arg:"include",type:"string",http:{source:"query"},description:"Related objects to include in the response. See the description of return value for more details."}],returns:{arg:"accessToken",type:"object",root:!0,description:"The response body contains properties of the AccessToken created on login.\nDepending on the value of `include` parameter, the body may contain additional properties:\n\n  - `user` - `{User}` - Data of the currently logged in user. (`include=user`)\n\n"},http:{verb:"post"}}),b.remoteMethod("logout",{description:"Logout a user with access token",accepts:[{arg:"access_token",type:"string",required:!0,http:function(a){var b=a&&a.req,c=b&&b.accessToken,d=c&&c.id;return d},description:"Do not supply this argument, it is automatically extracted from request headers."}],http:{verb:"all"}}),b.remoteMethod("confirm",{description:"Confirm a user registration with email verification token",accepts:[{arg:"uid",type:"string",required:!0},{arg:"token",type:"string",required:!0},{arg:"redirect",type:"string"}],http:{verb:"get",path:"/confirm"}}),b.remoteMethod("resetPassword",{description:"Reset password for a user with email",accepts:[{arg:"options",type:"object",required:!0,http:{source:"body"}}],http:{verb:"post",path:"/reset"}}),b.on("attached",function(){b.afterRemote("confirm",function(a,b,c){if(void 0!==a.args.redirect){if(!a.res)return c(new Error("The transport does not support HTTP redirects."));a.res.location(a.args.redirect),a.res.status(302)}c()})}),m(e.Email,"Email model must be defined before User model"),b.email=e.Email,m(e.AccessToken,"AccessToken model must be defined before User model"),b.accessToken=e.AccessToken;var c=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.validatesFormatOf("email",{"with":c,message:"Must provide a valid email"}),b.settings.realmRequired||b.settings.realmDelimiter||(b.validatesUniquenessOf("email",{message:"Email already exists"}),b.validatesUniquenessOf("username",{message:"User already exists"})),b},a.setup()}}).call(this,"/common/models")},{"../../lib/loopback":30,assert:38,bcrypt:37,bcryptjs:36,crypto:44,debug:211,path:186}],21:[function(a,b){{var c=b.exports=a("./lib/loopback");a("loopback-datasource-juggler")}c.Connector=a("./lib/connectors/base-connector"),c.Memory=a("./lib/connectors/memory"),c.Mail=a("./lib/connectors/mail"),c.Remote=a("loopback-connector-remote"),c.GeoPoint=a("loopback-datasource-juggler/lib/geo").GeoPoint,c.ValidationError=c.Model.ValidationError},{"./lib/connectors/base-connector":26,"./lib/connectors/mail":27,"./lib/connectors/memory":28,"./lib/loopback":30,"loopback-connector-remote":218,"loopback-datasource-juggler":221,"loopback-datasource-juggler/lib/geo":226}],22:[function(a,b){function c(a){if(!(this instanceof c))return new c(a);a=a||{},this.principals=a.principals||[];var b=a.model;b="string"==typeof b?g.getModel(b):b,this.model=b,this.modelName=b&&b.modelName,this.modelId=a.id||a.modelId,this.property=a.property||c.ALL,this.method=a.method,this.sharedMethod=a.sharedMethod,this.sharedClass=this.sharedMethod&&this.sharedMethod.sharedClass,this.methodNames=this.sharedMethod?this.sharedMethod.aliases.concat([this.sharedMethod.name]):[],this.sharedMethod&&(this.accessType=this.model._getAccessTypeForMethod(this.sharedMethod)),this.accessType=a.accessType||c.ALL,f(g.AccessToken,"AccessToken model must be defined before AccessContext model"),this.accessToken=a.accessToken||g.AccessToken.ANONYMOUS;var e=a.principalType||d.USER,h=a.principalId||void 0,i=a.principalName||void 0;h&&this.addPrincipal(e,h,i);var j=this.accessToken||{};j.userId&&this.addPrincipal(d.USER,j.userId),j.appId&&this.addPrincipal(d.APPLICATION,j.appId),this.remotingContext=a.remotingContext}function d(a,b,c){return this instanceof d?(this.type=a,this.id=b,void(this.name=c)):new d(a,b,c)}function e(a,b,d,f,g){if(!(this instanceof e))return new e(a,b,d);if(1===arguments.length&&"object"==typeof a){var h=a||{};this.model=h.model||c.ALL,this.property=h.property||c.ALL,this.accessType=h.accessType||c.ALL,this.permission=h.permission||c.DEFAULT,this.methodNames=g||[]}else this.model=a||c.ALL,this.property=b||c.ALL,this.accessType=d||c.ALL,this.permission=f||c.DEFAULT,this.methodNames=g||[]}var f=a("assert"),g=a("./loopback"),h=a("debug")("loopback:security:access-context");c.ALL="*",c.READ="READ",c.WRITE="WRITE",c.EXECUTE="EXECUTE",c.DEFAULT="DEFAULT",c.ALLOW="ALLOW",c.ALARM="ALARM",c.AUDIT="AUDIT",c.DENY="DENY",c.permissionOrder={DEFAULT:0,ALLOW:1,ALARM:2,AUDIT:3,DENY:4},c.prototype.addPrincipal=function(a,b,c){for(var e=new d(a,b,c),f=0;f<this.principals.length;f++){var g=this.principals[f];if(g.equals(e))return!1}return this.principals.push(e),!0},c.prototype.getUserId=function(){for(var a=0;a<this.principals.length;a++){var b=this.principals[a];if(b.type===d.USER)return b.id}return null},c.prototype.getAppId=function(){for(var a=0;a<this.principals.length;a++){var b=this.principals[a];if(b.type===d.APPLICATION)return b.id}return null},c.prototype.isAuthenticated=function(){return!(!this.getUserId()&&!this.getAppId())},c.prototype.debug=function(){h.enabled&&(h("---AccessContext---"),this.principals&&this.principals.length?(h("principals:"),this.principals.forEach(function(a){h("principal: %j",a)})):h("principals: %j",this.principals),h("modelName %s",this.modelName),h("modelId %s",this.modelId),h("property %s",this.property),h("method %s",this.method),h("accessType %s",this.accessType),this.accessToken&&(h("accessToken:"),h("  id %j",this.accessToken.id),h("  ttl %j",this.accessToken.ttl)),h("getUserId() %s",this.getUserId()),h("isAuthenticated() %s",this.isAuthenticated()))},d.USER="USER",d.APP=d.APPLICATION="APP",d.ROLE="ROLE",d.SCOPE="SCOPE",d.prototype.equals=function(a){return a instanceof d?this.type===a.type&&String(this.id)===String(a.id):!1},e.prototype.isWildcard=function(){return this.model===c.ALL||this.property===c.ALL||this.accessType===c.ALL},e.prototype.exactlyMatches=function(a){var b=a.model===this.model,c=a.property===this.property,d=-1!==this.methodNames.indexOf(a.property),e=a.accessType===this.accessType;return b&&e?c||d:!1},e.prototype.isAllowed=function(){return this.permission!==g.ACL.DENY},e.prototype.debug=function(){h.enabled&&(h("---AccessRequest---"),h(" model %s",this.model),h(" property %s",this.property),h(" accessType %s",this.accessType),h(" permission %s",this.permission),h(" isWildcard() %s",this.isWildcard()),h(" isAllowed() %s",this.isAllowed()))},b.exports.AccessContext=c,b.exports.Principal=d,b.exports.AccessRequest=e},{"./loopback":30,assert:38,debug:211}],23:[function(a,b){(function(c,d){function e(b,c){var e;if(j("object"==typeof b,"cannont create data source without config object"),"string"==typeof b.connector){var f=b.connector;c[f]?b.connector=c[f]:(e=p.join(d,"connectors",f+".js"),k.existsSync(e)&&(b.connector=a(e)))}return i.createDataSource(b)}function f(a,b,c){j(a.prototype instanceof i.Model,a.modelName+" must be a descendant of loopback.Model");var d=b.dataSource;d&&("string"==typeof d&&(d=c.dataSources[d]),j(d instanceof h,a.modelName+' is referencing a dataSource that does not exist: "'+b.dataSource+'"')),b=l({},b),b.dataSource=d,i.configureModel(a,b)}function g(a){a._handlers=void 0}var h=a("loopback-datasource-juggler").DataSource,i=a("./registry"),j=a("assert"),k=a("fs"),l=a("util")._extend,m=a("strong-remoting"),n=a("underscore.string/classify"),o=a("underscore.string/camelize"),p=a("path"),q=b.exports={};q.remotes=function(){if(this._remotes)return this._remotes;var a={};return this.get&&(a=this.get("remoting")),this._remotes=m.create(a)},q.disuse=function(a){if(this.stack)for(var b=0;b<this.stack.length;b++)this.stack[b].route===a&&this.stack.splice(b,1)},q.model=function(a,b){var c=!0;if(arguments.length>1){if(b=b||{},"string"==typeof a){var d=l({},b);d.options=l({},b.options),d.name=a,delete d.dataSource,a=i.createModel(d),["relations","base","acls","hidden"].forEach(function(a){delete b[a],b.options&&delete b.options[a]}),delete b.properties}f(a,b,this),c=b["public"]!==!1}else j(a.prototype instanceof i.Model,a.modelName+" must be a descendant of loopback.Model");var e=a.modelName;return this.models[e]=this.models[n(e)]=this.models[o(e)]=a,this.models().push(a),c&&a.sharedClass&&(this.remotes().addClass(a.sharedClass),a.settings.trackChanges&&a.Change&&this.remotes().addClass(a.Change.sharedClass),g(this),this.emit("modelRemoted",a.sharedClass)),a.shared=c,a.app=this,a.emit("attached",this),a},q.models=function(){return this._models||(this._models=[])},q.dataSource=function(a,b){var c=e(b,this.connectors);return this.dataSources[a]=this.dataSources[n(a)]=this.dataSources[o(a)]=c,c},q.connector=function(a,b){this.connectors[a]=this.connectors[n(a)]=this.connectors[o(a)]=b},q.remoteObjects=function(){var a={};return this.remotes().classes().forEach(function(b){a[b.name]=b.ctor}),a},q.handler=function(a,b){var c=this._handlers||(this._handlers={});if(c[a])return c[a];var d=this.remotes(),e=this._handlers[a]=d.handler(a,b);return d.classes().forEach(function(a){a.ctor.emit("mounted",q,a,d)}),e},q.dataSources=q.datasources={},q.enableAuth=function(){var a=this.remotes(),b=this;a.before("**",function(a,c,d){var e=a.req,f=d.ctor,g=a.instance,h=g&&g.id||(e.params&&void 0!==e.params.id?e.params.id:e.body&&void 0!==e.body.id?e.body.id:e.query&&void 0!==e.query.id?e.query.id:void 0),i=f.modelName,j=f.settings||{},k=j.aclErrorStatus||b.get("aclErrorStatus")||401;e.accessToken||(k=401),f.checkAccess?f.checkAccess(e.accessToken,h,d,a,function(a,b){if(a)console.log(a),c(a);else if(b)c();else{var d={403:{message:"Access Denied",code:"ACCESS_DENIED"},404:{message:"could not find "+i+" with id "+h,code:"MODEL_NOT_FOUND"},401:{message:"Authorization Required",code:"AUTHORIZATION_REQUIRED"}},e=new Error(d[k].message||d[403].message);e.statusCode=k,e.code=d[k].code||d[403].code,c(e)}}):c()}),this.isAuthEnabled=!0},q.boot=function(){throw new Error("`app.boot` was removed, use the new module loopback-boot instead")},q.listen=function(b){var d=this,e=a("http").createServer(this);e.on("listening",function(){d.set("port",this.address().port);var a=!1,b=d.get("host");if(b?("0.0.0.0"===b||"::"===b)&&(a=!0):(a=!0,b=this.address().address,d.set("host",b)),!d.get("url")){"win32"===c.platform&&a&&(b="localhost");var e="http://"+b+":"+d.get("port")+"/";d.set("url",e)}});var f=0===arguments.length||1==arguments.length&&"function"==typeof arguments[0];return f?e.listen(this.get("port"),this.get("host"),b):e.listen.apply(e,arguments),e}}).call(this,a("_process"),"/lib")},{"./registry":33,_process:187,assert:38,fs:37,http:180,"loopback-datasource-juggler":221,path:186,"strong-remoting":253,"underscore.string/camelize":271,"underscore.string/classify":273,util:207}],24:[function(a,b){function c(){return new d}function d(){this.settings={}}var e=a("events").EventEmitter,f=a("util");b.exports=c,c.errorHandler={},f.inherits(d,e),d.prototype.set=function(a,b){return 1==arguments.length?this.get(a):(this.settings[a]=b,this)},d.prototype.get=function(a){return this.settings[a]}},{events:179,util:207}],25:[function(a,b){b.exports=function(b){function c(a,c){var d=b.createModel(a);return c(d),d}b.Email=c(a("../common/models/email.json"),a("../common/models/email.js")),b.Application=c(a("../common/models/application.json"),a("../common/models/application.js")),b.AccessToken=c(a("../common/models/access-token.json"),a("../common/models/access-token.js")),b.RoleMapping=c(a("../common/models/role-mapping.json"),a("../common/models/role-mapping.js")),b.Role=c(a("../common/models/role.json"),a("../common/models/role.js")),b.ACL=c(a("../common/models/acl.json"),a("../common/models/acl.js")),b.Scope=c(a("../common/models/scope.json"),a("../common/models/scope.js")),b.User=c(a("../common/models/user.json"),a("../common/models/user.js")),b.Change=c(a("../common/models/change.json"),a("../common/models/change.js")),b.Checkpoint=c(a("../common/models/checkpoint.json"),a("../common/models/checkpoint.js"));var d={DB:"db",MAIL:"mail"};b.Email.autoAttach=d.MAIL,b.PersistedModel.autoAttach=d.DB,b.User.autoAttach=d.DB,b.AccessToken.autoAttach=d.DB,b.Role.autoAttach=d.DB,b.RoleMapping.autoAttach=d.DB,b.ACL.autoAttach=d.DB,b.Scope.autoAttach=d.DB,b.Application.autoAttach=d.DB}},{"../common/models/access-token.js":2,"../common/models/access-token.json":1,"../common/models/acl.js":4,"../common/models/acl.json":3,"../common/models/application.js":6,"../common/models/application.json":5,"../common/models/change.js":8,"../common/models/change.json":7,"../common/models/checkpoint.js":10,"../common/models/checkpoint.json":9,"../common/models/email.js":12,"../common/models/email.json":11,"../common/models/role-mapping.js":14,"../common/models/role-mapping.json":13,"../common/models/role.js":16,"../common/models/role.json":15,"../common/models/scope.js":18,"../common/models/scope.json":17,"../common/models/user.js":20,"../common/models/user.json":19}],26:[function(a,b){function c(a){d.apply(this,arguments),this.options=a,e("created with options",a)}b.exports=c;{var d=a("events").EventEmitter,e=a("debug")("connector"),f=a("util"),g=f.inherits;a("assert")}g(c,d),c._createJDBAdapter=function(a){var b={};a.initialize(b,function(){})},c.prototype._addCrudOperationsFromJDBAdapter=function(){}},{assert:38,debug:211,events:179,util:207}],27:[function(a,b){(function(c){function d(a){g("object"==typeof a,"cannot initialize MailConnector without a settings object");var b=a.transports;!b&&a.transport&&(b=[a.transport]),b||(b=[]),this.transportsIndex={},this.transports=[],i.isServer&&b.forEach(this.setupTransport.bind(this))}function e(){}var f=a("nodemailer"),g=a("assert"),h=a("debug")("loopback:connector:mail"),i=a("../loopback");b.exports=d,d.initialize=function(a,b){a.connector=new d(a.settings),b()},d.prototype.DataAccessObject=e,d.prototype.setupTransport=function(b){var c=this;c.transports=c.transports||[],c.transportsIndex=c.transportsIndex||{};var d,e=(b.type||"STUB").toLowerCase();if("direct"===e)d=f.createTransport();else if("smtp"===e)d=f.createTransport(b);else{var g="nodemailer-"+e+"-transport",h=a(g);d=f.createTransport(h(b))}c.transportsIndex[b.type]=d,c.transports.push(d)},d.prototype.transportForName=function(a){return this.transportsIndex[a]},d.prototype.defaultTransport=function(){return this.transports[0]||this.stubTransport},e.send=function(a,b){var d=this.dataSource,e=d&&d.settings,f=d.connector;g(f,"Cannot send mail without a connector!");var i=f.transportForName(a.transport);i||(i=f.defaultTransport()),(h.enabled||e&&e.debug)&&(console.log("Sending Mail:"),a.transport&&console.log("	 TRANSPORT:",a.transport),console.log("	 TO:",a.to),console.log("	 FROM:",a.from),console.log("	 SUBJECT:",a.subject),console.log("	 TEXT:",a.text),console.log("	 HTML:",a.html)),i?(g(i.sendMail,"You must supply an Email.settings.transports containing a valid transport"),i.sendMail(a,b)):(console.warn("Warning: No email transport specified for sending email. Setup a transport to send mail messages."),c.nextTick(function(){b(null,a)}))},e.prototype.send=function(a){this.constructor.send(this,a)},d.mailer=d.prototype.mailer=e.mailer=e.prototype.mailer=f}).call(this,a("_process"))},{"../loopback":30,_process:187,assert:38,debug:211,nodemailer:37}],28:[function(a,b){function c(){}b.exports=c;var d=a("./base-connector"),e=(a("debug")("memory"),a("util")),f=e.inherits,g=(a("assert"),a("loopback-datasource-juggler/lib/connectors/memory"));f(c,d),c.initialize=g.initialize},{"./base-connector":26,assert:38,debug:211,"loopback-datasource-juggler/lib/connectors/memory":223,util:207}],29:[function(a,b,c){(function(b){function d(b){try{return a(b)}catch(c){return void 0}}function e(a,b){return function(){var c="The middleware loopback."+a+" is not installed.\nRun `npm install --save "+b+"` to fix the problem.";throw new Error(c)}}var f=a("path"),g=c,h={compress:"compression",timeout:"connect-timeout",cookieParser:"cookie-parser",cookieSession:"cookie-session",csrf:"csurf",errorHandler:"errorhandler",session:"express-session",methodOverride:"method-override",logger:"morgan",responseTime:"response-time",favicon:"serve-favicon",directory:"serve-index",vhost:"vhost"};g.bodyParser=d("body-parser"),g.json=g.bodyParser&&g.bodyParser.json,g.urlencoded=g.bodyParser&&g.bodyParser.urlencoded;for(var i in h){var j=h[i];g[i]=d(j)||e(i,j)}var k=g.favicon;g.favicon=function(a,c){return a=a||f.join(b,"../favicon.ico"),k(a,c)}}).call(this,"/lib")},{path:186}],30:[function(a,b){(function(c){function d(){var a=g();return l(a,h),a.loopback=m,a.models=function(){return h.models.apply(this,arguments)},a.datasources=a.dataSources={},a.connectors={},a.connector("memory",m.Memory),a.connector("remote",m.Remote),a}function e(a){for(var b in a){var c=Object.getOwnPropertyDescriptor(a,b);c&&Object.defineProperty(m,b,c)}}var f=a("express"),g=a("./server-app"),h=a("./application"),i=a("fs"),j=a("ejs"),k=a("path"),l=a("util")._extend,m=(a("assert"),b.exports=d);if(m.version=a("../package.json").version,m.mime=f.mime,e(a("./runtime")),e(a("./registry")),e(f),m.isServer){var n=a("./express-middleware");e(n)}m.isServer&&(i.readdirSync(k.join(c,"..","server","middleware")).filter(function(a){return a.match(/\.js$/)}).forEach(function(b){m[b.replace(/\.js$/,"")]=a("../server/middleware/"+b)}),m.urlNotFound=m["url-not-found"],delete m["url-not-found"]),m.isServer&&(m.faviconFile=k.resolve(c,"../favicon.ico")),m.errorHandler.title="Loopback",m.remoteMethod=function(a,b){a.shared=!0,"object"==typeof b&&Object.keys(b).forEach(function(c){a[c]=b[c]}),a.http=a.http||{verb:"get"}},m.template=function(a){var b=this._templates||(this._templates={}),c=b[a]||(b[a]=i.readFileSync(a,"utf8"));return j.compile(c)},m.getCurrentContext=function(){return null},a("./builtin-models")(m)}).call(this,"/lib")},{"../package.json":279,"./application":23,"./builtin-models":25,"./express-middleware":29,"./registry":33,"./runtime":34,"./server-app":24,assert:38,ejs:214,express:24,fs:37,path:186,util:207}],31:[function(a,b){function c(a,b,c){if(null!==b.result)return c();var d=b.getArgByName("fk"),e='Unknown "'+a+'" id "'+d+'".',f=new Error(e);f.statusCode=f.status=404,f.code="MODEL_NOT_FOUND",c(f)}var d=a("./registry"),e=a("assert"),f=a("strong-remoting"),g=a("strong-remoting").SharedClass,h=a("util")._extend,i=b.exports=d.modelBuilder.define("Model");i.setup=function(){var a=this,b=this.settings,c=this.modelName,d={};h(d,b.remoting||{});var e=a.sharedClass=new g(a.modelName,a,d);f.convert(c,function(b){return b?new a(b):b}),a.sharedCtor=function(a,b,c){var d=this;if("function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,"object"!=typeof a?(b=a,a=null):b=null),b&&a){var e=new d(a);e.id=b,c(null,e)}else a?c(null,new d(a)):b?d.findById(b,function(a,d){a?c(a):d?c(null,d):(a=new Error("could not find a model with id "+b),a.statusCode=404,a.code="MODEL_NOT_FOUND",c(a))}):c(new Error("must specify an id or data"))};var i=a.modelName+" id";return a.sharedCtor.accepts=[{arg:"id",type:"any",required:!0,http:{source:"path"},description:i}],a.sharedCtor.http=[{path:"/:id"}],a.sharedCtor.returns={root:!0},a.beforeRemote=function(a,b){var c=this;if(this.app){var d=this.app.remotes(),e=c.modelName;d.before(e+"."+a,function(a,c){b(a,a.result,c)})}else{var f=arguments;this.once("attached",function(){c.beforeRemote.apply(c,f)})}},a.afterRemote=function(a,b){var c=this;if(this.app){var d=this.app.remotes(),e=c.modelName;d.after(e+"."+a,function(a,c){b(a,a.result,c)})}else{var f=arguments;this.once("attached",function(){c.afterRemote.apply(c,f)})}},e.resolve(function(b){var c=a.relations||{};for(var d in c){var e=c[d];"belongsTo"===e.type?a.belongsToRemoting(d,e,b):"hasOne"===e.type||"embedsOne"===e.type?a.hasOneRemoting(d,e,b):("hasMany"===e.type||"embedsMany"===e.type||"referencesMany"===e.type)&&a.hasManyRemoting(d,e,b)}var f=a.scopes||{};for(var g in f)a.scopeRemoting(g,f[g],b)}),a};var j=null;i._ACL=function(a){if(void 0!==a&&(j=a),j)return j;var b=d.getModel("ACL");return j=d.getModelByType(b)},i.checkAccess=function(a,b,c,e,f){var g=d.getModel("AccessToken").ANONYMOUS;a=a||g;var h=i._ACL();e=e||{},"function"==typeof e&&void 0===f&&(f=e,e={}),h.checkAccessForContext({accessToken:a,model:this,property:c.name,method:c.name,sharedMethod:c,modelId:b,accessType:this._getAccessTypeForMethod(c),remotingContext:e},function(a,b){return a?f(a):void f(null,b.isAllowed())})},i._getAccessTypeForMethod=function(a){"string"==typeof a&&(a={name:a}),e("object"==typeof a,"method is a required argument and must be a RemoteMethod object");var b=i._ACL();if(a.accessType)return e(a.accessType===b.READ||a.accessType===b.WRITE||a.accessType===b.EXECUTE,"invalid accessType "+a.accessType+'. It must be "READ", "WRITE", or "EXECUTE"'),a.accessType;var c=a.http&&a.http.verb;if("string"==typeof c&&(c=c.toUpperCase()),"GET"===c||"HEAD"===c)return b.READ;switch(a.name){case"create":return b.WRITE;case"updateOrCreate":return b.WRITE;case"upsert":return b.WRITE;case"exists":return b.READ;case"findById":return b.READ;case"find":return b.READ;case"findOne":return b.READ;case"destroyById":return b.WRITE;case"deleteById":return b.WRITE;case"removeById":return b.WRITE;case"count":return b.READ;default:return b.EXECUTE}},i.getApp=function(a){var b=this;this.app?a(null,this.app):b.once("attached",function(){e(b.app),a(null,b.app)})},i.remoteMethod=function(a,b){void 0===b.isStatic&&(b.isStatic=!0),this.sharedClass.defineMethod(a,b)},i.disableRemoteMethod=function(a,b){this.sharedClass.disableMethod(a,b||!1)},i.belongsToRemoting=function(a,b,c){var d=b.modelTo&&b.modelTo.modelName;d=d||"PersistedModel";var e=this.prototype[a],f=b.options.http&&b.options.http.path||a;c("__get__"+a,{isStatic:!1,http:{verb:"get",path:"/"+f},accepts:{arg:"refresh",type:"boolean",http:{source:"query"}},accessType:"READ",description:"Fetches belongsTo relation "+a,returns:{arg:a,type:d,root:!0}},e)},i.hasOneRemoting=function(a,b,d){var e=b.options.http&&b.options.http.path||a,f=b.modelTo.modelName;d("__get__"+a,{isStatic:!1,http:{verb:"get",path:"/"+e},accepts:{arg:"refresh",type:"boolean",http:{source:"query"}},description:"Fetches hasOne relation "+a,accessType:"READ",returns:{arg:a,type:b.modelTo.modelName,root:!0},rest:{after:c.bind(null,f)}}),d("__create__"+a,{isStatic:!1,http:{verb:"post",path:"/"+e},accepts:{arg:"data",type:f,http:{source:"body"}},description:"Creates a new instance in "+a+" of this model.",accessType:"WRITE",returns:{arg:"data",type:f,root:!0}}),d("__update__"+a,{isStatic:!1,http:{verb:"put",path:"/"+e},accepts:{arg:"data",type:f,http:{source:"body"}},description:"Update "+a+" of this model.",accessType:"WRITE",returns:{arg:"data",type:f,root:!0}}),d("__destroy__"+a,{isStatic:!1,http:{verb:"delete",path:"/"+e},description:"Deletes "+a+" of this model.",accessType:"WRITE"})},i.hasManyRemoting=function(a,b,d){var e=b.options.http&&b.options.http.path||a,f=b.modelTo.modelName,g=this.prototype["__findById__"+a];d("__findById__"+a,{isStatic:!1,http:{verb:"get",path:"/"+e+"/:fk"},accepts:{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}},description:"Find a related item by id for "+a,accessType:"READ",returns:{arg:"result",type:f,root:!0},rest:{after:c.bind(null,f)}},g);var h=this.prototype["__destroyById__"+a];d("__destroyById__"+a,{isStatic:!1,http:{verb:"delete",path:"/"+e+"/:fk"},accepts:{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}},description:"Delete a related item by id for "+a,accessType:"WRITE",returns:[]},h);var i=this.prototype["__updateById__"+a];if(d("__updateById__"+a,{isStatic:!1,http:{verb:"put",path:"/"+e+"/:fk"},accepts:[{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}},{arg:"data",type:f,http:{source:"body"}}],description:"Update a related item by id for "+a,accessType:"WRITE",returns:{arg:"result",type:f,root:!0}},i),b.modelThrough||"referencesMany"===b.type){var j=b.modelThrough||b.modelTo,k=[];"hasMany"===b.type&&b.modelThrough&&k.push({arg:"data",type:j.modelName,http:{source:"body"}});var l=this.prototype["__link__"+a];d("__link__"+a,{isStatic:!1,http:{verb:"put",path:"/"+e+"/rel/:fk"},accepts:[{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}}].concat(k),description:"Add a related item by id for "+a,accessType:"WRITE",returns:{arg:a,type:j.modelName,root:!0}},l);var m=this.prototype["__unlink__"+a];d("__unlink__"+a,{isStatic:!1,http:{verb:"delete",path:"/"+e+"/rel/:fk"},accepts:{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}},description:"Remove the "+a+" relation to an item by id",accessType:"WRITE",returns:[]},m);var n=this.prototype["__exists__"+a];d("__exists__"+a,{isStatic:!1,http:{verb:"head",path:"/"+e+"/rel/:fk"},accepts:{arg:"fk",type:"any",description:"Foreign key for "+a,required:!0,http:{source:"path"}},description:"Check the existence of "+a+" relation to an item by id",accessType:"READ",returns:{arg:"exists",type:"boolean",root:!0},rest:{after:function(a,b){if(a.result===!1){var c=a.method.sharedClass.name,d=a.getArgByName("id"),e='Unknown "'+c+'" id "'+d+'".',f=new Error(e);f.statusCode=f.status=404,f.code="MODEL_NOT_FOUND",b(f)}else b()}}},n)}},i.scopeRemoting=function(a,b,c){var d=b.options&&b.options.http&&b.options.http.path||a,e=b.isStatic,f=b.modelTo.modelName,g=this.relations[a];g&&g.modelTo&&(f=g.modelTo.modelName),c("__get__"+a,{isStatic:e,http:{verb:"get",path:"/"+d},accepts:{arg:"filter",type:"object"},description:"Queries "+a+" of "+this.modelName+".",accessType:"READ",returns:{arg:a,type:[f],root:!0}}),c("__create__"+a,{isStatic:e,http:{verb:"post",path:"/"+d},accepts:{arg:"data",type:f,http:{source:"body"}},description:"Creates a new instance in "+a+" of this model.",accessType:"WRITE",returns:{arg:"data",type:f,root:!0}}),c("__delete__"+a,{isStatic:e,http:{verb:"delete",path:"/"+d},description:"Deletes all "+a+" of this model.",accessType:"WRITE"}),c("__count__"+a,{isStatic:e,http:{verb:"get",path:"/"+d+"/count"},accepts:{arg:"where",type:"object",description:"Criteria to match model instances"},description:"Counts "+a+" of "+this.modelName+".",accessType:"READ",returns:{arg:"count",type:"number"}})},i.nestRemoting=function(a,b,c){"function"!=typeof b||c||(c=b,b={}),b=b||{};var d=/^__([^_]+)__([^_]+)$/,e=this.relations[a];if(!(e&&e.modelTo&&e.modelTo.sharedClass))throw new Error("Relation `"+a+"` does not exist for model `"+this.modelName+"`");{var f,g,i=this,j=this.sharedClass,k=e.modelTo.sharedClass,l=e.modelTo.modelName,m=b.pathName||e.options.path||a,n=b.paramName||"nk";[].concat(k.http||[])[0]}e.multiple?(f=m+"/:"+n,g=[{arg:n,type:"any",http:{source:"path"},description:"Foreign key for "+e.name,required:!0}]):(f=m,g=[]),"/"!==f[0]&&(f="/"+f);var o=c||b.filterMethod||function(a,b){var c=a.name.match(d);return c?"__"+c[1]+"__"+b.name+"__"+c[2]:void 0};k.methods().forEach(function(c){var d;if(!c.isStatic&&(d=o(c,e))){var i=e.multiple?"__findById__":"__get__",k=b.getterName||i+a,l=e.modelFrom.prototype[k];if("function"!=typeof l)throw new Error("Invalid remote method: `"+k+"`");var m=e.modelTo.prototype[c.name];if("function"!=typeof m)throw new Error("Invalid remote method: `"+c.name+"`");var n={};n.accepts=g.concat(c.accepts||[]),n.returns=[].concat(c.returns||[]),n.description=c.description,n.accessType=c.accessType,n.rest=h({},c.rest||{}),n.rest.delegateTo=c,n.http=[];var p=[].concat(c.http||[]);p.forEach(function(a){if(a.path){var b=h({},a);b.path=f+a.path,n.http.push(b)}}),e.multiple?j.defineMethod(d,n,function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d="function"==typeof c?c:null;this[k](a,function(a,c){if(a&&d)return d(a);if(c instanceof e.modelTo)try{m.apply(c,b)}catch(a){if(d)return d(a)}else d&&d(a,null)})},c.isStatic):j.defineMethod(d,n,function(){var a=Array.prototype.slice.call(arguments),b=a[a.length-1],c="function"==typeof b?b:null;this[k](function(b,d){if(b&&c)return c(b);if(d instanceof e.modelTo)try{m.apply(d,a)}catch(b){if(c)return c(b)}else c&&c(b,null)})},c.isStatic)}}),b.hooks!==!1&&i.once("mounted",function(a,b,c){var d=h({},c.listenerTree||{});d.before=d.before||{},d.after=d.after||{};var f=c.listenerTree.before[l]||{},g=c.listenerTree.after[l]||{};j.methods().forEach(function(a){var b=a.rest&&a.rest.delegateTo;if(b&&b.ctor==e.modelTo){var c=a.isStatic?f:f.prototype,d=a.isStatic?g:g.prototype,h=a.isStatic?a.name:"prototype."+a.name;c&&c[b.name]&&i.beforeRemote(h,function(a,d,e){c[b.name]._listeners.call(null,a,e)}),d&&d[b.name]&&i.afterRemote(h,function(a,c,e){d[b.name]._listeners.call(null,a,e)})}})})},i.ValidationError=a("loopback-datasource-juggler").ValidationError,i.setup()},{"./registry":33,assert:38,"loopback-datasource-juggler":221,"strong-remoting":253,util:207}],32:[function(a,b){function c(a,b){throw new Error("Cannot call "+a+"."+b+"(). The "+b+" method has not been setup. The PersistedModel has not been correctly attached to a DataSource!")}function d(a,b){if(null!==a.result)return b();var c=a.method.sharedClass.name,d=a.getArgByName("id"),e='Unknown "'+c+'" id "'+d+'".',f=new Error(e);f.statusCode=f.status=404,f.code="MODEL_NOT_FOUND",b(f)}function e(a,b,c,d,e){function f(b){function e(a,c){return a?b(a):(s("	using source changes"),c.forEach(function(a){s("		%j",a)}),void b(a,c))}a.changes(c.source,d.filter,s.enabled?e:b)}function g(a,d){function e(a,b){return a?d(a):(b.conflicts&&b.conflicts.length&&(s("	diff conflicts"),b.conflicts.forEach(function(a){s("		%j",a)})),b.deltas&&b.deltas.length&&(s("	diff deltas"),b.deltas.forEach(function(a){s("		%j",a)})),void d(a,b))}b.diff(c.target,a,s.enabled?e:d)}function h(b,c){o=b,o.conflicts=o.conflicts||[],o&&o.deltas&&o.deltas.length?(s("	building a list of updates"),a.createUpdates(o.deltas,c)):k()}function i(a,c){s("	starting bulk update"),r=a,b.bulkUpdate(r,function(a){var b=a&&a.details&&a.details.conflicts;return b&&409==a.statusCode?(o.conflicts=b,r=r.filter(function(a){return 0===b.filter(function(b){return b.modelId===a.change.modelId}).length}),c()):void c(a)})}function j(){var c=arguments[arguments.length-1];a.checkpoint(function(d,e){t=e.seq,b.checkpoint(function(d,e){u=e.seq,s("	created checkpoints"),s("		%s for source model %s",t,a.modelName),s("		%s for target model %s",u,b.modelName),c(d)})})}function k(c){if(c)return e(c);s("	replication finished"),s("		%s conflict(s) detected",o.conflicts.length),s("		%s change(s) applied",r?r.length:0),s("		new checkpoints: { source: %j, target: %j }",t,u);var d=o.conflicts.map(function(c){return new l.Conflict(c.modelId,a,b)});if(d.length&&a.emit("conflicts",d),e){var f={source:t,target:u};e(null,d,f,r)}}var l=a.getChangeModel(),m=b.getChangeModel(),n=l&&m;p(n,"You must enable change tracking before replicating");var o,r,t,u,v=[j,f,g,h,i];q.waterfall(v,k)}function f(a,b,c){var d=a.dataSource.idName(a.modelName),e=b.map(function(a){return a.change.modelId}),f={};f[d]={inq:e},a.find({where:f},function(a,b){if(a)return c(a);var e={};b.forEach(function(a){e[a[d]]=a}),c(null,e)})}function g(a,b,c,d,e,f,g){var h=a.getChangeModel(),i=c?h.revisionForInst(c):null;return i!==e.prev?(s("Detected non-rectified change of %s %j",a.modelName,b),s("	Expected revision: %s",e.rev),s("	Actual revision:   %s",i),f.push(e),h.rectifyModelChanges(a.modelName,[b],g)):void a.updateAll(c.toObject(),d,function(c,d){if(c)return g(c);var h=d&&d.count;switch(h){case 1:return g();case 0:return s("UpdateAll detected non-rectified change of %s %j",a.modelName,b),
f.push(e),g();case void 0:case null:return g(new Error("Cannot apply bulk updates, the connector does not correctly report the number of updated records."));default:return s("%s.updateAll modified unexpected number of instances: %j",a.modelName,h),g(new Error("Bulk update failed, the connector has modified unexpected number of records: "+JSON.stringify(h)))}})}function h(a,b,c,d,e,f,g){function h(){s("Detected non-rectified new instance of %s %j",a.modelName,b),f.push(e);var c=a.getChangeModel();return c.rectifyModelChanges(a.modelName,[b],g)}a.create(d,function(c){return c?void a.findById(b,function(a,b){return a||!b?g(c):h()}):g()})}function i(a,b,c,d,e,f){if(!c)return f();var g=a.getChangeModel(),h=g.revisionForInst(c);return h!==d.prev?(s("Detected non-rectified change of %s %j",a.modelName,b),s("	Expected revision: %s",d.rev),s("	Actual revision:   %s",h),e.push(d),g.rectifyModelChanges(a.modelName,[b],f)):void a.deleteAll(c.toObject(),function(c,g){if(c)return f(c);var h=g&&g.count;switch(h){case 1:return f();case 0:return s("DeleteAll detected non-rectified change of %s %j",a.modelName,b),e.push(d),f();case void 0:case null:return f(new Error("Cannot apply bulk updates, the connector does not correctly report the number of deleted records."));default:return s("%s.deleteAll modified unexpected number of instances: %j",a.modelName,h),f(new Error("Bulk update failed, the connector has deleted unexpected number of records: "+JSON.stringify(h)))}})}function j(a,b){function c(c){c&&console.error(a.Model.modelName+".rectifyChange(s) after save failed:"+c),b()}a.instance?a.Model.rectifyChange(a.instance.getId(),c):a.Model.rectifyAllChanges(c)}function k(a,b){function c(c){c&&console.error(a.Model.modelName+".rectifyChange(s) after delete failed:"+c),b()}var d=l(a.Model,a.where);d?a.Model.rectifyChange(d,c):a.Model.rectifyAllChanges(c)}function l(a,b){var c=Object.keys(b);if(1!=c.length)return void 0;var d=a.getIdName();if(c[0]!==d)return void 0;var e=b[d];return"string"==typeof e||"number"==typeof e?e:void 0}var m=a("./model"),n=a("./registry"),o=a("./runtime"),p=a("assert"),q=a("async"),r=a("depd")("loopback"),s=a("debug")("loopback:persisted-model"),t=b.exports=m.extend("PersistedModel");t.setup=function(){m.setup.call(this);var a=this;this.settings.trackChanges&&(a._defineChangeModel(),a.once("dataSourceAttached",function(){a.enableChangeTracking()})),a.setupRemoting()},t.create=function(){c(this.modelName,"create")},t.upsert=t.updateOrCreate=function(){c(this.modelName,"upsert")},t.findOrCreate=function(){c(this.modelName,"findOrCreate")},t.findOrCreate._delegate=!0,t.exists=function(){c(this.modelName,"exists")},t.findById=function(){c(this.modelName,"findById")},t.find=function(){c(this.modelName,"find")},t.findOne=function(){c(this.modelName,"findOne")},t.destroyAll=function(){c(this.modelName,"destroyAll")},t.remove=t.destroyAll,t.deleteAll=t.destroyAll,t.updateAll=function(){c(this.modelName,"updateAll")},t.update=t.updateAll,t.destroyById=function(){c(this.modelName,"deleteById")},t.removeById=t.destroyById,t.deleteById=t.destroyById,t.count=function(){c(this.modelName,"count")},t.prototype.save=function(a,b){function c(){e.trigger("save",function(a){e.trigger("update",function(c){d.upsert(e,function(d){e._initProperties(f),c.call(e,function(){a.call(e,function(){b(d,e)})})})},f)},f)}var d=this.constructor;"function"==typeof a&&(b=a,a={}),b=b||function(){},a=a||{},"validate"in a||(a.validate=!0),"throws"in a||(a["throws"]=!1);var e=this,f=e.toObject(!0),g=this.getId();return g?a.validate?void e.isValid(function(f){if(f)c();else{var g=new d.ValidationError(e);if(a["throws"])throw g;b(g,e)}}):c():d.create(this,b)},t.prototype.isNewRecord=function(){c(this.constructor.modelName,"isNewRecord")},t.prototype.destroy=function(){c(this.constructor.modelName,"destroy")},t.prototype.remove=t.prototype.destroy,t.prototype["delete"]=t.prototype.destroy,t.prototype.destroy._delegate=!0,t.prototype.updateAttribute=function(){c(this.constructor.modelName,"updateAttribute")},t.prototype.updateAttributes=function(){c(this.modelName,"updateAttributes")},t.prototype.reload=function(){c(this.constructor.modelName,"reload")},t.prototype.setId=function(a){this.getDataSource();this[this.getIdName()]=a},t.prototype.getId=function(){var a=this.toObject();if(a)return a[this.getIdName()]},t.prototype.getIdName=function(){return this.constructor.getIdName()},t.getIdName=function(){var a=this,b=a.getDataSource();return b.idName?b.idName(a.modelName):"id"},t.setupRemoting=function(){function a(a,c,d){var e=a[c];e._delegate=!0,d.isStatic=a===b,b.remoteMethod(c,d)}var b=this,c=b.modelName,e=b.settings;a(b,"create",{description:"Create a new instance of the model and persist it into the data source",accessType:"WRITE",accepts:{arg:"data",type:"object",description:"Model instance data",http:{source:"body"}},returns:{arg:"data",type:c,root:!0},http:{verb:"post",path:"/"}}),a(b,"upsert",{aliases:["updateOrCreate"],description:"Update an existing model instance or insert a new one into the data source",accessType:"WRITE",accepts:{arg:"data",type:"object",description:"Model instance data",http:{source:"body"}},returns:{arg:"data",type:c,root:!0},http:{verb:"put",path:"/"}}),a(b,"exists",{description:"Check whether a model instance exists in the data source",accessType:"READ",accepts:{arg:"id",type:"any",description:"Model id",required:!0},returns:{arg:"exists",type:"boolean"},http:[{verb:"get",path:"/:id/exists"},{verb:"head",path:"/:id"}],rest:{after:function(a,b){if("GET"===a.req.method)return b();if(a.result.exists)b();else{var c=a.method.sharedClass.name,d=a.getArgByName("id"),e='Unknown "'+c+'" id "'+d+'".',f=new Error(e);f.statusCode=f.status=404,f.code="MODEL_NOT_FOUND",b(f)}}}}),a(b,"findById",{description:"Find a model instance by id from the data source",accessType:"READ",accepts:{arg:"id",type:"any",description:"Model id",required:!0,http:{source:"path"}},returns:{arg:"data",type:c,root:!0},http:{verb:"get",path:"/:id"},rest:{after:d}}),a(b,"find",{description:"Find all instances of the model matched by filter from the data source",accessType:"READ",accepts:{arg:"filter",type:"object",description:"Filter defining fields, where, orderBy, offset, and limit"},returns:{arg:"data",type:[c],root:!0},http:{verb:"get",path:"/"}}),a(b,"findOne",{description:"Find first instance of the model matched by filter from the data source",accessType:"READ",accepts:{arg:"filter",type:"object",description:"Filter defining fields, where, orderBy, offset, and limit"},returns:{arg:"data",type:c,root:!0},http:{verb:"get",path:"/findOne"},rest:{after:d}}),a(b,"destroyAll",{description:"Delete all matching records",accessType:"WRITE",accepts:{arg:"where",type:"object",description:"filter.where object"},http:{verb:"del",path:"/"},shared:!1}),a(b,"updateAll",{aliases:["update"],description:"Update instances of the model matched by where from the data source",accessType:"WRITE",accepts:[{arg:"where",type:"object",http:{source:"query"},description:"Criteria to match model instances"},{arg:"data",type:"object",http:{source:"body"},description:"An object of model property name/value pairs"}],http:{verb:"post",path:"/update"}}),a(b,"deleteById",{aliases:["destroyById","removeById"],description:"Delete a model instance by id from the data source",accessType:"WRITE",accepts:{arg:"id",type:"any",description:"Model id",required:!0,http:{source:"path"}},http:{verb:"del",path:"/:id"}}),a(b,"count",{description:"Count instances of the model matched by where from the data source",accessType:"READ",accepts:{arg:"where",type:"object",description:"Criteria to match model instances"},returns:{arg:"count",type:"number"},http:{verb:"get",path:"/count"}}),a(b.prototype,"updateAttributes",{description:"Update attributes for a model instance and persist it into the data source",accessType:"WRITE",accepts:{arg:"data",type:"object",http:{source:"body"},description:"An object of model property name/value pairs"},returns:{arg:"data",type:c,root:!0},http:{verb:"put",path:"/"}}),e.trackChanges&&(a(b,"diff",{description:"Get a set of deltas and conflicts since the given checkpoint",accessType:"READ",accepts:[{arg:"since",type:"number",description:"Find deltas since this checkpoint"},{arg:"remoteChanges",type:"array",description:"an array of change objects",http:{source:"body"}}],returns:{arg:"result",type:"object",root:!0},http:{verb:"post",path:"/diff"}}),a(b,"changes",{description:"Get the changes to a model since a given checkpoint.Provide a filter object to reduce the number of results returned.",accessType:"READ",accepts:[{arg:"since",type:"number",description:"Only return changes since this checkpoint"},{arg:"filter",type:"object",description:"Only include changes that match this filter"}],returns:{arg:"changes",type:"array",root:!0},http:{verb:"get",path:"/changes"}}),a(b,"checkpoint",{description:"Create a checkpoint.",accessType:"WRITE",returns:{arg:"checkpoint",type:"object",root:!0},http:{verb:"post",path:"/checkpoint"}}),a(b,"currentCheckpoint",{description:"Get the current checkpoint.",accessType:"READ",returns:{arg:"checkpoint",type:"object",root:!0},http:{verb:"get",path:"/checkpoint"}}),a(b,"createUpdates",{description:"Create an update list from a delta list",accessType:"WRITE",accepts:{arg:"deltas",type:"array",http:{source:"body"}},returns:{arg:"updates",type:"array",root:!0},http:{verb:"post",path:"/create-updates"}}),a(b,"bulkUpdate",{description:"Run multiple updates at once. Note: this is not atomic.",accessType:"WRITE",accepts:{arg:"updates",type:"array"},http:{verb:"post",path:"/bulk-update"}}),a(b,"rectifyAllChanges",{description:"Rectify all Model changes.",accessType:"WRITE",http:{verb:"post",path:"/rectify-all"}}),a(b,"rectifyChange",{description:"Tell loopback that a change to the model with the given id has occurred.",accessType:"WRITE",accepts:{arg:"id",type:"any",http:{source:"path"}},http:{verb:"post",path:"/:id/rectify-change"}}))},t.diff=function(a,b,c){var d=this.getChangeModel();d.diff(this.modelName,a,b,c)},t.changes=function(a,b,c){"function"==typeof a&&(b={},c=a,a=-1),"function"==typeof b&&(c=b,a=-1,b={});var d=this.dataSource.idName(this.modelName),e=this.getChangeModel(),f=this;b=b||{},b.fields={},b.where=b.where||{},b.fields[d]=!0,e.find({where:{checkpoint:{gte:a},modelName:this.modelName}},function(a,g){if(a)return c(a);if(!Array.isArray(g)||0===g.length)return c(null,[]);var h=g.map(function(a){return a.getModelId()});b.where[d]={inq:h},f.find(b,function(a,b){if(a)return c(a);var f=b.map(function(a){return a[d].toString()});c(null,g.filter(function(a){return a.type()===e.DELETE?!0:f.indexOf(a.modelId)>-1}))})})},t.checkpoint=function(a){var b=this.getChangeModel().getCheckpointModel();this.getSourceId(function(c,d){return c?a(c):void b.create({sourceId:d},a)})},t.currentCheckpoint=function(a){var b=this.getChangeModel().getCheckpointModel();b.current(a)},t.replicate=function(a,b,c,d){function f(a,g){function j(b,c,e,g){var h=b||c.length||!g||0===g.length||a>=i;return h?d(b,c,e):void f(a+1,e)}s("	iteration #%s",a),e(h,b,g,c,j)}var g=arguments[arguments.length-1];"function"==typeof g&&arguments.length>1&&(d=g),"function"==typeof a&&a.modelName&&(b=a,a=-1),"object"!=typeof a&&(a={source:a,target:a}),c=c||{};var h=this;d=d||function(a){if(a)throw a},s("replicating %s since %s to %s since %s",h.modelName,a.source,b.modelName,a.target),c.filter&&s("	with filter %j",c.filter);var i=3;f(1,a)},t.createUpdates=function(a,b){var c=this.getChangeModel(),d=[],e=this,f=[];a.forEach(function(a){a=new c(a);var b=a.type(),g={type:b,change:a};switch(b){case c.CREATE:case c.UPDATE:f.push(function(b){e.findById(a.modelId,function(c,e){return c?b(c):e?(g.data=e.toObject?e.toObject():e,d.push(g),void b()):(console.error("missing data for change:",a),b&&b(new Error("missing data for change: "+a.modelId)))})});break;case c.DELETE:d.push(g)}}),q.parallel(f,function(a){return a?b(a):void b(null,d)})},t.bulkUpdate=function(a,b){var c=[],d=this,e=this.getChangeModel(),j=[];f(d,a,function(f,k){return f?b(f):(a.forEach(function(a){var b=a.change.modelId,f=k[b];switch(a.type){case e.UPDATE:c.push(function(c){g(d,b,f,a.data,a.change,j,c)});break;case e.CREATE:c.push(function(c){h(d,b,f,a.data,a.change,j,c)});break;case e.DELETE:c.push(function(c){i(d,b,f,a.change,j,c)})}}),void q.parallel(c,function(a){return a?b(a):j.length?(a=new Error("Conflict"),a.statusCode=409,a.details={conflicts:j},b(a)):void b()}))})},t.getChangeModel=function(){var a=this.Change,b=a&&a.dataSource;return p(b,"Cannot get a setup Change model"),a},t.getSourceId=function(a){var b=this.dataSource;b||this.once("dataSourceAttached",this.getSourceId.bind(this,a)),p(b.connector.name,"Model.getSourceId: cannot get id without dataSource.connector.name");var c=[b.connector.name,this.modelName].join("-");a(null,c)},t.enableChangeTracking=function(){function a(){b.rectifyAllChanges(function(a){a&&(console.error(b.modelName+" Change Cleanup Error:"),console.error(a))})}var b=this,c=this.Change||this._defineChangeModel(),d=b.settings.changeCleanupInterval||3e4;p(this.dataSource,"Cannot enableChangeTracking(): "+this.modelName+" is not attached to a dataSource");var e=this.getIdName(),f=this.definition.properties[e],g=f&&f.type,h=f&&f.defaultFn;(g!==String||"uuid"!==h&&"guid"!==h)&&r("The model "+this.modelName+" is tracking changes, which requries a string id with GUID/UUID default value."),c.attachTo(this.dataSource),c.getCheckpointModel().attachTo(this.dataSource),b.observe("after save",j),b.observe("after delete",k),o.isServer&&(a(),setInterval(a,d))},t._defineChangeModel=function(){var a=n.getModel("Change");return p(a,"Change model must be defined before enabling change replication"),this.Change=a.extend(this.modelName+"-change",{},{trackModel:this}),this.Change},t.rectifyAllChanges=function(a){this.getChangeModel().rectifyAll(a)},t.handleChangeError=function(a){a&&(console.error(m.modelName+" Change Tracking Error:"),console.error(a))},t.rectifyChange=function(a,b){var c=this.getChangeModel();c.rectifyModelChanges(this.modelName,[a],b)},t.setup()},{"./model":31,"./registry":33,"./runtime":34,assert:38,async:35,debug:211,depd:222}],33:[function(a,b){function c(a){var b=f({},a.options);for(var c in a)-1===["name","properties","options"].indexOf(c)&&void 0===b[c]&&(b[c]=a[c]);return b}function d(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].property===b.property&&a[c].accessType===b.accessType&&a[c].principalType===b.principalType&&a[c].principalId===b.principalId)return void(a[c]=b);a.push(b)}var e=a("assert"),f=a("util")._extend,g=a("loopback-datasource-juggler"),h=a("debug")("loopback:registry"),i=g.DataSource,j=g.ModelBuilder,k=b.exports;k.defaultDataSources={},k.modelBuilder=new j,k.createModel=function(a,b,d){if(1===arguments.length&&"object"==typeof a){var f=a;a=f.name,b=f.properties,d=c(f),e("string"==typeof a,"The model-config property `name` must be a string")}d=d||{};var g=d.base||d["super"];if("string"==typeof g){var h=g;g=this.getModel(g),void 0===g&&("DataModel"===h?(console.warn("Model `%s` is extending deprecated `DataModel. Use `PeristedModel` instead.",a),g=this.PersistedModel):console.warn("Model `%s` is extending an unknown model `%s`. Using `PersistedModel` as the base.",a,h))}g=g||this.PersistedModel;var i=g.extend(a,b,d);try{this.autoAttachModel(i)}catch(j){}return i},k.configureModel=function(a,b){var c=a.settings,g=a.modelName;if("object"==typeof b.relations&&null!==b.relations){var j=c.relations=c.relations||{};Object.keys(b.relations).forEach(function(a){j[a]=f(j[a]||{},b.relations[a])})}else null!=b.relations&&console.warn("The relations property of `%s` configuration must be an object",g);if(Array.isArray(b.acls)){var k=c.acls=c.acls||[];b.acls.forEach(function(a){d(k,a)})}else null!=b.acls&&console.warn("The acls property of `%s` configuration must be an array of objects",g);var l={base:!0,"super":!0,relations:!0,acls:!0,dataSource:!0};if("object"==typeof b.options&&null!==b.options)for(var m in b.options)m in l?console.warn("Property `%s` cannot be reconfigured for `%s`",m,g):c[m]=b.options[m];else null!=b.options&&console.warn("The options property of `%s` configuration must be an object",g);b.dataSource?(e(b.dataSource instanceof i,"Cannot configure "+a.modelName+": config.dataSource must be an instance of DataSource"),a.attachTo(b.dataSource),h("Attached model `%s` to dataSource `%s`",g,b.dataSource.name)):null===b.dataSource?h("Model `%s` is not attached to any DataSource by configuration.",g):(h("Model `%s` is not attached to any DataSource, possibly by a mistake.",g),console.warn("The configuration of `%s` is missing `dataSource` property.\nUse `null` or `false` to mark models not attached to any data source.",g))},k.findModel=function(a){return this.modelBuilder.models[a]},k.getModel=function(a){var b=this.findModel(a);if(b)return b;throw new Error("Model not found: "+a)},k.getModelByType=function(a){e("function"==typeof a,"The model type must be a constructor");var b=this.modelBuilder.models;for(var c in b)if(b[c].prototype instanceof a)return b[c];return a},k.createDataSource=function(a,b){var c=this,d=new i(a,b,c.modelBuilder);return d.createModel=function(a,b,e){e=e||{};var f=e.base||e["super"];if(!f){var g=d.getTypes();f=Array.isArray(g)&&-1!==g.indexOf("db")?c.PersistedModel:c.Model,e.base=f}var h=c.createModel(a,b,e);return h.attachTo(d),h},d.settings&&d.settings.defaultForType&&this.setDefaultDataSourceForType(d.settings.defaultForType,d),d},k.memory=function(a){a=a||"default";var b=(this._memoryDataSources||(this._memoryDataSources={}))[a];return b||(b=this._memoryDataSources[a]=this.createDataSource({connector:"memory"})),b},k.setDefaultDataSourceForType=function(a,b){var c=this.defaultDataSources;return b instanceof i||(b=this.createDataSource(b)),c[a]=b,b},k.getDefaultDataSourceForType=function(a){return this.defaultDataSources&&this.defaultDataSources[a]},k.autoAttach=function(){var a=this.modelBuilder.models;e.equal(typeof a,"object","Cannot autoAttach without a models object"),Object.keys(a).forEach(function(b){var c=a[b];!c||c.dataSource instanceof i||this.autoAttachModel(c)},this)},k.autoAttachModel=function(a){if(a.autoAttach){var b=this.getDefaultDataSourceForType(a.autoAttach);e(b instanceof i,'cannot autoAttach model "'+a.modelName+'". No dataSource found of type '+a.autoAttach),a.attachTo(b)}},k.DataSource=i,k.Model=a("./model"),k.PersistedModel=a("./persisted-model"),Object.defineProperty(k,"DataModel",{get:function(){var a=(new Error).stack.split("\n");return console.warn("loopback.DataModel is deprecated, use loopback.PersistedModel instead."),console.warn(a[2]),this.PersistedModel}}),k.modelBuilder.defaultModelBaseClass=k.Model},{"./model":31,"./persisted-model":32,assert:38,debug:211,"loopback-datasource-juggler":221,util:207}],34:[function(a,b,c){var d=c;d.isBrowser="undefined"!=typeof window,d.isServer=!d.isBrowser},{}],35:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)},i=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},j=function(a,b){if(a.map)return a.map(b);var c=[];return i(a,function(a,d,e){c.push(b(a,d,e))}),c},k=function(a,b,c){return a.reduce?a.reduce(b,c):(i(a,function(a,d,e){c=b(c,a,d,e)}),c)},l=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){function e(b){b?(d(b),d=function(){}):(f+=1,f>=a.length&&d())}if(d=d||function(){},!a.length)return d();var f=0;i(a,function(a){b(a,c(e))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=m(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var m=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},o=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[m(a)].concat(c))}},p=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},q=function(a,b,c,d){if(b=j(b,function(a,b){return{index:b,value:a}}),d){var e=[];a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};f.map=n(q),f.mapSeries=p(q),f.mapLimit=function(a,b,c,d){return r(b)(a,c,d)};var r=function(a){return o(a,q)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=j(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var s=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=n(s),f.filterSeries=p(s),f.select=f.filter,f.selectSeries=f.filterSeries;var t=function(a,b,c,d){var e=[];b=j(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(j(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=n(t),f.rejectSeries=p(t);var u=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=n(u),f.detectSeries=p(u),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,j(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=l(a),d=c.length;if(!d)return b();var e={},g=[],j=function(a){g.unshift(a)},m=function(a){for(var b=0;b<g.length;b+=1)if(g[b]===a)return void g.splice(b,1)},n=function(){d--,i(g.slice(0),function(a){a()})};j(function(){if(!d){var a=b;b=function(){},a(null,e)}}),i(c,function(c){var d=h(a[c])?a[c]:[a[c]],g=function(a){var d=Array.prototype.slice.call(arguments,1);if(d.length<=1&&(d=d[0]),a){var g={};i(l(e),function(a){g[a]=e[a]}),g[c]=d,b(a,g),b=function(){}}else e[c]=d,f.setImmediate(n)},o=d.slice(0,Math.abs(d.length-1))||[],p=function(){return k(o,function(a,b){return a&&e.hasOwnProperty(b)},!0)&&!e.hasOwnProperty(c)};if(p())d[d.length-1](g,e);else{var q=function(){p()&&(m(q),d[d.length-1](g,e))};j(q)}})},f.retry=function(a,b,c){var d=5,e=[];"function"==typeof a&&(c=b,b=a,a=d),a=parseInt(a,10)||d;var g=function(d,g){for(var h=function(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},g)}};a;)e.push(h(b,!(a-=1)));f.series(e,function(a,b){b=b[b.length-1],(d||c)(b.err,b.result)})};return c?g():g},f.waterfall=function(a,b){if(b=b||function(){},!h(a)){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var v=function(a,b,c){if(c=c||function(){},h(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(l(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){v({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){v({map:r(b),each:m(b)},a,c)},f.series=function(a,b){if(b=b||function(){},h(a))f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(l(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var w=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=n(w),f.concatSeries=p(w),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?f.doWhilst(a,b,c):c()})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){if(d)return c(d);var e=Array.prototype.slice.call(arguments,1);b.apply(null,e)?c():f.doUntil(a,b,c)})},f.queue=function(a,b){function d(a,b,c,d){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var e={data:b,callback:"function"==typeof d?d:null};c?a.tasks.unshift(e):a.tasks.push(e),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,g={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(g,a,!1,b)},kill:function(){g.drain=null,g.tasks=[]},unshift:function(a,b){d(g,a,!0,b)},process:function(){if(!g.paused&&e<g.concurrency&&g.tasks.length){var b=g.tasks.shift();g.empty&&0===g.tasks.length&&g.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),g.drain&&g.tasks.length+e===0&&g.drain(),g.process()},f=c(d);a(b.data,f)}},length:function(){return g.tasks.length},running:function(){return e},idle:function(){return g.tasks.length+e===0},pause:function(){g.paused!==!0&&(g.paused=!0,g.process())},resume:function(){g.paused!==!1&&(g.paused=!1,g.process())}};return g},f.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function d(a,b,c){for(var d=-1,e=a.length-1;e>d;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function e(a,b,e,g){return a.started||(a.started=!0),h(b)||(b=[b]),0==b.length?f.setImmediate(function(){a.drain&&a.drain()}):void i(b,function(b){var h={data:b,priority:e,callback:"function"==typeof g?g:null};a.tasks.splice(d(a.tasks,h,c)+1,0,h),a.saturated&&a.tasks.length===a.concurrency&&a.saturated(),f.setImmediate(a.process)})}var g=f.queue(a,b);return g.push=function(a,b,c){e(g,a,b,c)},delete g.unshift,g},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,drained:!0,push:function(a,c){h(a)||(a=[a]),i(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.drained=!1,e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function g(){if(!c){if(0===d.length)return e.drain&&!e.drained&&e.drain(),void(e.drained=!0);var f="number"==typeof b?d.splice(0,b):d.splice(0,d.length),h=j(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(h,function(){c=!1;var a=arguments;i(f,function(b){b.callback&&b.callback.apply(null,a)}),g()})}},length:function(){return d.length},running:function(){return c}};return e};var x=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&i(c,function(b){console[a](b)}))}]))}};f.log=x("log"),f.dir=x("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),g=e.pop(),h=b.apply(null,e);h in c?f.nextTick(function(){g.apply(null,c[h])}):h in d?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([function(){c[h]=arguments;var a=d[h];delete d[h];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},f.compose=function(){return f.seq.apply(null,Array.prototype.reverse.call(arguments))};var y=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=n(y),f.applyEachSeries=p(y),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof b&&b.exports?b.exports=f:"undefined"!=typeof define&&define.amd?define([],function(){return f}):d.async=f}()}).call(this,a("_process"))},{_process:187}],36:[function(a,b){(function(c){!function(d){"use strict";function e(c){if("undefined"!=typeof b&&b&&b.exports)try{return a("crypto").randomBytes(c)}catch(e){}try{var f;return(d.crypto||d.msCrypto).getRandomValues(f=new Uint32Array(c)),Array.prototype.slice.call(f)}catch(e){}if(!p)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return p(c)}function f(a){var b=[],c=0;return w.encodeUTF16toUTF8(function(){return c>=a.length?null:a.charCodeAt(c++)},function(a){b.push(a)}),b}function g(a,b){var c,d,e=0,f=[];if(0>=b||b>a.length)throw Error("Illegal len: "+b);for(;b>e;){if(c=255&a[e++],f.push(t[c>>2&63]),c=(3&c)<<4,e>=b){f.push(t[63&c]);break}if(d=255&a[e++],c|=d>>4&15,f.push(t[63&c]),c=(15&d)<<2,e>=b){f.push(t[63&c]);break}d=255&a[e++],c|=d>>6&3,f.push(t[63&c]),f.push(t[63&d])}return f.join("")}function h(a,b){var c,d,e,f,g,h,i=0,j=a.length,k=0,l=[];if(0>=b)throw Error("Illegal len: "+b);for(;j-1>i&&b>k&&(h=a.charCodeAt(i++),c=h<u.length?u[h]:-1,h=a.charCodeAt(i++),d=h<u.length?u[h]:-1,-1!=c&&-1!=d)&&(g=c<<2>>>0,g|=(48&d)>>4,l.push(v(g)),!(++k>=b||i>=j))&&(h=a.charCodeAt(i++),e=h<u.length?u[h]:-1,-1!=e)&&(g=(15&d)<<4>>>0,g|=(60&e)>>2,l.push(v(g)),!(++k>=b||i>=j));)h=a.charCodeAt(i++),f=h<u.length?u[h]:-1,g=(3&e)<<6>>>0,g|=f,l.push(v(g)),++k;var m=[];for(i=0;k>i;i++)m.push(l[i].charCodeAt(0));return m}function i(a,b,c,d){var e,f=a[b],g=a[b+1];f^=c[0];for(var h=0,i=z-2;i>=h;)e=d[f>>24&255],e+=d[256|f>>16&255],e^=d[512|f>>8&255],e+=d[768|255&f],g^=e^c[++h],e=d[g>>24&255],e+=d[256|g>>16&255],e^=d[512|g>>8&255],
e+=d[768|255&g],f^=e^c[++h];return a[b]=g^c[z+1],a[b+1]=f,a}function j(a,b){for(var c=0,d=0;4>c;++c)d=d<<8|255&a[b],b=(b+1)%a.length;return{key:d,offp:b}}function k(a,b,c){for(var d,e=0,f=[0,0],g=b.length,h=c.length,k=0;g>k;k++)d=j(a,e),e=d.offp,b[k]=b[k]^d.key;for(k=0;g>k;k+=2)f=i(f,0,b,c),b[k]=f[0],b[k+1]=f[1];for(k=0;h>k;k+=2)f=i(f,0,b,c),c[k]=f[0],c[k+1]=f[1]}function l(a,b,c,d){for(var e,f=0,g=[0,0],h=c.length,k=d.length,l=0;h>l;l++)e=j(b,f),f=e.offp,c[l]=c[l]^e.key;for(f=0,l=0;h>l;l+=2)e=j(a,f),f=e.offp,g[0]^=e.key,e=j(a,f),f=e.offp,g[1]^=e.key,g=i(g,0,c,d),c[l]=g[0],c[l+1]=g[1];for(l=0;k>l;l+=2)e=j(a,f),f=e.offp,g[0]^=e.key,e=j(a,f),f=e.offp,g[1]^=e.key,g=i(g,0,c,d),d[l]=g[0],d[l+1]=g[1]}function m(a,b,c,d,e){function f(){if(e&&e(p/c),!(c>p)){for(p=0;64>p;p++)for(m=0;j>>1>m;m++)i(h,m<<1,n,o);var g=[];for(p=0;j>p;p++)g.push((h[p]>>24&255)>>>0),g.push((h[p]>>16&255)>>>0),g.push((h[p]>>8&255)>>>0),g.push((255&h[p])>>>0);return d?void d(null,g):g}for(var l=Date.now();c>p&&(p+=1,k(a,n,o),k(b,n,o),!(Date.now()-l>A)););d&&s(f)}var g,h=D.slice(),j=h.length;if(4>c||c>31){if(g=Error("Illegal number of rounds (4-31): "+c),d)return void s(d.bind(this,g));throw g}if(b.length!==x){if(g=Error("Illegal salt length: "+b.length+" != "+x),d)return void s(d.bind(this,g));throw g}c=1<<c;var m,n=B.slice(),o=C.slice(),p=0;if(l(b,a,n,o),"undefined"!=typeof d)f();else for(var q;;)if("undefined"!=typeof(q=f()))return q||[]}function n(a,b,c,d){function e(a){var b=[];return b.push("$2"),j>="a"&&b.push(j),b.push("$"),10>o&&b.push("0"),b.push(o.toString()),b.push("$"),b.push(g(r,r.length)),b.push(g(a,4*D.length-1)),b.join("")}var i;if("string"!=typeof a||"string"!=typeof b){if(i=Error("Invalid string / salt: Not a string"),c)return void s(c.bind(this,i));throw i}var j,k;if("$"!==b.charAt(0)||"2"!==b.charAt(1)){if(i=Error("Invalid salt version: "+b.substring(0,2)),c)return void s(c.bind(this,i));throw i}if("$"===b.charAt(2))j=String.fromCharCode(0),k=3;else{if(j=b.charAt(2),"a"!==j&&"y"!==j||"$"!==b.charAt(3)){if(i=Error("Invalid salt revision: "+b.substring(2,4)),c)return void s(c.bind(this,i));throw i}k=4}if(b.charAt(k+2)>"$"){if(i=Error("Missing salt rounds"),c)return void s(c.bind(this,i));throw i}var l=10*parseInt(b.substring(k,k+1),10),n=parseInt(b.substring(k+1,k+2),10),o=l+n,p=b.substring(k+3,k+25);a+=j>="a"?"\x00":"";var q=f(a),r=h(p,x);return"undefined"==typeof c?e(m(q,r,o)):void m(q,r,o,function(a,b){a?c(a,null):c(null,e(b))},d)}var o={},p=null,q=!1;try{e(1),q=!0}catch(r){}p=null,o.setRandomFallback=function(a){p=a},o.genSaltSync=function(a,b){if("undefined"==typeof a)a=y;else if("number"!=typeof a)throw Error("Illegal arguments: "+typeof a+", "+typeof b);if(4>a||a>31)throw Error("Illegal number of rounds (4-31): "+a);var c=[];return c.push("$2a$"),10>a&&c.push("0"),c.push(a.toString()),c.push("$"),c.push(g(e(x),x)),c.join("")},o.genSalt=function(a,b,c){if("function"==typeof b&&(c=b,b=void 0),"function"==typeof a&&(c=a,a=y),"function"!=typeof c)throw Error("Illegal callback: "+typeof c);return"number"!=typeof a?void s(c.bind(this,Error("Illegal arguments: "+typeof a))):void s(function(){try{c(null,o.genSaltSync(a))}catch(b){c(b)}})},o.hashSync=function(a,b){if("undefined"==typeof b&&(b=y),"number"==typeof b&&(b=o.genSaltSync(b)),"string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);return n(a,b)},o.hash=function(a,b,c,d){if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);"string"==typeof a&&"number"==typeof b?o.genSalt(b,function(b,e){n(a,e,c,d)}):"string"==typeof a&&"string"==typeof b?n(a,b,c,d):s(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b)))},o.compareSync=function(a,b){if("string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);if(60!==b.length)return!1;for(var c=o.hashSync(a,b.substr(0,b.length-31)),d=c.length===b.length,e=c.length<b.length?c.length:b.length,f=0;e>f;++f)c.length>=f&&b.length>=f&&c[f]!=b[f]&&(d=!1);return d},o.compare=function(a,b,c,d){if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);return"string"!=typeof a||"string"!=typeof b?void s(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b))):void o.hash(a,b.substr(0,29),function(a,d){c(a,b===d)},d)},o.getRounds=function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);return parseInt(a.split("$")[2],10)},o.getSalt=function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);if(60!==a.length)throw Error("Illegal hash length: "+a.length+" != 60");return a.substring(0,29)};var s="undefined"!=typeof c&&c&&"function"==typeof c.nextTick?"function"==typeof setImmediate?setImmediate:c.nextTick:setTimeout,t="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],v=String.fromCharCode,w=function(){var a={};return a.MAX_CODEPOINT=1114111,a.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)128>c?b(127&c):2048>c?(b(c>>6&31|192),b(63&c|128)):65536>c?(b(c>>12&15|224),b(c>>6&63|128),b(63&c|128)):(b(c>>18&7|240),b(c>>12&63|128),b(c>>6&63|128),b(63&c|128)),c=null},a.decodeUTF8=function(a,b){for(var c,d,e,f,g=function(a){a=a.slice(0,a.indexOf(null));var b=Error(a.toString());throw b.name="TruncatedError",b.bytes=a,b};null!==(c=a());)if(0===(128&c))b(c);else if(192===(224&c))null===(d=a())&&g([c,d]),b((31&c)<<6|63&d);else if(224===(240&c))(null===(d=a())||null===(e=a()))&&g([c,d,e]),b((15&c)<<12|(63&d)<<6|63&e);else{if(240!==(248&c))throw RangeError("Illegal starting byte: "+c);(null===(d=a())||null===(e=a())||null===(f=a()))&&g([c,d,e,f]),b((7&c)<<18|(63&d)<<12|(63&e)<<6|63&f)}},a.UTF16toUTF8=function(a,b){for(var c,d=null;;){if(null===(c=null!==d?d:a()))break;c>=55296&&57343>=c&&null!==(d=a())&&d>=56320&&57343>=d?(b(1024*(c-55296)+d-56320+65536),d=null):b(c)}null!==d&&b(d)},a.UTF8toUTF16=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)65535>=c?b(c):(c-=65536,b((c>>10)+55296),b(c%1024+56320)),c=null},a.encodeUTF16toUTF8=function(b,c){a.UTF16toUTF8(b,function(b){a.encodeUTF8(b,c)})},a.decodeUTF8toUTF16=function(b,c){a.decodeUTF8(b,function(b){a.UTF8toUTF16(b,c)})},a.calculateCodePoint=function(a){return 128>a?1:2048>a?2:65536>a?3:4},a.calculateUTF8=function(b){for(var c,d=0;null!==(c=b());)d+=a.calculateCodePoint(c);return d},a.calculateUTF16asUTF8=function(b){var c=0,d=0;return a.UTF16toUTF8(b,function(b){++c,d+=a.calculateCodePoint(b)}),[c,d]},a}();Date.now=Date.now||function(){return+new Date};var x=16,y=10,z=16,A=100,B=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],C=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],D=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];"undefined"!=typeof b&&b.exports?b.exports=o:"undefined"!=typeof define&&define.amd?define(function(){return o}):(d.dcodeIO=d.dcodeIO||{}).bcrypt=o}(this)}).call(this,a("_process"))},{_process:187,crypto:44}],37:[function(){},{}],38:[function(a,b){function c(a,b){return m.isUndefined(b)?""+b:m.isNumber(b)&&!isFinite(b)?b.toString():m.isFunction(b)||m.isRegExp(b)?b.toString():b}function d(a,b){return m.isString(a)?a.length<b?a:a.slice(0,b):a}function e(a){return d(JSON.stringify(a.actual,c),128)+" "+a.operator+" "+d(JSON.stringify(a.expected,c),128)}function f(a,b,c,d,e){throw new p.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function g(a,b){a||f(a,!0,b,"==",p.ok)}function h(a,b){if(a===b)return!0;if(m.isBuffer(a)&&m.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return m.isDate(a)&&m.isDate(b)?a.getTime()===b.getTime():m.isRegExp(a)&&m.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:m.isObject(a)||m.isObject(b)?j(a,b):a==b}function i(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function j(a,b){if(m.isNullOrUndefined(a)||m.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(m.isPrimitive(a)||m.isPrimitive(b))return a===b;var c=i(a),d=i(b);if(c&&!d||!c&&d)return!1;if(c)return a=n.call(a),b=n.call(b),h(a,b);var e,f,g=q(a),j=q(b);if(g.length!=j.length)return!1;for(g.sort(),j.sort(),f=g.length-1;f>=0;f--)if(g[f]!=j[f])return!1;for(f=g.length-1;f>=0;f--)if(e=g[f],!h(a[e],b[e]))return!1;return!0}function k(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function l(a,b,c,d){var e;m.isString(c)&&(d=c,c=null);try{b()}catch(g){e=g}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&f(e,c,"Missing expected exception"+d),!a&&k(e,c)&&f(e,c,"Got unwanted exception"+d),a&&e&&c&&!k(e,c)||!a&&e)throw e}var m=a("util/"),n=Array.prototype.slice,o=Object.prototype.hasOwnProperty,p=b.exports=g;p.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=e(this),this.generatedMessage=!0);var b=a.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,g=b.name,h=d.indexOf("\n"+g);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},m.inherits(p.AssertionError,Error),p.fail=f,p.ok=g,p.equal=function(a,b,c){a!=b&&f(a,b,c,"==",p.equal)},p.notEqual=function(a,b,c){a==b&&f(a,b,c,"!=",p.notEqual)},p.deepEqual=function(a,b,c){h(a,b)||f(a,b,c,"deepEqual",p.deepEqual)},p.notDeepEqual=function(a,b,c){h(a,b)&&f(a,b,c,"notDeepEqual",p.notDeepEqual)},p.strictEqual=function(a,b,c){a!==b&&f(a,b,c,"===",p.strictEqual)},p.notStrictEqual=function(a,b,c){a===b&&f(a,b,c,"!==",p.notStrictEqual)},p["throws"]=function(){l.apply(this,[!0].concat(n.call(arguments)))},p.doesNotThrow=function(){l.apply(this,[!1].concat(n.call(arguments)))},p.ifError=function(a){if(a)throw a};var q=Object.keys||function(a){var b=[];for(var c in a)o.call(a,c)&&b.push(c);return b}},{"util/":207}],39:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37}],40:[function(a,b,c){function d(a,b){var c=this;if(!(c instanceof d))return new d(a,b);var e,f=typeof a;if("number"===f)e=+a;else if("string"===f)e=d.byteLength(a,b);else{if("object"!==f||null===a)throw new TypeError("must start with number, buffer, array or string");"Buffer"===a.type&&K(a.data)&&(a=a.data),e=+a.length}if(e>L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");0>e?e=0:e>>>=0,d.TYPED_ARRAY_SUPPORT?c=d._augment(new Uint8Array(e)):(c.length=e,c._isBuffer=!0);var g;if(d.TYPED_ARRAY_SUPPORT&&"number"==typeof a.byteLength)c._set(a);else if(A(a))if(d.isBuffer(a))for(g=0;e>g;g++)c[g]=a.readUInt8(g);else for(g=0;e>g;g++)c[g]=(a[g]%256+256)%256;else if("string"===f)c.write(a,0,b);else if("number"===f&&!d.TYPED_ARRAY_SUPPORT)for(g=0;e>g;g++)c[g]=0;return e>0&&e<=d.poolSize&&(c.parent=M),c}function e(a,b){if(!(this instanceof e))return new e(a,b);var c=new d(a,b);return delete c.parent,c}function f(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function g(a,b,c,d){var e=G(C(b,a.length-c),a,c,d);return e}function h(a,b,c,d){var e=G(D(b),a,c,d);return e}function i(a,b,c,d){return h(a,b,c,d)}function j(a,b,c,d){var e=G(F(b),a,c,d);return e}function k(a,b,c,d){var e=G(E(b,a.length-c),a,c,d);return e}function l(a,b,c){return I.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function m(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=H(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+H(e)}function n(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function o(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function p(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=B(a[f]);return e}function q(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function r(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function s(a,b,c,e,f,g){if(!d.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+e>a.length)throw new RangeError("index out of range")}function t(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function u(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function v(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function w(a,b,c,d,e){return e||v(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(a,b,c,d,23,4),c+4}function x(a,b,c,d,e){return e||v(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(a,b,c,d,52,8),c+8}function y(a){if(a=z(a).replace(O,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function z(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function A(a){return K(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function B(a){return 16>a?"0"+a.toString(16):a.toString(16)}function C(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function D(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function E(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function F(a){return I.toByteArray(y(a))}function G(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function H(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var I=a("base64-js"),J=a("ieee754"),K=a("is-array");c.Buffer=d,c.SlowBuffer=e,c.INSPECT_MAX_BYTES=50,d.poolSize=8192;var L=1073741823,M={};d.TYPED_ARRAY_SUPPORT=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(c){return!1}}(),d.isBuffer=function(a){return!(null==a||!a._isBuffer)},d.compare=function(a,b){if(!d.isBuffer(a)||!d.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(a,b){if(!K(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"ascii":case"binary":case"raw":c=a.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;case"hex":c=a.length>>>1;break;case"utf8":case"utf-8":c=C(a).length;break;case"base64":c=F(a).length;break;default:c=a.length}return c},d.prototype.length=void 0,d.prototype.parent=void 0,d.prototype.toString=function(a,b,c){var d=!1;if(b>>>=0,c=void 0===c||c===1/0?this.length:c>>>0,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return p(this,b,c);case"utf8":case"utf-8":return m(this,b,c);case"ascii":return n(this,b,c);case"binary":return o(this,b,c);case"base64":return l(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}},d.prototype.equals=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===d.compare(this,a)},d.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},d.prototype.compare=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:d.compare(this,a)},d.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(d.isBuffer(a))return c(this,a,b);if("number"==typeof a)return d.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}if(b=Number(b)||0,0>c||0>b||b>this.length)throw new RangeError("attempt to write outside buffer bounds");var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=f(this,a,b,c);break;case"utf8":case"utf-8":m=g(this,a,b,c);break;case"ascii":m=h(this,a,b,c);break;case"binary":m=i(this,a,b,c);break;case"base64":m=j(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=k(this,a,b,c);break;default:throw new TypeError("Unknown encoding: "+d)}return m},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var e;if(d.TYPED_ARRAY_SUPPORT)e=d._augment(this.subarray(a,b));else{var f=b-a;e=new d(f,void 0);for(var g=0;f>g;g++)e[g]=this[g+a]}return e.length&&(e.parent=this.parent||this),e},d.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},d.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},d.prototype.readUInt8=function(a,b){return b||r(a,1,this.length),this[a]},d.prototype.readUInt16LE=function(a,b){return b||r(a,2,this.length),this[a]|this[a+1]<<8},d.prototype.readUInt16BE=function(a,b){return b||r(a,2,this.length),this[a]<<8|this[a+1]},d.prototype.readUInt32LE=function(a,b){return b||r(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},d.prototype.readUInt32BE=function(a,b){return b||r(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},d.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},d.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||r(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},d.prototype.readInt8=function(a,b){
return b||r(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},d.prototype.readInt16LE=function(a,b){b||r(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt16BE=function(a,b){b||r(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt32LE=function(a,b){return b||r(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},d.prototype.readInt32BE=function(a,b){return b||r(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},d.prototype.readFloatLE=function(a,b){return b||r(a,4,this.length),J.read(this,a,!0,23,4)},d.prototype.readFloatBE=function(a,b){return b||r(a,4,this.length),J.read(this,a,!1,23,4)},d.prototype.readDoubleLE=function(a,b){return b||r(a,8,this.length),J.read(this,a,!0,52,8)},d.prototype.readDoubleBE=function(a,b){return b||r(a,8,this.length),J.read(this,a,!1,52,8)},d.prototype.writeUIntLE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||s(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e>>>0&255;return b+c},d.prototype.writeUIntBE=function(a,b,c,d){a=+a,b>>>=0,c>>>=0,d||s(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f>>>0&255;return b+c},d.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,1,255,0),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},d.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):t(this,a,b,!0),b+2},d.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):t(this,a,b,!1),b+2},d.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):u(this,a,b,!0),b+4},d.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):u(this,a,b,!1),b+4},d.prototype.writeIntLE=function(a,b,c,d){a=+a,b>>>=0,d||s(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=0,f=1,g=0>a?1:0;for(this[b]=255&a;++e<c&&(f*=256);)this[b+e]=(a/f>>0)-g&255;return b+c},d.prototype.writeIntBE=function(a,b,c,d){a=+a,b>>>=0,d||s(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));var e=c-1,f=1,g=0>a?1:0;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=(a/f>>0)-g&255;return b+c},d.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,1,127,-128),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},d.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):t(this,a,b,!0),b+2},d.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):t(this,a,b,!1),b+2},d.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):u(this,a,b,!0),b+4},d.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||s(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):u(this,a,b,!1),b+4},d.prototype.writeFloatLE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return x(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return x(this,a,b,!1,c)},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b>=a.length&&(b=a.length),b||(b=0),e>0&&c>e&&(e=c),e===c)return 0;if(0===a.length||0===f.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=f.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(1e3>g||!d.TYPED_ARRAY_SUPPORT)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b);return g},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=C(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d.TYPED_ARRAY_SUPPORT)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var N=d.prototype;d._augment=function(a){return a.constructor=d,a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=N.get,a.set=N.set,a.write=N.write,a.toString=N.toString,a.toLocaleString=N.toString,a.toJSON=N.toJSON,a.equals=N.equals,a.compare=N.compare,a.indexOf=N.indexOf,a.copy=N.copy,a.slice=N.slice,a.readUIntLE=N.readUIntLE,a.readUIntBE=N.readUIntBE,a.readUInt8=N.readUInt8,a.readUInt16LE=N.readUInt16LE,a.readUInt16BE=N.readUInt16BE,a.readUInt32LE=N.readUInt32LE,a.readUInt32BE=N.readUInt32BE,a.readIntLE=N.readIntLE,a.readIntBE=N.readIntBE,a.readInt8=N.readInt8,a.readInt16LE=N.readInt16LE,a.readInt16BE=N.readInt16BE,a.readInt32LE=N.readInt32LE,a.readInt32BE=N.readInt32BE,a.readFloatLE=N.readFloatLE,a.readFloatBE=N.readFloatBE,a.readDoubleLE=N.readDoubleLE,a.readDoubleBE=N.readDoubleBE,a.writeUInt8=N.writeUInt8,a.writeUIntLE=N.writeUIntLE,a.writeUIntBE=N.writeUIntBE,a.writeUInt16LE=N.writeUInt16LE,a.writeUInt16BE=N.writeUInt16BE,a.writeUInt32LE=N.writeUInt32LE,a.writeUInt32BE=N.writeUInt32BE,a.writeIntLE=N.writeIntLE,a.writeIntBE=N.writeIntBE,a.writeInt8=N.writeInt8,a.writeInt16LE=N.writeInt16LE,a.writeInt16BE=N.writeInt16BE,a.writeInt32LE=N.writeInt32LE,a.writeInt32BE=N.writeInt32BE,a.writeFloatLE=N.writeFloatLE,a.writeFloatBE=N.writeFloatBE,a.writeDoubleLE=N.writeDoubleLE,a.writeDoubleBE=N.writeDoubleBE,a.fill=N.fill,a.inspect=N.inspect,a.toArrayBuffer=N.toArrayBuffer,a};var O=/[^+\/0-9A-z\-]/g},{"base64-js":41,ieee754:42,"is-array":43}],41:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],42:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],43:[function(a,b){var c=Array.isArray,d=Object.prototype.toString;b.exports=c||function(a){return!!a&&"[object Array]"==d.call(a)}},{}],44:[function(a,b,c){"use strict";c.randomBytes=c.rng=c.pseudoRandomBytes=c.prng=a("randombytes"),c.createHash=c.Hash=a("create-hash"),c.createHmac=c.Hmac=a("create-hmac");var d=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(a("browserify-sign/algos")));c.getHashes=function(){return d};var e=a("pbkdf2-compat");c.pbkdf2=e.pbkdf2,c.pbkdf2Sync=e.pbkdf2Sync;var f=a("browserify-aes");["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(a){c[a]=f[a]});var g=a("diffie-hellman");["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(a){c[a]=g[a]}),a("browserify-sign/inject")(b.exports,c),c.createECDH=a("create-ecdh");var h=a("public-encrypt");["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(a){c[a]=h[a]}),["createCredentials"].forEach(function(a){c[a]=function(){throw new Error(["sorry, "+a+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},{"browserify-aes":48,"browserify-sign/algos":63,"browserify-sign/inject":64,"create-ecdh":110,"create-hash":132,"create-hmac":143,"diffie-hellman":144,"pbkdf2-compat":151,"public-encrypt":152,randombytes:178}],45:[function(a,b){(function(c){function d(a,b,d){c.isBuffer(a)||(a=new c(a,"binary")),b/=8,d=d||0;for(var f,g,h=0,i=0,j=new c(b),k=new c(d),l=0,m=[];;){if(l++>0&&m.push(f),m.push(a),f=e(c.concat(m)),m=[],g=0,b>0)for(;;){if(0===b)break;if(g===f.length)break;j[h++]=f[g],b--,g++}if(d>0&&g!==f.length)for(;;){if(0===d)break;if(g===f.length)break;k[i++]=f[g],d--,g++}if(0===b&&0===d)break}for(g=0;g<f.length;g++)f[g]=0;return{key:j,iv:k}}var e=a("create-hash/md5");b.exports=d}).call(this,a("buffer").Buffer)},{buffer:40,"create-hash/md5":134}],46:[function(a,b,c){(function(a){function b(a){var b,c;return b=a>h||0>a?(c=Math.abs(a)%h,0>a?h-c:c):a}function d(a){var b,c,d;for(b=c=0,d=a.length;d>=0?d>c:c>d;b=d>=0?++c:--c)a[b]=0;return!1}function e(){var a;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.INV_SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function f(a){for(var b=a.length/4,c=new Array(b),d=-1;++d<b;)c[d]=a.readUInt32BE(4*d);return c}function g(a){this._key=f(a),this._doReset()}var h=Math.pow(2,32);e.prototype.init=function(){var a,b,c,d,e,f,g,h,i,j;for(a=function(){var a,c;for(c=[],b=a=0;256>a;b=++a)c.push(128>b?b<<1:b<<1^283);return c}(),e=0,i=0,b=j=0;256>j;b=++j)c=i^i<<1^i<<2^i<<3^i<<4,c=c>>>8^255&c^99,this.SBOX[e]=c,this.INV_SBOX[c]=e,f=a[e],g=a[f],h=a[g],d=257*a[c]^16843008*c,this.SUB_MIX[0][e]=d<<24|d>>>8,this.SUB_MIX[1][e]=d<<16|d>>>16,this.SUB_MIX[2][e]=d<<8|d>>>24,this.SUB_MIX[3][e]=d,d=16843009*h^65537*g^257*f^16843008*e,this.INV_SUB_MIX[0][c]=d<<24|d>>>8,this.INV_SUB_MIX[1][c]=d<<16|d>>>16,this.INV_SUB_MIX[2][c]=d<<8|d>>>24,this.INV_SUB_MIX[3][c]=d,0===e?e=i=1:(e=f^a[a[a[h^f]]],i^=a[a[i]]);return!0};var i=new e;g.blockSize=16,g.prototype.blockSize=g.blockSize,g.keySize=32,g.prototype.keySize=g.keySize,g.prototype._doReset=function(){var a,b,c,d,e,f,g,h;for(c=this._key,b=c.length,this._nRounds=b+6,e=4*(this._nRounds+1),this._keySchedule=[],d=g=0;e>=0?e>g:g>e;d=e>=0?++g:--g)this._keySchedule[d]=b>d?c[d]:(f=this._keySchedule[d-1],d%b===0?(f=f<<8|f>>>24,f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f],f^=i.RCON[d/b|0]<<24):b>6&&d%b===4?f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f]:void 0,this._keySchedule[d-b]^f);for(this._invKeySchedule=[],a=h=0;e>=0?e>h:h>e;a=e>=0?++h:--h)d=e-a,f=this._keySchedule[d-(a%4?0:4)],this._invKeySchedule[a]=4>a||4>=d?f:i.INV_SUB_MIX[0][i.SBOX[f>>>24]]^i.INV_SUB_MIX[1][i.SBOX[f>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[f>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&f]];return!0},g.prototype.encryptBlock=function(b){b=f(new a(b));var c=this._doCryptBlock(b,this._keySchedule,i.SUB_MIX,i.SBOX),d=new a(16);return d.writeUInt32BE(c[0],0),d.writeUInt32BE(c[1],4),d.writeUInt32BE(c[2],8),d.writeUInt32BE(c[3],12),d},g.prototype.decryptBlock=function(b){b=f(new a(b));var c=[b[3],b[1]];b[1]=c[0],b[3]=c[1];var d=this._doCryptBlock(b,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX),e=new a(16);return e.writeUInt32BE(d[0],0),e.writeUInt32BE(d[3],4),e.writeUInt32BE(d[2],8),e.writeUInt32BE(d[1],12),e},g.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},g.prototype._doCryptBlock=function(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q;for(h=a[0]^c[0],i=a[1]^c[1],j=a[2]^c[2],k=a[3]^c[3],f=4,g=p=1,q=this._nRounds;q>=1?q>p:p>q;g=q>=1?++p:--p)l=d[0][h>>>24]^d[1][i>>>16&255]^d[2][j>>>8&255]^d[3][255&k]^c[f++],m=d[0][i>>>24]^d[1][j>>>16&255]^d[2][k>>>8&255]^d[3][255&h]^c[f++],n=d[0][j>>>24]^d[1][k>>>16&255]^d[2][h>>>8&255]^d[3][255&i]^c[f++],o=d[0][k>>>24]^d[1][h>>>16&255]^d[2][i>>>8&255]^d[3][255&j]^c[f++],h=l,i=m,j=n,k=o;return l=(e[h>>>24]<<24|e[i>>>16&255]<<16|e[j>>>8&255]<<8|e[255&k])^c[f++],m=(e[i>>>24]<<24|e[j>>>16&255]<<16|e[k>>>8&255]<<8|e[255&h])^c[f++],n=(e[j>>>24]<<24|e[k>>>16&255]<<16|e[h>>>8&255]<<8|e[255&i])^c[f++],o=(e[k>>>24]<<24|e[h>>>16&255]<<16|e[i>>>8&255]<<8|e[255&j])^c[f++],[b(l),b(m),b(n),b(o)]},c.AES=g}).call(this,a("buffer").Buffer)},{buffer:40}],47:[function(a,b){(function(c){function d(a,b,e,h){if(!(this instanceof d))return new d(a,b,e);g.call(this),this._finID=c.concat([e,new c([0,0,0,1])]),e=c.concat([e,new c([0,0,0,2])]),this._cipher=new f.AES(b),this._prev=new c(e.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,this._alen=0,this._len=0,e.copy(this._prev),this._mode=a;var j=new c(4);j.fill(0),this._ghash=new i(this._cipher.encryptBlock(j)),this._authTag=null,this._called=!1}function e(a,b){var c=0;a.length!==b.length&&c++;for(var d=Math.min(a.length,b.length),e=-1;++e<d;)c+=a[e]^b[e];return c}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./ghash"),j=a("./xor");h(d,g),b.exports=d,d.prototype._update=function(a){if(!this._called&&this._alen){var b=16-this._alen%16;16>b&&(b=new c(b),b.fill(0),this._ghash.update(b))}this._called=!0;var d=this._mode.encrypt(this,a);return this._ghash.update(this._decrypt?a:d),this._len+=a.length,d},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var a=j(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(e(a,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=a;this._cipher.scrub()},d.prototype.getAuthTag=function(){if(!this._decrypt&&c.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},d.prototype.setAuthTag=function(a){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=a},d.prototype.setAAD=function(a){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(a),this._alen+=a.length}}).call(this,a("buffer").Buffer)},{"./aes":46,"./cipherBase":49,"./ghash":52,"./xor":62,buffer:40,inherits:184}],48:[function(a,b,c){function d(){return Object.keys(g)}var e=a("./encrypter");c.createCipher=c.Cipher=e.createCipher,c.createCipheriv=c.Cipheriv=e.createCipheriv;var f=a("./decrypter");c.createDecipher=c.Decipher=f.createDecipher,c.createDecipheriv=c.Decipheriv=f.createDecipheriv;var g=a("./modes");c.listCiphers=c.getCiphers=d},{"./decrypter":50,"./encrypter":51,"./modes":53}],49:[function(a,b){(function(c){function d(){e.call(this)}var e=a("stream").Transform,f=a("inherits");b.exports=d,f(d,e),d.prototype.update=function(a,b,d){"string"==typeof a&&(a=new c(a,b));var e=this._update(a);return d&&(e=e.toString(d)),e},d.prototype._transform=function(a,b,c){this.push(this._update(a)),c()},d.prototype._flush=function(a){try{this.push(this._final())}catch(b){return a(b)}a()},d.prototype["final"]=function(a){var b=this._final()||new c("");return a&&(b=b.toString(a)),b}}).call(this,a("buffer").Buffer)},{buffer:40,inherits:184,stream:203}],50:[function(a,b,c){(function(b){function d(a,c,f){return this instanceof d?(j.call(this),this._cache=new e,this._last=void 0,this._cipher=new i.AES(c),this._prev=new b(f.length),f.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,c,f)}function e(){return this instanceof e?void(this.cache=new b("")):new e}function f(a){for(var b=a[15],c=-1;++c<b;)if(a[c+(16-b)]!==b)throw new Error("unable to decrypt data");return 16!==b?a.slice(0,16-b):void 0}function g(a,c,e){var f=l[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new b(e)),"string"==typeof c&&(c=new b(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new m(p[f.mode],c,e,!0):"auth"===f.type?new n(p[f.mode],c,e,!0):new d(p[f.mode],c,e)}function h(a,b){var c=l[a.toLowerCase()];if(!c)throw new TypeError("invalid suite type");var d=o(b,c.key,c.iv);return g(a,d.key,d.iv)}var i=a("./aes"),j=a("./cipherBase"),k=a("inherits"),l=a("./modes"),m=a("./streamCipher"),n=a("./authCipher"),o=a("./EVP_BytesToKey");k(d,j),d.prototype._update=function(a){this._cache.add(a);for(var c,d,e=[];c=this._cache.get(this._autopadding);)d=this._mode.decrypt(this,c),e.push(d);return b.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,a));if(a)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=b.concat([this.cache,a])},e.prototype.get=function(a){var b;if(a){if(this.cache.length>16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b}else if(this.cache.length>=16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b;return null},e.prototype.flush=function(){return this.cache.length?this.cache:void 0};var p={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};c.createDecipher=h,c.createDecipheriv=g}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":45,"./aes":46,"./authCipher":47,"./cipherBase":49,"./modes":53,"./modes/cbc":54,"./modes/cfb":55,"./modes/cfb1":56,"./modes/cfb8":57,"./modes/ctr":58,"./modes/ecb":59,"./modes/ofb":60,"./streamCipher":61,buffer:40,inherits:184}],51:[function(a,b,c){(function(b){function d(a,c,f){return this instanceof d?(i.call(this),this._cache=new e,this._cipher=new h.AES(c),this._prev=new b(f.length),f.copy(this._prev),this._mode=a,void(this._autopadding=!0)):new d(a,c,f)}function e(){return this instanceof e?void(this.cache=new b("")):new e}function f(a,c,e){var f=k[a.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new b(e)),"string"==typeof c&&(c=new b(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new m(o[f.mode],c,e):"auth"===f.type?new n(o[f.mode],c,e):new d(o[f.mode],c,e)}function g(a,b){var c=k[a.toLowerCase()];if(!c)throw new TypeError("invalid suite type");var d=l(b,c.key,c.iv);return f(a,d.key,d.iv)}var h=a("./aes"),i=a("./cipherBase"),j=a("inherits"),k=a("./modes"),l=a("./EVP_BytesToKey"),m=a("./streamCipher"),n=a("./authCipher");j(d,i),d.prototype._update=function(a){this._cache.add(a);for(var c,d,e=[];c=this._cache.get();)d=this._mode.encrypt(this,c),e.push(d);return b.concat(e)},d.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return a=this._mode.encrypt(this,a),this._cipher.scrub(),a;if("10101010101010101010101010101010"!==a.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(a){this._autopadding=!!a},e.prototype.add=function(a){this.cache=b.concat([this.cache,a])},e.prototype.get=function(){if(this.cache.length>15){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null},e.prototype.flush=function(){for(var a=16-this.cache.length,c=new b(a),d=-1;++d<a;)c.writeUInt8(a,d);var e=b.concat([this.cache,c]);return e};var o={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};c.createCipheriv=f,c.createCipher=g}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":45,"./aes":46,"./authCipher":47,"./cipherBase":49,"./modes":53,"./modes/cbc":54,"./modes/cfb":55,"./modes/cfb1":56,"./modes/cfb8":57,"./modes/ctr":58,"./modes/ecb":59,"./modes/ofb":60,"./streamCipher":61,buffer:40,inherits:184}],52:[function(a,b){(function(a){function c(b){this.h=b,this.state=new a(16),this.state.fill(0),this.cache=new a("")}function d(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function e(b){b=b.map(f);var c=new a(16);return c.writeUInt32BE(b[0],0),c.writeUInt32BE(b[1],4),c.writeUInt32BE(b[2],8),c.writeUInt32BE(b[3],12),c}function f(a){var b,c;return b=a>i||0>a?(c=Math.abs(a)%i,0>a?i-c:c):a}function g(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}var h=new a(16);h.fill(0),b.exports=c,c.prototype.ghash=function(a){for(var b=-1;++b<a.length;)this.state[b]^=a[b];this._multiply()},c.prototype._multiply=function(){for(var a,b,c,f=d(this.h),h=[0,0,0,0],i=-1;++i<128;){for(b=0!==(this.state[~~(i/8)]&1<<7-i%8),b&&(h=g(h,f)),c=0!==(1&f[3]),a=3;a>0;a--)f[a]=f[a]>>>1|(1&f[a-1])<<31;f[0]=f[0]>>>1,c&&(f[0]=f[0]^225<<24)}this.state=e(h)},c.prototype.update=function(b){this.cache=a.concat([this.cache,b]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},c.prototype["final"]=function(b,c){return this.cache.length&&this.ghash(a.concat([this.cache,h],16)),this.ghash(e([0,b,0,c])),this.state};var i=Math.pow(2,32)}).call(this,a("buffer").Buffer)},{buffer:40}],53:[function(a,b,c){c["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},c["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},c["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},c["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},c["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},c["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},c.aes128=c["aes-128-cbc"],c.aes192=c["aes-192-cbc"],c.aes256=c["aes-256-cbc"],c["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},c["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},c["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},c["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},c["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},c["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},c["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},c["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},c["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},c["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},c["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},c["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},c["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},c["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},c["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},c["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},c["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},c["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],54:[function(a,b,c){var d=a("../xor");c.encrypt=function(a,b){var c=d(b,a._prev);return a._prev=a._cipher.encryptBlock(c),a._prev},c.decrypt=function(a,b){var c=a._prev;a._prev=b;var e=a._cipher.decryptBlock(b);return d(e,c)}},{"../xor":62}],55:[function(a,b,c){(function(b){function d(a,c,d){var f=c.length,g=e(c,a._cache);return a._cache=a._cache.slice(f),a._prev=b.concat([a._prev,d?c:g]),g}var e=a("../xor");c.encrypt=function(a,c,e){for(var f,g=new b("");c.length;){if(0===a._cache.length&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=new b("")),!(a._cache.length<=c.length)){g=b.concat([g,d(a,c,e)]);break}f=a._cache.length,g=b.concat([g,d(a,c.slice(0,f),e)]),c=c.slice(f)}return g}}).call(this,a("buffer").Buffer)},{"../xor":62,buffer:40}],56:[function(a,b,c){(function(a){function b(a,b,c){for(var e,f,g,h=-1,i=8,j=0;++h<i;)e=a._cipher.encryptBlock(a._prev),f=b&1<<7-h?128:0,g=e[0]^f,j+=(128&g)>>h%8,a._prev=d(a._prev,c?f:g);return j}function d(b,c){var d=b.length,e=-1,f=new a(b.length);for(b=a.concat([b,new a([c])]);++e<d;)f[e]=b[e]<<1|b[e+1]>>7;return f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:40}],57:[function(a,b,c){(function(a){function b(b,c,d){var e=b._cipher.encryptBlock(b._prev),f=e[0]^c;return b._prev=a.concat([b._prev.slice(1),new a([d?c:f])]),f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:40}],58:[function(a,b,c){(function(b){function d(a){var b=a._cipher.encryptBlock(a._prev);return e(a._prev),b}function e(a){for(var b,c=a.length;c--;){if(b=a.readUInt8(c),255!==b){b++,a.writeUInt8(b,c);break}a.writeUInt8(0,c)}}var f=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var e=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),f(c,e)}}).call(this,a("buffer").Buffer)},{"../xor":62,buffer:40}],59:[function(a,b,c){c.encrypt=function(a,b){return a._cipher.encryptBlock(b)},c.decrypt=function(a,b){return a._cipher.decryptBlock(b)}},{}],60:[function(a,b,c){(function(b){function d(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}var e=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var f=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),e(c,f)}}).call(this,a("buffer").Buffer)},{"../xor":62,buffer:40}],61:[function(a,b){(function(c){function d(a,b,g,h){return this instanceof d?(f.call(this),this._cipher=new e.AES(b),this._prev=new c(g.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,g.copy(this._prev),void(this._mode=a)):new d(a,b,g)}var e=a("./aes"),f=a("./cipherBase"),g=a("inherits");g(d,f),b.exports=d,d.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},d.prototype._final=function(){this._cipher.scrub()}}).call(this,a("buffer").Buffer)},{"./aes":46,"./cipherBase":49,buffer:40,inherits:184}],62:[function(a,b){(function(a){function c(b,c){for(var d=Math.min(b.length,c.length),e=new a(d),f=-1;++f<d;)e.writeUInt8(b[f]^c[f],f);return e}b.exports=c}).call(this,a("buffer").Buffer)},{buffer:40}],63:[function(a,b,c){(function(a){c["RSA-SHA224"]=c.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new a("302d300d06096086480165030402040500041c","hex")},c["RSA-SHA256"]=c.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new a("3031300d060960864801650304020105000420","hex")},c["RSA-SHA384"]=c.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new a("3041300d060960864801650304020205000430","hex")},c["RSA-SHA512"]=c.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new a("3051300d060960864801650304020305000440","hex")},c["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new a("3021300906052b0e03021a05000414","hex")},c["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new a("","hex")},c.DSA=c["DSA-SHA1"]=c["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new a("","hex")},c["DSA-SHA224"]=c["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new a("","hex")},c["DSA-SHA256"]=c["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new a("","hex")},c["DSA-SHA384"]=c["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new a("","hex")},c["DSA-SHA512"]=c["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new a("","hex")},c["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new a("","hex")},c["RSA-RIPEMD160"]=c.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new a("3021300906052b2403020105000414","hex")},c["RSA-MD5"]=c.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new a("3020300c06082a864886f70d020505000410","hex")}}).call(this,a("buffer").Buffer)},{buffer:40}],64:[function(a,b){(function(c){function d(a,b){h.Writable.call(this);var c=k[a];if(!c)throw new Error("Unknown message digest");this._hashType=c.hash,this._hash=b.createHash(c.hash),this._tag=c.id,this._crypto=b}function e(a,b){h.Writable.call(this);var c=k[a];if(!c)throw new Error("Unknown message digest");this._hash=b.createHash(c.hash),this._tag=c.id}var f=a("./sign"),g=a("./verify"),h=a("stream"),i=a("inherits"),j=a("./algos"),k={};Object.keys(j).forEach(function(a){k[a]=k[a.toLowerCase()]=j[a]}),b.exports=function(a,b){function c(a){return new d(a,b)}function f(a){return new e(a,b)}a.createSign=a.Sign=c,a.createVerify=a.Verify=f},i(d,h.Writable),d.prototype._write=function(a,b,c){this._hash.update(a),c()},d.prototype.update=function(a){return this.write(a),this},d.prototype.sign=function(a,b){this.end();var d=this._hash.digest(),e=f(c.concat([this._tag,d]),a,this._hashType,this._crypto);return b&&(e=e.toString(b)),e},i(e,h.Writable),e.prototype._write=function(a,b,c){this._hash.update(a),c()},e.prototype.update=function(a){return this.write(a),this},e.prototype.verify=function(a,b,d){this.end();var e=this._hash.digest();return c.isBuffer(b)||(b=new c(b,d)),g(b,c.concat([this._tag,e]),a)}}).call(this,a("buffer").Buffer)},{"./algos":63,"./sign":107,"./verify":108,buffer:40,inherits:184,stream:203}],65:[function(a,b){!function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,("le"===b||"be"===b)&&(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;e>f;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&54>=g?g-49+10:g>=17&&22>=g?g-17+10:15&g}return d}function g(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;f>g;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function h(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function i(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");

}function k(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function n(a){m.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof a?a.exports=e:b.BN=e,e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return 0>a&&(this.sign=!0,a=-a),void(67108864>a?(this.words=[67108863&a],this.length=1):(this.words=[67108863&a,a/67108864&67108863],this.length=2));if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip()},e.prototype._initArray=function(a,b,d){c("number"==typeof a.length),this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var g=f(a,c,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var g=f(a,b,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;67108863>=e;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,h=f%d,i=Math.min(f,f-h)+c,j=0,k=c;i>k;k+=d)j=g(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==h){for(var l=1,j=g(a,k,a.length,b),k=0;h>k;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var o=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?o[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&36>=a){var j=p[a],k=q[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var m=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?o[j-m.length]+m+d:m+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(){this.strip();var a=new Array(this.byteLength());a[0]=0;for(var b=this.clone(),c=0;0!==b.cmpn(0);c++){var d=b.andln(255);b.ishrn(8),a[a.length-c-1]=d}return a},e.prototype._countBits=function(a){return a>=33554432?26:a>=16777216?25:a>=8388608?24:a>=4194304?23:a>=2097152?22:a>=1048576?21:a>=524288?20:a>=262144?19:a>=131072?18:a>=65536?17:a>=32768?16:a>=16384?15:a>=8192?14:a>=4096?13:a>=2048?12:a>=1024?11:a>=512?10:a>=256?9:a>=128?8:a>=64?7:a>=32?6:a>=16?5:a>=8?4:a>=4?3:a>=2?2:a>=1?1:0},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.ior=function(a){for(this.sign=this.sign||a.sign;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},e.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},e.prototype.iand=function(a){this.sign=this.sign&&a.sign;var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},e.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},e.prototype.ixor=function(a){this.sign=this.sign||a.sign;var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},e.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},e.prototype.setn=function(a,b){c("number"==typeof a&&a>=0);for(var d=a/26|0,e=a%26;this.length<=d;)this.words[this.length++]=0;return this.words[d]=b?this.words[d]|1<<e:this.words[d]&~(1<<e),this.strip()},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]+f;f=b>>26,this.words[g]=67108863&b}for(;0!==f&&g<d.length;g++){var b=d.words[g]+f;f=b>>26,this.words[g]=67108863&b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);g>=h;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);h>=i;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);g>=h;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.imuln=function(a){c("number"==typeof a);for(var b=0,d=0;d<this.length;d++){var e=this.words[d]*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[d]=67108863&f}return 0!==b&&(this.words[d]=b,this.length++),this},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;d>g;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0),b=b?(b-b%26)/26:0;var e=a%26,f=Math.min((a-e)/26,this.length),g=67108863^67108863>>>e<<e,h=d;if(b-=f,b=Math.max(0,b),h){for(var i=0;f>i;i++)h.words[i]=this.words[i];h.length=f}if(0===f);else if(this.length>f){this.length-=f;for(var i=0;i<this.length;i++)this.words[i]=this.words[i+f]}else this.words[0]=0,this.length=1;for(var j=0,i=this.length-1;i>=0&&(0!==j||i>=b);i--){var k=this.words[i];this.words[i]=j<<26-e|k>>>e,j=k&g}return h&&0!==j&&(h.words[h.length++]=j),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),d?{hi:this,lo:h}:this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){return c("number"==typeof a),0>a?this.isubn(-a):this.sign?1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this):this._iaddn(a)},e.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),0>a)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(a,b,d){var e,f=a.length+d;if(this.words.length<f){for(var g=new Array(f),e=0;e<this.length;e++)g[e]=this.words[e];this.words=g}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(var h=0,e=0;e<a.length;e++){var i=this.words[e+d]+h,j=a.words[e]*b;i-=67108863&j,h=(i>>26)-(j/67108864|0),this.words[e+d]=67108863&i}for(;e<this.length-d;e++){var i=this.words[e+d]+h;h=i>>26,this.words[e+d]=67108863&i}if(0===h)return this.strip();c(-1===h),h=0;for(var e=0;e<this.length;e++){var i=-this.words[e]+h;h=i>>26,this.words[e]=67108863&i}return this.sign=!0,this.strip()},e.prototype._wordDiv=function(a,b){for(var c=this.length-a.length,d=this.clone(),f=a,g=f.words[f.length-1],c=0;33554432>g;c++)g<<=1;0!==c&&(f=f.shln(c),d.ishln(c),g=f.words[f.length-1]);var h,i=d.length-f.length;if("mod"!==b){h=new e(null),h.length=i+1,h.words=new Array(h.length);for(var j=0;j<h.length;j++)h.words[j]=0}var k=d.clone()._ishlnsubmul(f,1,i);k.sign||(d=k,h&&(h.words[i]=1));for(var l=i-1;l>=0;l--){var m=67108864*d.words[f.length+l]+d.words[f.length+l-1];for(m=Math.min(m/g|0,67108863),d._ishlnsubmul(f,m,l);d.sign;)m--,d.sign=!1,d._ishlnsubmul(f,1,l),d.sign=!d.sign;h&&(h.words[l]=m)}return h&&h.strip(),d.strip(),"div"!==b&&0!==c&&d.ishrn(c),{div:h?h:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(67108863>=a);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(67108863>=a);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype._egcd=function(a,b){c(!b.sign),c(0!==b.cmpn(0));var d=this,f=b.clone();d=d.sign?d.mod(b):d.clone();for(var g=new e(0);f.isEven();)f.ishrn(1);for(var h=f.clone();d.cmpn(1)>0&&f.cmpn(1)>0;){for(;d.isEven();)d.ishrn(1),a.isEven()?a.ishrn(1):a.iadd(h).ishrn(1);for(;f.isEven();)f.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);d.cmp(f)>=0?(d.isub(f),a.isub(g)):(f.isub(d),g.isub(a))}return 0===d.cmpn(1)?a:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;b.isEven();)b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);if(b.cmp(c)<0){var e=b;b=c,c=e}b.isub(b.div(c).mul(c))}while(0!==b.cmpn(0)&&0!==c.cmpn(0));return 0===b.cmpn(0)?c.ishln(d):b.ishln(d)},e.prototype.invm=function(a){return this._egcd(new e(1),a).mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;d+1>f;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=0>a;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:a>d?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new m(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var r={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},h.prototype.ireduce=function(a){var b,c=a;do{var d=c.ishrn(this.n,0,this.tmp);c=this.imulK(d.hi),c=c.iadd(d.lo),b=c.bitLength()}while(b>this.n);var e=b<this.n?-1:c.cmp(this.p);return 0===e?(c.words[0]=0,c.length=1):e>0?c.isub(this.p):c.strip(),c},h.prototype.imulK=function(a){return a.imul(this.k)},d(i,h),i.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b,c=0,d=0;d<a.length;d++){var e=a.words[d];b=64*e,c+=977*e,b+=c/67108864|0,c&=67108863,a.words[d]=c,c=b}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},d(j,h),d(k,h),d(l,h),l.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function s(a){if(r[a])return r[a];var s;if("k256"===a)s=new i;else if("p224"===a)s=new j;else if("p192"===a)s=new k;else{if("p25519"!==a)throw new Error("Unknown prime "+a);s=new l}return r[a]=s,s},m.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},m.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},m.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},m.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},m.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},m.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},m.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},m.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},m.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},m.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},m.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},m.prototype.isqr=function(a){return this.imul(a,a)},m.prototype.sqr=function(a){return this.mul(a,a)},m.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(o>q);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},m.prototype.invm=function(a){var b=a._egcd(new e(1),this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},m.prototype.pow=function(a,b){for(var c=[],d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var e=a,f=0;f<c.length&&0===c[f];f++,e=this.sqr(e));if(++f<c.length)for(var d=this.sqr(e);f<c.length;f++,d=this.sqr(d))0!==c[f]&&(e=this.mul(e,d));return e},m.prototype.convertTo=function(a){return a.clone()},m.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new n(a)},d(n,m),n.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},n.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},n.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},n.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},n.prototype.invm=function(a){var b=this.imod(a.invm(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],66:[function(a,b){(function(c){function d(a,b){var c=f(a,b),d=c.toRed(g.mont(a.modulus)).redPow(new g(a.publicExponent)).fromRed();return{blinder:d,unblinder:c.invm(a.modulus)}}function e(a,b,e){var f=d(b,e),h=b.modulus.byteLength(),i=(g.mont(b.modulus),new g(a).mul(f.blinder).mod(b.modulus)),j=i.toRed(g.mont(b.prime1)),k=i.toRed(g.mont(b.prime2)),l=b.coefficient,m=b.prime1,n=b.prime2,o=j.redPow(b.exponent1),p=k.redPow(b.exponent2);o=o.fromRed(),p=p.fromRed();var q=o.isub(p).imul(l).mod(m);q.imul(n),p.iadd(q);var r=new c(p.imul(f.unblinder).mod(b.modulus).toArray());if(r.length<h){var s=new c(h-r.length);s.fill(0),r=c.concat([s,r],h)}return r}function f(a,b){for(var c=a.modulus.byteLength(),d=new g(b.randomBytes(c));d.cmp(a.modulus)>=0||!d.mod(a.prime1)||!d.mod(a.prime2);)d=new g(b.randomBytes(c));return d}var g=a("bn.js");b.exports=e,e.getr=f}).call(this,a("buffer").Buffer)},{"bn.js":65,buffer:40}],67:[function(a,b,c){var d=c;d.version=a("../package.json").version,d.utils=a("./elliptic/utils"),d.rand=a("brorand"),d.hmacDRBG=a("./elliptic/hmac-drbg"),d.curve=a("./elliptic/curve"),d.curves=a("./elliptic/curves"),d.ec=a("./elliptic/ec")},{"../package.json":86,"./elliptic/curve":70,"./elliptic/curves":73,"./elliptic/ec":74,"./elliptic/hmac-drbg":77,"./elliptic/utils":78,brorand:79}],68:[function(a,b){function c(a,b){this.type=a,this.p=new e(b.p,16),this.red=b.prime?e.red(b.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=b.n&&new e(b.n,16),this.g=b.g&&this.pointFromJSON(b.g,b.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function d(a,b){this.curve=a,this.type=b,this.precomputed=null}var e=a("bn.js"),f=a("../../elliptic"),g=f.utils.getNAF,h=f.utils.getJSF,i=f.utils.assert;b.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(a,b){var c=a._getDoubles(),d=g(b,1),e=(1<<c.step+1)-(c.step%2===0?2:1);e/=3;for(var f=[],h=0;h<d.length;h+=c.step){for(var i=0,b=h+c.step-1;b>=h;b--)i=(i<<1)+d[b];f.push(i)}for(var j=this.jpoint(null,null,null),k=this.jpoint(null,null,null),l=e;l>0;l--){for(var h=0;h<f.length;h++){var i=f[h];i===l?k=k.mixedAdd(c.points[h]):i===-l&&(k=k.mixedAdd(c.points[h].neg()))}j=j.add(k)}return j.toP()},c.prototype._wnafMul=function(a,b){var c=4,d=a._getNAFPoints(c);c=d.wnd;for(var e=d.points,f=g(b,c),h=this.jpoint(null,null,null),j=f.length-1;j>=0;j--){for(var b=0;j>=0&&0===f[j];j--)b++;if(j>=0&&b++,h=h.dblp(b),0>j)break;var k=f[j];i(0!==k),h="affine"===a.type?h.mixedAdd(k>0?e[k-1>>1]:e[-k-1>>1].neg()):h.add(k>0?e[k-1>>1]:e[-k-1>>1].neg())}return"affine"===a.type?h.toP():h},c.prototype._wnafMulAdd=function(a,b,c,d){for(var e=this._wnafT1,f=this._wnafT2,i=this._wnafT3,j=0,k=0;d>k;k++){var l=b[k],m=l._getNAFPoints(a);e[k]=m.wnd,f[k]=m.points}for(var k=d-1;k>=1;k-=2){var n=k-1,o=k;if(1===e[n]&&1===e[o]){var p=[b[n],null,null,b[o]];0===b[n].y.cmp(b[o].y)?(p[1]=b[n].add(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg())):0===b[n].y.cmp(b[o].y.redNeg())?(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].add(b[o].neg())):(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],r=h(c[n],c[o]);j=Math.max(r[0].length,j),i[n]=new Array(j),i[o]=new Array(j);for(var s=0;j>s;s++){var t=0|r[0][s],u=0|r[1][s];i[n][s]=q[3*(t+1)+(u+1)],i[o][s]=0,f[n]=p}}else i[n]=g(c[n],e[n]),i[o]=g(c[o],e[o]),j=Math.max(i[n].length,j),j=Math.max(i[o].length,j)}for(var v=this.jpoint(null,null,null),w=this._wnafT4,k=j;k>=0;k--){for(var x=0;k>=0;){for(var y=!0,s=0;d>s;s++)w[s]=0|i[s][k],0!==w[s]&&(y=!1);if(!y)break;x++,k--}if(k>=0&&x++,v=v.dblp(x),0>k)break;for(var s=0;d>s;s++){var l,z=w[s];0!==z&&(z>0?l=f[s][z-1>>1]:0>z&&(l=f[s][-z-1>>1].neg()),v="affine"===l.type?v.mixedAdd(l):v.add(l))}}for(var k=0;d>k;k++)f[k]=null;return v.toP()},c.BasePoint=d,d.prototype.validate=function(){return this.curve.validate(this)},d.prototype.precompute=function(a){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,a),b.beta=this._getBeta(),this.precomputed=b,this},d.prototype._getDoubles=function(a,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var c=[this],d=this,e=0;b>e;e+=a){for(var f=0;a>f;f++)d=d.dbl();c.push(d)}return{step:a,points:c}},d.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],c=(1<<a)-1,d=1===c?null:this.dbl(),e=1;c>e;e++)b[e]=b[e-1].add(d);return{wnd:a,points:b}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(a){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}},{"../../elliptic":67,"bn.js":65}],69:[function(a,b){function c(a){this.twisted=1!=a.a,this.mOneA=this.twisted&&-1==a.a,this.extended=this.mOneA,i.call(this,"mont",a),this.a=new g(a.a,16).mod(this.red.m).toRed(this.red),this.c=new g(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new g(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==a.c}function d(a,b,c,d,e){i.BasePoint.call(this,a,"projective"),null===b&&null===c&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new g(b,16),this.y=new g(c,16),this.z=d?new g(d,16):this.curve.one,this.t=e&&new g(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var e=a("../curve"),f=a("../../elliptic"),g=a("bn.js"),h=a("inherits"),i=e.base,j=(f.utils.getNAF,f.utils.assert);h(c,i),b.exports=c,c.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},c.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},c.prototype.point=function(a,b,c,e){return new d(this,a,b,c,e)},c.prototype.jpoint=function(a,b,c,d){return this.point(a,b,c,d)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.pointFromX=function(a,b){b=new g(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr(),d=this.c2.redSub(this.a.redMul(c)),f=this.one.redSub(this.c2.redMul(this.d).redMul(c)),h=d.redMul(f.redInvm()).redSqrt(),i=h.fromRed().isOdd();return(a&&!i||!a&&i)&&(h=h.redNeg()),this.point(b,h,e.one)},c.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var b=a.x.redSqr(),c=a.y.redSqr(),d=b.redMul(this.a).redAdd(c),e=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(c)));return 0===d.cmp(e)},h(d,i.BasePoint),d.fromJSON=function(a,b){return new d(a,b[0],b[1],b[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),f=d.redAdd(b),g=f.redSub(c),h=d.redSub(b),i=e.redMul(g),j=f.redMul(h),k=e.redMul(h),l=g.redMul(f);return this.curve.point(i,j,l,k)},d.prototype._projDbl=function(){var a=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var d=this.curve._mulA(b),e=d.redAdd(c);if(this.zOne)var f=a.redSub(b).redSub(c).redMul(e.redSub(this.curve.two)),g=e.redMul(d.redSub(c)),h=e.redSqr().redSub(e).redSub(e);else var i=this.z.redSqr(),j=e.redSub(i).redISub(i),f=a.redSub(b).redISub(c).redMul(j),g=e.redMul(d.redSub(c)),h=e.redMul(j)}else var d=b.redAdd(c),i=this.curve._mulC(redMul(this.z)).redSqr(),j=d.redSub(i).redSub(i),f=this.curve._mulC(a.redISub(d)).redMul(j),g=this.curve._mulC(d).redMul(b.redISub(c)),h=d.redMul(j);

return this.curve.point(f,g,h)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(a){var b=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),c=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),d=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),f=c.redSub(b),g=e.redSub(d),h=e.redAdd(d),i=c.redAdd(b),j=f.redMul(g),k=h.redMul(i),l=f.redMul(i),m=g.redMul(h);return this.curve.point(j,k,m,l)},d.prototype._projAdd=function(a){var b=this.z.redMul(a.z),c=b.redSqr(),d=this.x.redMul(a.x),e=this.y.redMul(a.y),f=this.curve.d.redMul(d).redMul(e),g=c.redSub(f),h=c.redAdd(f),i=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(d).redISub(e),j=b.redMul(g).redMul(i);if(this.curve.twisted)var k=b.redMul(h).redMul(e.redSub(this.curve._mulA(d))),l=g.redMul(h);else var k=b.redMul(h).redMul(e.redSub(d)),l=this.curve._mulC(g).redMul(h);return this.curve.point(j,k,l)},d.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},d.prototype.mul=function(a){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2)},d.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../../elliptic":67,"../curve":70,"bn.js":65,inherits:184}],70:[function(a,b,c){var d=c;d.base=a("./base"),d["short"]=a("./short"),d.mont=a("./mont"),d.edwards=a("./edwards")},{"./base":68,"./edwards":69,"./mont":71,"./short":72}],71:[function(a,b){function c(a){i.call(this,"mont",a),this.a=new g(a.a,16).toRed(this.red),this.b=new g(a.b,16).toRed(this.red),this.i4=new g(4).toRed(this.red).redInvm(),this.two=new g(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function d(a,b,c){i.BasePoint.call(this,a,"projective"),null===b&&null===c?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new g(b,16),this.z=new g(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var e=a("../curve"),f=a("../../elliptic"),g=a("bn.js"),h=a("inherits"),i=e.base;f.utils.getNAF,f.utils.assert}h(c,i),b.exports=c,c.prototype.point=function(a,b){return new d(this,a,b)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.validate=function(a){var b=a.normalize().x,c=b.redSqr(),d=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b),e=d.redSqrt();return 0===e.redSqr().cmp(d)},h(d,i.BasePoint),d.prototype.precompute=function(){},d.fromJSON=function(a,b){return new d(a,b[0],b[1]||a.one)},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},d.prototype.dbl=function(){var a=this.x.redAdd(this.z),b=a.redSqr(),c=this.x.redSub(this.z),d=c.redSqr(),e=b.redSub(d),f=b.redMul(d),g=e.redMul(d.redAdd(this.curve.a24.redMul(e)));return this.curve.point(f,g)},d.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.diffAdd=function(a,b){var c=this.x.redAdd(this.z),d=this.x.redSub(this.z),e=a.x.redAdd(a.z),f=a.x.redSub(a.z),g=f.redMul(c),h=e.redMul(d),i=b.z.redMul(g.redAdd(h).redSqr()),j=b.x.redMul(g.redISub(h).redSqr());return this.curve.point(i,j)},d.prototype.mul=function(a){for(var b=a.clone(),c=this,d=this.curve.point(null,null),e=this,f=[];0!==b.cmpn(0);b.ishrn(1))f.push(b.andln(1));for(var g=f.length-1;g>=0;g--)0===f[g]?(c=c.diffAdd(d,e),d=d.dbl()):(d=c.diffAdd(d,e),c=c.dbl());return d},d.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":67,"../curve":70,"bn.js":65,inherits:184}],72:[function(a,b){function c(a){j.call(this,"short",a),this.a=new h(a.a,16).toRed(this.red),this.b=new h(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(a,b,c,d){j.BasePoint.call(this,a,"affine"),null===b&&null===c?(this.x=null,this.y=null,this.inf=!0):(this.x=new h(b,16),this.y=new h(c,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function e(a,b,c,d){j.BasePoint.call(this,a,"jacobian"),null===b&&null===c&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new h(0)):(this.x=new h(b,16),this.y=new h(c,16),this.z=new h(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var f=a("../curve"),g=a("../../elliptic"),h=a("bn.js"),i=a("inherits"),j=f.base,k=(g.utils.getNAF,g.utils.assert);i(c,j),b.exports=c,c.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var b,c;if(a.beta)b=new h(a.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);b=d[0].cmp(d[1])<0?d[0]:d[1],b=b.toRed(this.red)}if(a.lambda)c=new h(a.lambda,16);else{var e=this._getEndoRoots(this.n);0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(b))?c=e[0]:(c=e[1],k(0===this.g.mul(c).x.cmp(this.g.x.redMul(b))))}var f;return f=a.basis?a.basis.map(function(a){return{a:new h(a.a,16),b:new h(a.b,16)}}):this._getEndoBasis(c),{beta:b,lambda:c,basis:f}}},c.prototype._getEndoRoots=function(a){var b=a===this.p?this.red:h.mont(a),c=new h(2).toRed(b).redInvm(),d=c.redNeg(),e=(new h(1).toRed(b),new h(3).toRed(b).redNeg().redSqrt().redMul(c)),f=d.redAdd(e).fromRed(),g=d.redSub(e).fromRed();return[f,g]},c.prototype._getEndoBasis=function(a){for(var b,c,d,e,f,g,i,j=this.n.shrn(Math.floor(this.n.bitLength()/2)),k=a,l=this.n.clone(),m=new h(1),n=new h(0),o=new h(0),p=new h(1),q=0;0!==k.cmpn(0);){var r=l.div(k),s=l.sub(r.mul(k)),t=o.sub(r.mul(m)),u=p.sub(r.mul(n));if(!d&&s.cmp(j)<0)b=i.neg(),c=m,d=s.neg(),e=t;else if(d&&2===++q)break;i=s,l=k,k=s,o=m,m=t,p=n,n=u}f=s.neg(),g=t;var v=d.sqr().add(e.sqr()),w=f.sqr().add(g.sqr());return w.cmp(v)>=0&&(f=b,g=c),d.sign&&(d=d.neg(),e=e.neg()),f.sign&&(f=f.neg(),g=g.neg()),[{a:d,b:e},{a:f,b:g}]},c.prototype._endoSplit=function(a){var b=this.endo.basis,c=b[0],d=b[1],e=d.b.mul(a).divRound(this.n),f=c.b.neg().mul(a).divRound(this.n),g=e.mul(c.a),h=f.mul(d.a),i=e.mul(c.b),j=f.mul(d.b),k=a.sub(g).sub(h),l=i.add(j).neg();return{k1:k,k2:l}},c.prototype.point=function(a,b,c){return new d(this,a,b,c)},c.prototype.pointFromX=function(a,b){b=new h(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),d=c.redSqrt(),e=d.fromRed().isOdd();return(a&&!e||!a&&e)&&(d=d.redNeg()),this.point(b,d)},c.prototype.jpoint=function(a,b,c){return new e(this,a,b,c)},c.prototype.pointFromJSON=function(a,b){return d.fromJSON(this,a,b)},c.prototype.validate=function(a){if(a.inf)return!0;var b=a.x,c=a.y,d=this.a.redMul(b),e=b.redSqr().redMul(b).redIAdd(d).redIAdd(this.b);return 0===c.redSqr().redISub(e).cmpn(0)},c.prototype._endoWnafMulAdd=function(a,b){for(var c=this._endoWnafT1,d=this._endoWnafT2,e=0;e<a.length;e++){var f=this._endoSplit(b[e]),g=a[e],h=g._getBeta();f.k1.sign&&(f.k1.sign=!f.k1.sign,g=g.neg(!0)),f.k2.sign&&(f.k2.sign=!f.k2.sign,h=h.neg(!0)),c[2*e]=g,c[2*e+1]=h,d[2*e]=f.k1,d[2*e+1]=f.k2}for(var i=this._wnafMulAdd(1,c,d,2*e),j=0;2*e>j;j++)c[j]=null,d[j]=null;return i},i(d,j.BasePoint),d.prototype._getBeta=function(){function a(a){return d.point(a.x.redMul(d.endo.beta),a.y)}if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var c=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var d=this.curve;b.beta=c,c.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return c}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(a,b,c){function d(b){return a.point(b[0],b[1],c)}"string"==typeof b&&(b=JSON.parse(b));var e=a.point(b[0],b[1],c);if(!b[2])return e;var f=b[2];return e.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[e].concat(f.doubles.points.map(d))},naf:f.naf&&{wnd:f.naf.wnd,points:[e].concat(f.naf.points.map(d))}},e},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a))return this.curve.point(null,null);if(0===this.x.cmp(a.x))return this.curve.point(null,null);var b=this.y.redSub(a.y);0!==b.cmpn(0)&&(b=b.redMul(this.x.redSub(a.x).redInvm()));var c=b.redSqr().redISub(this.x).redISub(a.x),d=b.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,d)},d.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var b=this.curve.a,c=this.x.redSqr(),d=a.redInvm(),e=c.redAdd(c).redIAdd(c).redIAdd(b).redMul(d),f=e.redSqr().redISub(this.x.redAdd(this.x)),g=e.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,g)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(a){return a=new h(a,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e):this.curve._wnafMulAdd(1,d,e,2)},d.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))},d.prototype.neg=function(a){function b(a){return a.neg()}if(this.inf)return this;var c=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){var d=this.precomputed;c.precomputed={naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(b)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(b)}}}return c},d.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var a=this.curve.jpoint(this.x,this.y,this.curve.one);return a},i(e,j.BasePoint),e.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),b=a.redSqr(),c=this.x.redMul(b),d=this.y.redMul(b).redMul(a);return this.curve.point(c,d)},e.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},e.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.z.redSqr(),c=this.z.redSqr(),d=this.x.redMul(b),e=a.x.redMul(c),f=this.y.redMul(b.redMul(a.z)),g=a.y.redMul(c.redMul(this.z)),h=d.redSub(e),i=f.redSub(g);if(0===h.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var j=h.redSqr(),k=j.redMul(h),l=d.redMul(j),m=i.redSqr().redIAdd(k).redISub(l).redISub(l),n=i.redMul(l.redISub(m)).redISub(f.redMul(k)),o=this.z.redMul(a.z).redMul(h);return this.curve.jpoint(m,n,o)},e.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var b=this.z.redSqr(),c=this.x,d=a.x.redMul(b),e=this.y,f=a.y.redMul(b).redMul(this.z),g=c.redSub(d),h=e.redSub(f);if(0===g.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=g.redSqr(),j=i.redMul(g),k=c.redMul(i),l=h.redSqr().redIAdd(j).redISub(k).redISub(k),m=h.redMul(k.redISub(l)).redISub(e.redMul(j)),n=this.z.redMul(g);return this.curve.jpoint(l,m,n)},e.prototype.dblp=function(a){if(0===a)return this;if(this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}for(var d=this.curve.a,e=this.curve.tinv,f=this.x,g=this.y,h=this.z,i=h.redSqr().redSqr(),j=g.redAdd(g),c=0;a>c;c++){var k=f.redSqr(),l=j.redSqr(),m=l.redSqr(),n=k.redAdd(k).redIAdd(k).redIAdd(d.redMul(i)),o=f.redMul(l),p=n.redSqr().redISub(o.redAdd(o)),q=o.redISub(p),r=n.redMul(q);r=r.redIAdd(r).redISub(m);var s=j.redMul(h);a>c+1&&(i=i.redMul(m)),f=p,h=s,j=r}return this.curve.jpoint(f,j.redMul(e),h)},e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},e.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr().redISub(d).redISub(d),g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g);var h=f,i=e.redMul(d.redISub(f)).redISub(g),j=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),l=this.y.redSqr(),m=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(k).redISub(m);n=n.redIAdd(n);var o=k.redAdd(k).redIAdd(k),p=o.redSqr(),q=m.redIAdd(m);q=q.redIAdd(q),q=q.redIAdd(q);var h=p.redISub(n).redISub(n),i=o.redMul(n.redISub(h)).redISub(q),j=this.y.redMul(this.z);j=j.redIAdd(j)}return this.curve.jpoint(h,i,j)},e.prototype._threeDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a),f=e.redSqr().redISub(d).redISub(d),g=f,h=c.redIAdd(c);h=h.redIAdd(h),h=h.redIAdd(h);var i=e.redMul(d.redISub(f)).redISub(h),j=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),l=this.y.redSqr(),m=this.x.redMul(l),n=this.x.redSub(k).redMul(this.x.redAdd(k));n=n.redAdd(n).redIAdd(n);var o=m.redIAdd(m);o=o.redIAdd(o);var p=o.redAdd(o),g=n.redSqr().redISub(p),j=this.y.redAdd(this.z).redSqr().redISub(l).redISub(k),q=l.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var i=n.redMul(o.redISub(g)).redISub(q)}return this.curve.jpoint(g,i,j)},e.prototype._dbl=function(){var a=this.curve.a,b=(this.curve.tinv,this.x),c=this.y,d=this.z,e=d.redSqr().redSqr(),f=b.redSqr(),g=c.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(a.redMul(e)),i=b.redAdd(b);i=i.redIAdd(i);var j=i.redMul(g),k=h.redSqr().redISub(j.redAdd(j)),l=j.redISub(k),m=g.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=h.redMul(l).redISub(m),o=c.redAdd(c).redMul(d);return this.curve.jpoint(k,n,o)},e.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr(),d=b.redSqr(),e=a.redAdd(a).redIAdd(a),f=e.redSqr(),g=this.x.redAdd(b).redSqr().redISub(a).redISub(d);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(f);var h=g.redSqr(),i=d.redIAdd(d);i=i.redIAdd(i),i=i.redIAdd(i),i=i.redIAdd(i);var j=e.redIAdd(g).redSqr().redISub(f).redISub(h).redISub(i),k=b.redMul(j);k=k.redIAdd(k),k=k.redIAdd(k);var l=this.x.redMul(h).redISub(k);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.y.redMul(j.redMul(i.redISub(j)).redISub(g.redMul(h)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=this.z.redAdd(g).redSqr().redISub(c).redISub(h);return this.curve.jpoint(l,m,n)},e.prototype.mul=function(a,b){return a=new h(a,b),this.curve._wnafMul(this,a)},e.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var b=this.z.redSqr(),c=a.z.redSqr();if(0!==this.x.redMul(c).redISub(a.x.redMul(b)).cmpn(0))return!1;var d=b.redMul(this.z),e=c.redMul(a.z);return 0===this.y.redMul(e).redISub(a.y.redMul(d)).cmpn(0)},e.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":67,"../curve":70,"bn.js":65,inherits:184}],73:[function(a,b,c){function d(a){this.curve="short"===a.type?new h.curve["short"](a):"edwards"===a.type?new h.curve.edwards(a):new h.curve.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function e(a,b){Object.defineProperty(f,a,{configurable:!0,enumerable:!0,get:function(){var c=new d(b);return Object.defineProperty(f,a,{configurable:!0,enumerable:!0,value:c}),c}})}var f=c,g=a("hash.js"),h=(a("bn.js"),a("../elliptic")),i=h.utils.assert;f.PresetCurve=d,e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:g.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:g.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:g.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["9"]}),e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:g.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]
}}]})},{"../elliptic":67,"bn.js":65,"hash.js":80}],74:[function(a,b){function c(a){return this instanceof c?("string"==typeof a&&(g(e.curves.hasOwnProperty(a),"Unknown curve "+a),a=e.curves[a]),a instanceof e.curves.PresetCurve&&(a={curve:a}),this.curve=a.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=a.curve.g,this.g.precompute(a.curve.n.bitLength()+1),void(this.hash=a.hash||a.curve.hash)):new c(a)}var d=a("bn.js"),e=a("../../elliptic"),f=e.utils,g=f.assert,h=a("./key"),i=a("./signature");b.exports=c,c.prototype.keyPair=function(a,b){return new h(this,a,b)},c.prototype.genKeyPair=function(a){a||(a={});for(var b=new e.hmacDRBG({hash:this.hash,pers:a.pers,entropy:a.entropy||e.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),c=this.n.byteLength(),f=this.n.sub(new d(2));;){var g=new d(b.generate(c));if(!(g.cmp(f)>0))return g.iaddn(1),this.keyPair(g)}},c.prototype._truncateToN=function(a,b){var c=8*a.byteLength()-this.n.bitLength();return c>0&&(a=a.shrn(c)),!b&&a.cmp(this.n)>=0?a.sub(this.n):a},c.prototype.sign=function(a,b,c){b=this.keyPair(b,"hex"),a=this._truncateToN(new d(a,16)),c||(c={});for(var f=this.n.byteLength(),g=b.getPrivate().toArray(),h=g.length;21>h;h++)g.unshift(0);for(var j=a.toArray(),h=j.length;f>h;h++)j.unshift(0);for(var k=new e.hmacDRBG({hash:this.hash,entropy:g,nonce:j}),l=this.n.sub(new d(1));;){var m=new d(k.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(l)>=0)){var n=this.g.mul(m);if(!n.isInfinity()){var o=n.getX().mod(this.n);if(0!==o.cmpn(0)){var p=m.invm(this.n).mul(o.mul(b.getPrivate()).iadd(a)).mod(this.n);if(0!==p.cmpn(0))return c.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p)),new i(o,p)}}}}},c.prototype.verify=function(a,b,c){a=this._truncateToN(new d(a,16)),c=this.keyPair(c,"hex"),b=new i(b,"hex");var e=b.r,f=b.s;if(e.cmpn(1)<0||e.cmp(this.n)>=0)return!1;if(f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var g=f.invm(this.n),h=g.mul(a).mod(this.n),j=g.mul(e).mod(this.n),k=this.g.mulAdd(h,c.getPublic(),j);return k.isInfinity()?!1:0===k.getX().mod(this.n).cmp(e)}},{"../../elliptic":67,"./key":75,"./signature":76,"bn.js":65}],75:[function(a,b){function c(a,b,d){return b instanceof c?b:d instanceof c?d:(b||(b=d,d=null),null!==b&&"object"==typeof b&&(b.x?(d=b,b=null):(b.priv||b.pub)&&(d=b.pub,b=b.priv)),this.ec=a,this.priv=null,this.pub=null,void(this._importPublicHex(b,d)||("hex"===d&&(d=null),b&&this._importPrivate(b),d&&this._importPublic(d))))}{var d=a("bn.js"),e=a("../../elliptic"),f=e.utils;f.assert}b.exports=c,c.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(a,b){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof a&&(b=a,a=null),!b)return this.pub;for(var c=this.ec.curve.p.byteLength(),d=this.pub.getX().toArray(),e=d.length;c>e;e++)d.unshift(0);if(a)var g=[this.pub.getY().isEven()?2:3].concat(d);else{for(var h=this.pub.getY().toArray(),e=h.length;c>e;e++)h.unshift(0);var g=[4].concat(d,h)}return f.encode(g,b)},c.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(a){this.priv=new d(a,16),this.priv=this.priv.mod(this.ec.curve.n)},c.prototype._importPublic=function(a){this.pub=this.ec.curve.point(a.x,a.y)},c.prototype._importPublicHex=function(a,b){a=f.toArray(a,b);var c=this.ec.curve.p.byteLength();if(4===a[0]&&a.length-1===2*c)this.pub=this.ec.curve.point(a.slice(1,1+c),a.slice(1+c,1+2*c));else{if(2!==a[0]&&3!==a[0]||a.length-1!==c)return!1;this.pub=this.ec.curve.pointFromX(3===a[0],a.slice(1,1+c))}return!0},c.prototype.derive=function(a){return a.mul(this.priv).getX()},c.prototype.sign=function(a){return this.ec.sign(a,this)},c.prototype.verify=function(a,b){return this.ec.verify(a,b,this)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":67,"bn.js":65}],76:[function(a,b){function c(a,b){return a instanceof c?a:void(this._importDER(a,b)||(g(a&&b,"Signature without r or s"),this.r=new d(a,16),this.s=new d(b,16)))}var d=a("bn.js"),e=a("../../elliptic"),f=e.utils,g=f.assert;b.exports=c,c.prototype._importDER=function(a,b){if(a=f.toArray(a,b),a.length<6||48!==a[0]||2!==a[2])return!1;var c=a[1];if(1+c>a.length)return!1;var e=a[3];if(e>=128)return!1;if(4+e+2>=a.length)return!1;if(2!==a[4+e])return!1;var g=a[5+e];return g>=128?!1:4+e+2+g>a.length?!1:(this.r=new d(a.slice(4,4+e)),this.s=new d(a.slice(4+e+2,4+e+2+g)),!0)},c.prototype.toDER=function(a){var b=this.r.toArray(),c=this.s.toArray();128&b[0]&&(b=[0].concat(b)),128&c[0]&&(c=[0].concat(c));var d=b.length+c.length+4,e=[48,d,2,b.length];return e=e.concat(b,[2,c.length],c),f.encode(e,a)}},{"../../elliptic":67,"bn.js":65}],77:[function(a,b){function c(a){if(!(this instanceof c))return new c(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var b=f.toArray(a.entropy,a.entropyEnc),d=f.toArray(a.nonce,a.nonceEnc),e=f.toArray(a.pers,a.persEnc);g(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(b,d,e)}var d=a("hash.js"),e=a("../elliptic"),f=e.utils,g=f.assert;b.exports=c,c.prototype._init=function(a,b,c){var d=a.concat(b).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(d),this.reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new d.hmac(this.hash,this.K)},c.prototype._update=function(a){var b=this._hmac().update(this.V).update([0]);a&&(b=b.update(a)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=null),a=f.toBuffer(a,b),c=f.toBuffer(c,d),g(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this.reseed=1},c.prototype.generate=function(a,b,c,d){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof b&&(d=c,c=b,b=null),c&&(c=f.toArray(c,d),this._update(c));for(var e=[];e.length<a;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var g=e.slice(0,a);return this._update(c),this.reseed++,f.encode(g,b)}},{"../elliptic":67,"hash.js":80}],78:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=f(a[c].toString(16));return b}function f(a){return 1===a.length?"0"+a:a}function g(a,b){for(var c=[],d=1<<b+1,e=a.clone();e.cmpn(1)>=0;){var f;if(e.isOdd()){var g=e.andln(d-1);f=g>(d>>1)-1?(d>>1)-g:g,e.isubn(f)}else f=0;c.push(f);for(var h=0!==e.cmpn(0)&&0===e.andln(d-1)?b+1:1,i=1;h>i;i++)c.push(0);e.ishrn(h)}return c}function h(a,b){var c=[[],[]];a=a.clone(),b=b.clone();for(var d=0,e=0;a.cmpn(-d)>0||b.cmpn(-e)>0;){var f=a.andln(3)+d&3,g=b.andln(3)+e&3;3===f&&(f=-1),3===g&&(g=-1);var h;if(0===(1&f))h=0;else{var i=a.andln(7)+d&7;h=3!==i&&5!==i||2!==g?f:-f}c[0].push(h);var j;if(0===(1&g))j=0;else{var i=b.andln(7)+e&7;j=3!==i&&5!==i||2!==f?g:-g}c[1].push(j),2*d===h+1&&(d=1-d),2*e===j+1&&(e=1-e),a.ishrn(1),b.ishrn(1)}return c}var i=(a("bn.js"),c);i.assert=function(a,b){if(!a)throw new Error(b||"Assertion failed")},i.toArray=d,i.toHex=e,i.encode=function(a,b){return"hex"===b?e(a):a},i.zero2=f,i.getNAF=g,i.getJSF=h},{"bn.js":65}],79:[function(a,b){function c(a){this.rand=a}var d;if(b.exports=function(a){return d||(d=new c(null)),d.generate(a)},b.exports.Rand=c,c.prototype.generate=function(a){return this._rand(a)},"object"==typeof window)c.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.crypto.getRandomValues(b),b}:window.msCrypto&&window.msCrypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.msCrypto.getRandomValues(b),b}:function(){throw new Error("Not implemented yet")};else try{var e=a("crypto");c.prototype._rand=function(a){return e.randomBytes(a)}}catch(f){c.prototype._rand=function(a){for(var b=new Uint8Array(a),c=0;c<b.length;c++)b[c]=this.rand.getByte();return b}}},{}],80:[function(a,b,c){var d=c;d.utils=a("./hash/utils"),d.common=a("./hash/common"),d.sha=a("./hash/sha"),d.ripemd=a("./hash/ripemd"),d.hmac=a("./hash/hmac"),d.sha1=d.sha.sha1,d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.sha384=d.sha.sha384,d.sha512=d.sha.sha512,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":81,"./hash/hmac":82,"./hash/ripemd":83,"./hash/sha":84,"./hash/utils":85}],81:[function(a,b,c){function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var e=a("../hash"),f=e.utils,g=f.assert;c.BlockHash=d,d.prototype.update=function(a,b){if(a=f.toArray(a,b),this.pending=this.pending?this.pending.concat(a):a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var c=a.length%this._delta8;this.pending=a.slice(a.length-c,a.length),0===this.pending.length&&(this.pending=null),a=f.join32(a,0,a.length-c,this.endian);for(var d=0;d<a.length;d+=this._delta32)this._update(a,d,d+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),g(null===this.pending),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,b=this._delta8,c=b-(a+this.padLength)%b,d=new Array(c+this.padLength);d[0]=128;for(var e=1;c>e;e++)d[e]=0;if(a<<=3,"big"===this.endian){for(var f=8;f<this.padLength;f++)d[e++]=0;d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=a>>>24&255,d[e++]=a>>>16&255,d[e++]=a>>>8&255,d[e++]=255&a}else{d[e++]=255&a,d[e++]=a>>>8&255,d[e++]=a>>>16&255,d[e++]=a>>>24&255,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0;for(var f=8;f<this.padLength;f++)d[e++]=0}return d}},{"../hash":80}],82:[function(a,b,c){function d(a,b,c){return this instanceof d?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,void this._init(f.toArray(b,c))):new d(a,b,c)}var e=a("../hash"),f=e.utils,g=f.assert;b.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest()),g(a.length<=this.blockSize);for(var b=a.length;b<this.blockSize;b++)a.push(0);for(var b=0;b<a.length;b++)a[b]^=54;this.inner=(new this.Hash).update(a);for(var b=0;b<a.length;b++)a[b]^=106;this.outer=(new this.Hash).update(a)},d.prototype.update=function(a,b){return this.inner.update(a,b),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"../hash":80}],83:[function(a,b,c){function d(){return this instanceof d?(n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function e(a,b,c,d){return 15>=a?b^c^d:31>=a?b&c|~b&d:47>=a?(b|~c)^d:63>=a?b&d|c&~d:b^(c|~d)}function f(a){return 15>=a?0:31>=a?1518500249:47>=a?1859775393:63>=a?2400959708:2840853838}function g(a){return 15>=a?1352829926:31>=a?1548603684:47>=a?1836072691:63>=a?2053994217:0}var h=a("../hash"),i=h.utils,j=i.rotl32,k=i.sum32,l=i.sum32_3,m=i.sum32_4,n=h.common.BlockHash;i.inherits(d,n),c.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.h[0],d=this.h[1],h=this.h[2],i=this.h[3],n=this.h[4],s=c,t=d,u=h,v=i,w=n,x=0;80>x;x++){var y=k(j(m(c,e(x,d,h,i),a[o[x]+b],f(x)),q[x]),n);c=n,n=i,i=j(h,10),h=d,d=y,y=k(j(m(s,e(79-x,t,u,v),a[p[x]+b],g(x)),r[x]),w),s=w,w=v,v=j(u,10),u=t,t=y}y=l(this.h[1],h,v),this.h[1]=l(this.h[2],i,w),this.h[2]=l(this.h[3],n,s),this.h[3]=l(this.h[4],c,t),this.h[4]=l(this.h[0],d,u),this.h[0]=y},d.prototype._digest=function(a){return"hex"===a?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],q=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":80}],84:[function(a,b,c){function d(){return this instanceof d?(V.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=W,void(this.W=new Array(64))):new d}function e(){return this instanceof e?(d.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new e}function f(){return this instanceof f?(V.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=X,void(this.W=new Array(160))):new f}function g(){return this instanceof g?(f.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new g}function h(){return this instanceof h?(V.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new h}function i(a,b,c){return a&b^~a&c}function j(a,b,c){return a&b^a&c^b&c}function k(a,b,c){return a^b^c}function l(a){return F(a,2)^F(a,13)^F(a,22)}function m(a){return F(a,6)^F(a,11)^F(a,25)}function n(a){return F(a,7)^F(a,18)^a>>>3}function o(a){return F(a,17)^F(a,19)^a>>>10}function p(a,b,c,d){return 0===a?i(b,c,d):1===a||3===a?k(b,c,d):2===a?j(b,c,d):void 0}function q(a,b,c,d,e){var f=a&c^~a&e;return 0>f&&(f+=4294967296),f}function r(a,b,c,d,e,f){var g=b&d^~b&f;return 0>g&&(g+=4294967296),g}function s(a,b,c,d,e){var f=a&c^a&e^c&e;return 0>f&&(f+=4294967296),f}function t(a,b,c,d,e,f){var g=b&d^b&f^d&f;return 0>g&&(g+=4294967296),g}function u(a,b){var c=K(a,b,28),d=K(b,a,2),e=K(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function v(a,b){var c=L(a,b,28),d=L(b,a,2),e=L(b,a,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function w(a,b){var c=K(a,b,14),d=K(a,b,18),e=K(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function x(a,b){var c=L(a,b,14),d=L(a,b,18),e=L(b,a,9),f=c^d^e;return 0>f&&(f+=4294967296),f}function y(a,b){var c=K(a,b,1),d=K(a,b,8),e=M(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function z(a,b){var c=L(a,b,1),d=L(a,b,8),e=N(a,b,7),f=c^d^e;return 0>f&&(f+=4294967296),f}function A(a,b){var c=K(a,b,19),d=K(b,a,29),e=M(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}function B(a,b){var c=L(a,b,19),d=L(b,a,29),e=N(a,b,6),f=c^d^e;return 0>f&&(f+=4294967296),f}var C=a("../hash"),D=C.utils,E=D.assert,F=D.rotr32,G=D.rotl32,H=D.sum32,I=D.sum32_4,J=D.sum32_5,K=D.rotr64_hi,L=D.rotr64_lo,M=D.shr64_hi,N=D.shr64_lo,O=D.sum64,P=D.sum64_hi,Q=D.sum64_lo,R=D.sum64_4_hi,S=D.sum64_4_lo,T=D.sum64_5_hi,U=D.sum64_5_lo,V=C.common.BlockHash,W=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],X=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Y=[1518500249,1859775393,2400959708,3395469782];D.inherits(d,V),c.sha256=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=I(o(c[d-2]),c[d-7],n(c[d-15]),c[d-16]);var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],k=this.h[4],p=this.h[5],q=this.h[6],r=this.h[7];E(this.k.length===c.length);for(var d=0;d<c.length;d++){var s=J(r,m(k),i(k,p,q),this.k[d],c[d]),t=H(l(e),j(e,f,g));r=q,q=p,p=k,k=H(h,s),h=g,g=f,f=e,e=H(s,t)}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],k),this.h[5]=H(this.h[5],p),this.h[6]=H(this.h[6],q),this.h[7]=H(this.h[7],r)},d.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(e,d),c.sha224=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,7),"big"):D.split32(this.h.slice(0,7),"big")},D.inherits(f,V),c.sha512=f,f.blockSize=1024,f.outSize=512,f.hmacStrength=192,f.padLength=128,f.prototype._prepareBlock=function(a,b){for(var c=this.W,d=0;32>d;d++)c[d]=a[b+d];for(;d<c.length;d+=2){var e=A(c[d-4],c[d-3]),f=B(c[d-4],c[d-3]),g=c[d-14],h=c[d-13],i=y(c[d-30],c[d-29]),j=z(c[d-30],c[d-29]),k=c[d-32],l=c[d-31];c[d]=R(e,f,g,h,i,j,k,l),c[d+1]=S(e,f,g,h,i,j,k,l)}},f.prototype._update=function(a,b){this._prepareBlock(a,b);var c=this.W,d=this.h[0],e=this.h[1],f=this.h[2],g=this.h[3],h=this.h[4],i=this.h[5],j=this.h[6],k=this.h[7],l=this.h[8],m=this.h[9],n=this.h[10],o=this.h[11],p=this.h[12],y=this.h[13],z=this.h[14],A=this.h[15];E(this.k.length===c.length);for(var B=0;B<c.length;B+=2){var C=z,D=A,F=w(l,m),G=x(l,m),H=q(l,m,n,o,p,y),I=r(l,m,n,o,p,y),J=this.k[B],K=this.k[B+1],L=c[B],M=c[B+1],N=T(C,D,F,G,H,I,J,K,L,M),R=U(C,D,F,G,H,I,J,K,L,M),C=u(d,e),D=v(d,e),F=s(d,e,f,g,h,i),G=t(d,e,f,g,h,i),S=P(C,D,F,G),V=Q(C,D,F,G);z=p,A=y,p=n,y=o,n=l,o=m,l=P(j,k,N,R),m=Q(k,k,N,R),j=h,k=i,h=f,i=g,f=d,g=e,d=P(N,R,S,V),e=Q(N,R,S,V)}O(this.h,0,d,e),O(this.h,2,f,g),O(this.h,4,h,i),O(this.h,6,j,k),O(this.h,8,l,m),O(this.h,10,n,o),O(this.h,12,p,y),O(this.h,14,z,A)},f.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")},D.inherits(g,f),c.sha384=g,g.blockSize=1024,g.outSize=384,g.hmacStrength=192,g.padLength=128,g.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h.slice(0,12),"big"):D.split32(this.h.slice(0,12),"big")},D.inherits(h,V),c.sha1=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(a,b){for(var c=this.W,d=0;16>d;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=G(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);for(var e=this.h[0],f=this.h[1],g=this.h[2],h=this.h[3],i=this.h[4],d=0;d<c.length;d++){var j=~~(d/20),k=J(G(e,5),p(j,f,g,h),i,c[d],Y[j]);i=h,h=g,g=G(f,30),f=e,e=k}this.h[0]=H(this.h[0],e),this.h[1]=H(this.h[1],f),this.h[2]=H(this.h[2],g),this.h[3]=H(this.h[3],h),this.h[4]=H(this.h[4],i)},h.prototype._digest=function(a){return"hex"===a?D.toHex32(this.h,"big"):D.split32(this.h,"big")}},{"../hash":80}],85:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=h(a[c].toString(16));return b}function f(a){var b=a>>>24|a>>>8&65280|a<<8&16711680|(255&a)<<24;return b>>>0}function g(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];"little"===b&&(e=f(e)),c+=i(e.toString(16))}return c}function h(a){return 1===a.length?"0"+a:a}function i(a){return 7===a.length?"0"+a:6===a.length?"00"+a:5===a.length?"000"+a:4===a.length?"0000"+a:3===a.length?"00000"+a:2===a.length?"000000"+a:1===a.length?"0000000"+a:a}function j(a,b,c,d){var e=c-b;r(e%4===0);for(var f=new Array(e/4),g=0,h=b;g<f.length;g++,h+=4){var i;i="big"===d?a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3]:a[h+3]<<24|a[h+2]<<16|a[h+1]<<8|a[h],f[g]=i>>>0}return f}function k(a,b){for(var c=new Array(4*a.length),d=0,e=0;d<a.length;d++,e+=4){var f=a[d];"big"===b?(c[e]=f>>>24,c[e+1]=f>>>16&255,c[e+2]=f>>>8&255,c[e+3]=255&f):(c[e+3]=f>>>24,c[e+2]=f>>>16&255,c[e+1]=f>>>8&255,c[e]=255&f)}return c}function l(a,b){return a>>>b|a<<32-b}function m(a,b){return a<<b|a>>>32-b}function n(a,b){return a+b>>>0}function o(a,b,c){return a+b+c>>>0}function p(a,b,c,d){return a+b+c+d>>>0}function q(a,b,c,d,e){return a+b+c+d+e>>>0}function r(a,b){if(!a)throw new Error(b||"Assertion failed")}function s(a,b,c,d){var e=a[b],f=a[b+1],g=d+f>>>0,h=(d>g?1:0)+c+e;a[b]=h>>>0,a[b+1]=g}function t(a,b,c,d){var e=b+d>>>0,f=(b>e?1:0)+a+c;return f>>>0}function u(a,b,c,d){var e=b+d;return e>>>0}function v(a,b,c,d,e,f,g,h){var i=0,j=b;j=j+d>>>0,i+=b>j?1:0,j=j+f>>>0,i+=f>j?1:0,j=j+h>>>0,i+=h>j?1:0;var k=a+c+e+g+i;return k>>>0}function w(a,b,c,d,e,f,g,h){var i=b+d+f+h;return i>>>0}function x(a,b,c,d,e,f,g,h,i,j){var k=0,l=b;l=l+d>>>0,k+=b>l?1:0,l=l+f>>>0,k+=f>l?1:0,l=l+h>>>0,k+=h>l?1:0,l=l+j>>>0,k+=j>l?1:0;var m=a+c+e+g+i+k;return m>>>0}function y(a,b,c,d,e,f,g,h,i,j){var k=b+d+f+h+j;return k>>>0}function z(a,b,c){var d=b<<32-c|a>>>c;return d>>>0}function A(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}function B(a,b,c){return a>>>c}function C(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}var D=c,E=a("inherits");D.toArray=d,D.toHex=e,D.htonl=f,D.toHex32=g,D.zero2=h,D.zero8=i,D.join32=j,D.split32=k,D.rotr32=l,D.rotl32=m,D.sum32=n,D.sum32_3=o,D.sum32_4=p,D.sum32_5=q,D.assert=r,D.inherits=E,c.sum64=s,c.sum64_hi=t,c.sum64_lo=u,c.sum64_4_hi=v,c.sum64_4_lo=w,c.sum64_5_hi=x,c.sum64_5_lo=y,c.rotr64_hi=z,c.rotr64_lo=A,c.shr64_hi=B,c.shr64_lo=C},{inherits:184}],86:[function(a,b){b.exports={name:"elliptic",version:"1.0.1",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^1.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},gitHead:"17dc013761dd1efcfb868e2b06b0b897627b40be",_id:"elliptic@1.0.1",_shasum:"d180376b66a17d74995c837796362ac4d22aefe3",_from:"elliptic@>=1.0.0 <2.0.0",_npmVersion:"1.4.28",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"d180376b66a17d74995c837796362ac4d22aefe3",tarball:"http://ci.strongloop.com:4873/elliptic/-/elliptic-1.0.1.tgz"},directories:{},_resolved:"http://ci.strongloop.com:4873/elliptic/-/elliptic-1.0.1.tgz",readme:"ERROR: No README data found!"}},{}],87:[function(a,b){(function(a){b.exports=function(b,c,d,e){e/=8;for(var f,g,h,i=0,j=new a(e),k=0;;){if(f=b.createHash("md5"),k++>0&&f.update(g),f.update(c),f.update(d),g=f.digest(),h=0,e>0)for(;;){if(0===e)break;if(h===g.length)break;j[i++]=g[h++],e--}if(0===e)break}for(h=0;h<g.length;h++)g[h]=0;return j}}).call(this,a("buffer").Buffer)},{buffer:40}],88:[function(a,b){b.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],89:[function(a,b,c){var d=a("asn1.js"),e=a("asn1.js-rfc3280"),f=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});c.RSAPrivateKey=f;var g=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});c.RSAPublicKey=g;var h=e.SubjectPublicKeyInfo;c.PublicKey=h;var i=d.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});c.ECPublicKey=i;var j=d.define("ECPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});c.ECPrivateWrap=j;var k=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(e.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});c.PrivateKey=k;var l=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),m=d.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()))});c.EncryptedPrivateKey=l;var n=d.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(m),this.key("subjectPublicKey").bitstr())});c.DSAPublicKey=n;var o=d.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]())),this.key("subjectPrivateKey").octstr())});c.DSAPrivateWrap=o;var p=d.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});c.DSAPrivateKey=p,c.DSAparam=d.define("DSAparam",function(){this["int"]()});var q=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(r),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=q;var r=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),s=d.define("ECPrivateKey2",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});c.ECPrivateKey2=s,c.signature=d.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":93,"asn1.js-rfc3280":92}],90:[function(a,b){(function(c){function d(a){for(var b=[];a;){if(a.length<64){b.push(a);break}b.push(a.slice(0,64)),a=a.slice(64)}return b.join("\n")}var e=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,f=/^-----BEGIN (.*)-----\n/,g=a("./EVP_BytesToKey");b.exports=function(a,b,h){var i=a.toString(),j=i.match(e);if(!j)return a;var k="aes"+j[1],l=new c(j[2],"hex"),m=new c(j[3].replace(/\n\r?/g,""),"base64"),n=g(h,b,l.slice(0,8),parseInt(j[1])),o=[],p=h.createDecipheriv(k,n,l);o.push(p.update(m)),o.push(p["final"]());var q=c.concat(o).toString("base64"),r=i.match(f)[1];return"-----BEGIN "+r+"-----\n"+d(q)+"\n-----END "+r+"-----\n"}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":87,buffer:40}],91:[function(a,b){(function(c){function d(a,b){var d;"object"!=typeof a||c.isBuffer(a)||(d=a.passphrase,a=a.key),"string"==typeof a&&(a=new c(a)),d&&(a=i(a,d,b));var h,j,k=f.strip(a),l=k.tag,m=new c(k.base64,"base64");switch(l){case"PUBLIC KEY":switch(j=g.PublicKey.decode(m,"der"),h=j.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPublicKey.decode(j.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:g.ECPublicKey.decode(m,"der")};case"1.2.840.10040.4.1":return j=g.DSAPublicKey.decode(m,"der"),j.algorithm.parameters.pub_key=g.DSAparam.decode(j.subjectPublicKey.data,"der"),{type:"dsa",data:j.algorithm.parameters};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+l);case"ENCRYPTED PRIVATE KEY":m=g.EncryptedPrivateKey.decode(m,"der"),m=e(b,m,d);case"PRIVATE KEY":switch(j=g.PrivateKey.decode(m,"der"),h=j.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPrivateKey.decode(j.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return j=g.ECPrivateWrap.decode(m,"der"),{curve:j.algorithm.curve,privateKey:g.ECPrivateKey.decode(j.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return j=g.DSAPrivateWrap.decode(m,"der"),j.algorithm.parameters.priv_key=g.DSAparam.decode(j.subjectPrivateKey,"der"),{type:"dsa",params:j.algorithm.parameters};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+l);case"RSA PUBLIC KEY":return g.RSAPublicKey.decode(m,"der");

case"RSA PRIVATE KEY":return g.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:g.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return m=g.ECPrivateKey.decode(m,"der"),{curve:m.parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+l)}}function e(a,b,d){var e=b.algorithm.decrypt.kde.kdeparams.salt,f=b.algorithm.decrypt.kde.kdeparams.iters,g=h[b.algorithm.decrypt.cipher.algo.join(".")],i=b.algorithm.decrypt.cipher.iv,j=b.subjectPrivateKey,k=parseInt(g.split("-")[1],10)/8,l=a.pbkdf2Sync(d,e,f,k),m=a.createDecipheriv(g,l,i),n=[];return n.push(m.update(j)),n.push(m["final"]()),c.concat(n)}var f=a("pemstrip"),g=a("./asn1"),h=a("./aesid.json"),i=a("./fixProc");b.exports=d,d.signature=g.signature}).call(this,a("buffer").Buffer)},{"./aesid.json":88,"./asn1":89,"./fixProc":90,buffer:40,pemstrip:106}],92:[function(a,b,c){try{var d=a("asn1.js")}catch(e){var d=a("../..")}var f=d.define("CRLReason",function(){this["enum"]({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});c.CRLReason=f;var g=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});c.AlgorithmIdentifier=g;var h=d.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(i),this.key("signatureAlgorithm").use(g),this.key("signature").bitstr())});c.Certificate=h;var i=d.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(j),this.key("serialNumber").use(k),this.key("signature").use(g),this.key("issuer").use(r),this.key("validity").use(l),this.key("subject").use(r),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").optional().explicit(1).use(n),this.key("subjectUniqueID").optional().explicit(2).use(n),this.key("extensions").optional().explicit(3).use(p))});c.TBSCertificate=i;var j=d.define("Version",function(){this["int"]({0:"v1",1:"v2",2:"v3"})});c.Version=j;var k=d.define("CertificateSerialNumber",function(){this["int"]()});c.CertificateSerialNumber=k;var l=d.define("Validity",function(){this.seq().obj(this.key("notBefore").use(m),this.key("notAfter").use(m))});c.Validity=l;var m=d.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});c.Time=m;var n=d.define("UniqueIdentifier",function(){this.bitstr()});c.UniqueIdentifier=n;var o=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(g),this.key("subjectPublicKey").bitstr())});c.SubjectPublicKeyInfo=o;var p=d.define("Extensions",function(){this.seqof(q)});c.Extensions=p;var q=d.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});c.Extension=q;var r=d.define("Name",function(){this.choice({rdn:this.use(s)})});c.Name=r;var s=d.define("RDNSequence",function(){this.seqof(t)});c.RDNSequence=s;var t=d.define("RelativeDistinguishedName",function(){this.setof(u)});c.RelativeDistinguishedName=t;var u=d.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(v),this.key("value").use(w))});c.AttributeTypeAndValue=u;var v=d.define("AttributeType",function(){this.objid()});c.AttributeType=v;var w=d.define("AttributeValue",function(){this.any()});c.AttributeValue=w},{"asn1.js":93}],93:[function(a,b,c){var d=c;d.bignum=a("bn.js"),d.define=a("./asn1/api").define,d.base=a("./asn1/base"),d.constants=a("./asn1/constants"),d.decoders=a("./asn1/decoders"),d.encoders=a("./asn1/encoders")},{"./asn1/api":94,"./asn1/base":96,"./asn1/constants":100,"./asn1/decoders":102,"./asn1/encoders":104,"bn.js":65}],94:[function(a,b,c){function d(a,b){this.name=a,this.body=b,this.decoders={},this.encoders={}}var e=a("../asn1"),f=a("inherits"),g=a("vm"),h=c;h.define=function(a,b){return new d(a,b)},d.prototype._createNamed=function(a){var b=g.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return f(b,a),b.prototype._initNamed=function(b){a.call(this,b)},new b(this)},d.prototype._getDecoder=function(a){return this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},d.prototype.decode=function(a,b,c){return this._getDecoder(b).decode(a,c)},d.prototype._getEncoder=function(a){return this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},d.prototype.encode=function(a,b,c){return this._getEncoder(b).encode(a,c)}},{"../asn1":93,inherits:184,vm:208}],95:[function(a,b,c){function d(a,b){return g.call(this,b),h.isBuffer(a)?(this.base=a,this.offset=0,void(this.length=a.length)):void this.error("Input not Buffer")}function e(a,b){if(Array.isArray(a))this.length=0,this.value=a.map(function(a){return a instanceof e||(a=new e(a,b)),this.length+=a.length,a},this);else if("number"==typeof a){if(!(a>=0&&255>=a))return b.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if("string"==typeof a)this.value=a,this.length=h.byteLength(a);else{if(!h.isBuffer(a))return b.error("Unsupported type: "+typeof a);this.value=a,this.length=a.length}}var f=a("inherits"),g=a("../base").Reporter,h=a("buffer").Buffer;f(d,g),c.DecoderBuffer=d,d.prototype.save=function(){return{offset:this.offset}},d.prototype.restore=function(a){var b=new d(this.base);return b.offset=a.offset,b.length=this.offset,this.offset=a.offset,b},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},d.prototype.skip=function(a,b){if(!(this.offset+a<=this.length))return this.error(b||"DecoderBuffer overrun");var c=new d(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},d.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)},c.EncoderBuffer=e,e.prototype.join=function(a,b){return a||(a=new h(this.length)),b||(b=0),0===this.length?a:(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,b),b+=c.length}):("number"==typeof this.value?a[b]=this.value:"string"==typeof this.value?a.write(this.value,b):h.isBuffer(this.value)&&this.value.copy(a,b),b+=this.length),a)}},{"../base":96,buffer:40,inherits:184}],96:[function(a,b,c){var d=c;d.Reporter=a("./reporter").Reporter,d.DecoderBuffer=a("./buffer").DecoderBuffer,d.EncoderBuffer=a("./buffer").EncoderBuffer,d.Node=a("./node")},{"./buffer":95,"./node":97,"./reporter":98}],97:[function(a,b){function c(a,b){var c={};this._baseState=c,c.enc=a,c.parent=b||null,c.children=null,c.tag=null,c.args=null,c.reverseArgs=null,c.choice=null,c.optional=!1,c.any=!1,c.obj=!1,c.use=null,c.useDecoder=null,c.key=null,c["default"]=null,c.explicit=null,c.implicit=null,c.parent||(c.children=[],this._wrap())}var d=a("../base").Reporter,e=a("../base").EncoderBuffer,f=a("minimalistic-assert"),g=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],h=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(g),i=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];b.exports=c;var j=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];c.prototype.clone=function(){var a=this._baseState,b={};j.forEach(function(c){b[c]=a[c]});var c=new this.constructor(b.parent);return c._baseState=b,c},c.prototype._wrap=function(){var a=this._baseState;h.forEach(function(b){this[b]=function(){var c=new this.constructor(this);return a.children.push(c),c[b].apply(c,arguments)}},this)},c.prototype._init=function(a){var b=this._baseState;f(null===b.parent),a.call(this),b.children=b.children.filter(function(a){return a._baseState.parent===this},this),f.equal(b.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var b=this._baseState,c=a.filter(function(a){return a instanceof this.constructor},this);a=a.filter(function(a){return!(a instanceof this.constructor)},this),0!==c.length&&(f(null===b.children),b.children=c,c.forEach(function(a){a._baseState.parent=this},this)),0!==a.length&&(f(null===b.args),b.args=a,b.reverseArgs=a.map(function(a){if("object"!=typeof a||a.constructor!==Object)return a;var b={};return Object.keys(a).forEach(function(c){c==(0|c)&&(c|=0);var d=a[c];b[d]=c}),b}))},i.forEach(function(a){c.prototype[a]=function(){var b=this._baseState;throw new Error(a+" not implemented for encoding: "+b.enc)}}),g.forEach(function(a){c.prototype[a]=function(){var b=this._baseState,c=Array.prototype.slice.call(arguments);return f(null===b.tag),b.tag=a,this._useArgs(c),this}}),c.prototype.use=function(a){var b=this._baseState;return f(null===b.use),b.use=a,this},c.prototype.optional=function(){var a=this._baseState;return a.optional=!0,this},c.prototype.def=function(a){var b=this._baseState;return f(null===b["default"]),b["default"]=a,b.optional=!0,this},c.prototype.explicit=function(a){var b=this._baseState;return f(null===b.explicit&&null===b.implicit),b.explicit=a,this},c.prototype.implicit=function(a){var b=this._baseState;return f(null===b.explicit&&null===b.implicit),b.implicit=a,this},c.prototype.obj=function(){var a=this._baseState,b=Array.prototype.slice.call(arguments);return a.obj=!0,0!==b.length&&this._useArgs(b),this},c.prototype.key=function(a){var b=this._baseState;return f(null===b.key),b.key=a,this},c.prototype.any=function(){var a=this._baseState;return a.any=!0,this},c.prototype.choice=function(a){var b=this._baseState;return f(null===b.choice),b.choice=a,this._useArgs(Object.keys(a).map(function(b){return a[b]})),this},c.prototype._decode=function(a){var b=this._baseState;if(null===b.parent)return a.wrapResult(b.children[0]._decode(a));var c,d=b["default"],e=!0;if(null!==b.key&&(c=a.enterKey(b.key)),b.optional&&(e=this._peekTag(a,null!==b.explicit?b.explicit:null!==b.implicit?b.implicit:b.tag||0),a.isError(e)))return e;var f;if(b.obj&&e&&(f=a.enterObject()),e){if(null!==b.explicit){var g=this._decodeTag(a,b.explicit);if(a.isError(g))return g;a=g}if(null===b.use&&null===b.choice){if(b.any)var h=a.save();var i=this._decodeTag(a,null!==b.implicit?b.implicit:b.tag,b.any);if(a.isError(i))return i;b.any?d=a.raw(h):a=i}if(d=b.any?d:null===b.choice?this._decodeGeneric(b.tag,a):this._decodeChoice(a),a.isError(d))return d;if(!b.any&&null===b.choice&&null!==b.children){var j=b.children.some(function(b){b._decode(a)});if(j)return err}}return b.obj&&e&&(d=a.leaveObject(f)),null===b.key||null===d&&e!==!0||a.leaveKey(c,b.key,d),d},c.prototype._decodeGeneric=function(a,b){var c=this._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(b,a,c.args[0]):"octstr"===a||"bitstr"===a||"ia5str"===a?this._decodeStr(b,a):"objid"===a&&c.args?this._decodeObjid(b,c.args[0],c.args[1]):"objid"===a?this._decodeObjid(b,null,null):"gentime"===a||"utctime"===a?this._decodeTime(b,a):"null_"===a?this._decodeNull(b):"bool"===a?this._decodeBool(b):"int"===a||"enum"===a?this._decodeInt(b,c.args&&c.args[0]):null!==c.use?this._getUse(c.use,b._reporterState.obj)._decode(b):b.error("unknown tag: "+a)},c.prototype._getUse=function(a,b){var c=this._baseState;return c.useDecoder=this._use(a,b),f(null===c.useDecoder._baseState.parent),c.useDecoder=c.useDecoder._baseState.children[0],c.implicit!==c.useDecoder._baseState.implicit&&(c.useDecoder=c.useDecoder.clone(),c.useDecoder._baseState.implicit=c.implicit),c.useDecoder},c.prototype._decodeChoice=function(a){var b=this._baseState,c=null,d=!1;return Object.keys(b.choice).some(function(e){var f=a.save(),g=b.choice[e];try{var h=g._decode(a);if(a.isError(h))return!1;c={type:e,value:h},d=!0}catch(i){return a.restore(f),!1}return!0},this),d?c:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new e(a,this.reporter)},c.prototype._encode=function(a,b,c){var d=this._baseState;if(null===d["default"]||d["default"]!==a){var e=this._encodeValue(a,b,c);if(void 0!==e&&!this._skipDefault(e,b,c))return e}},c.prototype._encodeValue=function(a,b,c){var e=this._baseState;if(null===e.parent)return e.children[0]._encode(a,b||new d);var f=null;if(this.reporter=b,e.optional&&void 0===a){if(null===e["default"])return;a=e["default"]}var g=null,h=!1;if(e.any)f=this._createEncoderBuffer(a);else if(e.choice)f=this._encodeChoice(a,b);else if(e.children)g=e.children.map(function(c){if("null_"===c._baseState.tag)return c._encode(null,b,a);if(null===c._baseState.key)return b.error("Child should have a key");var d=b.enterKey(c._baseState.key);if("object"!=typeof a)return b.error("Child expected, but input is not object");var e=c._encode(a[c._baseState.key],b,a);return b.leaveKey(d),e},this).filter(function(a){return a}),g=this._createEncoderBuffer(g);else if("seqof"===e.tag||"setof"===e.tag){if(!e.args||1!==e.args.length)return b.error("Too many args for : "+e.tag);if(!Array.isArray(a))return b.error("seqof/setof, but data is not Array");var i=this.clone();i._baseState.implicit=null,g=this._createEncoderBuffer(a.map(function(c){var d=this._baseState;return this._getUse(d.args[0],a)._encode(c,b)},i))}else null!==e.use?f=this._getUse(e.use,c)._encode(a,b):(g=this._encodePrimitive(e.tag,a),h=!0);var f;if(!e.any&&null===e.choice){var j=null!==e.implicit?e.implicit:e.tag,k=null===e.implicit?"universal":"context";null===j?null===e.use&&b.error("Tag could be ommited only for .use()"):null===e.use&&(f=this._encodeComposite(j,h,k,g))}return null!==e.explicit&&(f=this._encodeComposite(e.explicit,!1,"context",f)),f},c.prototype._encodeChoice=function(a,b){var c=this._baseState,d=c.choice[a.type];return d||f(!1,a.type+" not found in "+JSON.stringify(Object.keys(c.choice))),d._encode(a.value,b)},c.prototype._encodePrimitive=function(a,b){var c=this._baseState;if("octstr"===a||"bitstr"===a||"ia5str"===a)return this._encodeStr(b,a);if("objid"===a&&c.args)return this._encodeObjid(b,c.reverseArgs[0],c.args[1]);if("objid"===a)return this._encodeObjid(b,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(b,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(b,c.args&&c.reverseArgs[0]);if("bool"===a)return this._encodeBool(b);throw new Error("Unsupported tag: "+a)}},{"../base":96,"minimalistic-assert":105}],98:[function(a,b,c){function d(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function e(a,b){this.path=a,this.rethrow(b)}var f=a("inherits");c.Reporter=d,d.prototype.isError=function(a){return a instanceof e},d.prototype.enterKey=function(a){return this._reporterState.path.push(a)},d.prototype.leaveKey=function(a,b,c){var d=this._reporterState;d.path=d.path.slice(0,a-1),null!==d.obj&&(d.obj[b]=c)},d.prototype.enterObject=function(){var a=this._reporterState,b=a.obj;return a.obj={},b},d.prototype.leaveObject=function(a){var b=this._reporterState,c=b.obj;return b.obj=a,c},d.prototype.error=function(a){var b,c=this._reporterState,d=a instanceof e;if(b=d?a:new e(c.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),a.message||a,a.stack),!c.options.partial)throw b;return d||c.errors.push(b),b},d.prototype.wrapResult=function(a){var b=this._reporterState;return b.options.partial?{result:this.isError(a)?null:a,errors:b.errors}:a},f(e,Error),e.prototype.rethrow=function(a){return this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,e),this}},{inherits:184}],99:[function(a,b,c){var d=a("../constants");c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=d._reverse(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=d._reverse(c.tag)},{"../constants":100}],100:[function(a,b,c){var d=c;d._reverse=function(a){var b={};return Object.keys(a).forEach(function(c){(0|c)==c&&(c=0|c);var d=a[c];b[d]=c}),b},d.der=a("./der")},{"./der":99}],101:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){i.Node.call(this,"der",a)}function e(a,b){var c=a.readUInt8(b);if(a.isError(c))return c;var d=k.tagClass[c>>6],e=0===(32&c);if(31===(31&c)){var f=c;for(c=0;128===(128&f);){if(f=a.readUInt8(b),a.isError(f))return f;c<<=7,c|=127&f}}else c&=31;var g=k.tag[c];return{cls:d,primitive:e,tag:c,tagStr:g}}function f(a,b,c){var d=a.readUInt8(c);if(a.isError(d))return d;if(!b&&128===d)return null;if(0===(128&d))return d;var e=127&d;if(e>=4)return a.error("length octect is too long");d=0;for(var f=0;e>f;f++){d<<=8;var g=a.readUInt8(c);if(a.isError(g))return g;d|=g}return d}var g=a("inherits"),h=a("../../asn1"),i=h.base,j=h.bignum,k=h.constants.der;b.exports=c,c.prototype.decode=function(a,b){return a instanceof i.DecoderBuffer||(a=new i.DecoderBuffer(a,b)),this.tree._decode(a,b)},g(d,i.Node),d.prototype._peekTag=function(a,b){if(a.isEmpty())return!1;var c=a.save(),d=e(a,'Failed to peek tag: "'+b+'"');return a.isError(d)?d:(a.restore(c),d.tag===b||d.tagStr===b)},d.prototype._decodeTag=function(a,b,c){var d=e(a,'Failed to decode tag of "'+b+'"');if(a.isError(d))return d;var g=f(a,d.primitive,'Failed to get length of "'+b+'"');if(a.isError(g))return g;if(!c&&d.tag!==b&&d.tagStr!==b&&d.tagStr+"of"!==b)return a.error('Failed to match tag: "'+b+'"');if(d.primitive||null!==g)return a.skip(g,'Failed to match body of: "'+b+'"');var h=a.start(),i=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+this.tag+'"');return a.isError(i)?i:a.cut(h)},d.prototype._skipUntilEnd=function(a,b){for(;;){var c=e(a,b);if(a.isError(c))return c;var d=f(a,c.primitive,b);if(a.isError(d))return d;var g;if(g=c.primitive||null!==d?a.skip(d):this._skipUntilEnd(a,b),a.isError(g))return g;if("end"===c.tagStr)break}},d.prototype._decodeList=function(a,b,c){for(var d=[];!a.isEmpty();){var e=this._peekTag(a,"end");if(a.isError(e))return e;var f=c.decode(a,"der");if(a.isError(f)&&e)break;d.push(f)}return d},d.prototype._decodeStr=function(a,b){if("octstr"===b)return a.raw();if("bitstr"===b){var c=a.readUInt8();return a.isError(c)?c:{unused:c,data:a.raw()}}return"ia5str"===b?a.raw().toString():this.error("Decoding of string type: "+b+" unsupported")},d.prototype._decodeObjid=function(a,b,c){for(var d=[],e=0;!a.isEmpty();){var f=a.readUInt8();e<<=7,e|=127&f,0===(128&f)&&(d.push(e),e=0)}128&f&&d.push(e);var g=d[0]/40|0,h=d[0]%40;return result=c?d:[g,h].concat(d.slice(1)),b&&(result=b[result.join(" ")]),result},d.prototype._decodeTime=function(a,b){var c=a.raw().toString();if("gentime"===b)var d=0|c.slice(0,4),e=0|c.slice(4,6),f=0|c.slice(6,8),g=0|c.slice(8,10),h=0|c.slice(10,12),i=0|c.slice(12,14);else{if("utctime"!==b)return this.error("Decoding "+b+" time is not supported yet");var d=0|c.slice(0,2),e=0|c.slice(2,4),f=0|c.slice(4,6),g=0|c.slice(6,8),h=0|c.slice(8,10),i=0|c.slice(10,12);d=70>d?2e3+d:1900+d}return Date.UTC(d,e-1,f,g,h,i,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(a){var b=a.readUInt8();return a.isError(b)?b:0!==b},d.prototype._decodeInt=function(a,b){var c=0,d=a.raw();if(d.length>3)return new j(d);for(;!a.isEmpty();){c<<=8;var e=a.readUInt8();if(a.isError(e))return e;c|=e}return b&&(c=b[c]||c),c},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getDecoder("der").tree}},{"../../asn1":93,inherits:184}],102:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":101}],103:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){j.Node.call(this,"der",a)}function e(a){return 10>=a?"0"+a:a}function f(a,b,c,d){var e;if("seqof"===a?a="seq":"setof"===a&&(a="set"),l.tagByName.hasOwnProperty(a))e=l.tagByName[a];else{if("number"!=typeof a||(0|a)!==a)return d.error("Unknown tag: "+a);e=a}return e>=31?d.error("Multi-octet tag encoding unsupported"):(b||(e|=32),e|=l.tagClassByName[c||"universal"]<<6)}var g=a("inherits"),h=a("buffer").Buffer,i=a("../../asn1"),j=i.base,k=i.bignum,l=i.constants.der;b.exports=c,c.prototype.encode=function(a,b){return this.tree._encode(a,b).join()},g(d,j.Node),d.prototype._encodeComposite=function(a,b,c,d){var e=f(a,b,c,this.reporter);if(d.length<128){var g=new h(2);return g[0]=e,g[1]=d.length,this._createEncoderBuffer([g,d])}for(var i=1,j=d.length;j>=256;j>>=8)i++;var g=new h(2+i);g[0]=e,g[1]=128|i;for(var j=1+i,k=d.length;k>0;j--,k>>=8)g[j]=255&k;return this._createEncoderBuffer([g,d])},d.prototype._encodeStr=function(a,b){return"octstr"===b?this._createEncoderBuffer(a):"bitstr"===b?this._createEncoderBuffer([0|a.unused,a.data]):"ia5str"===b?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: "+b+" unsupported")},d.prototype._encodeObjid=function(a,b,c){if("string"==typeof a){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(a))return this.reporter.error("objid not found in values map");a=b[a].split(/\s+/g);for(var d=0;d<a.length;d++)a[d]|=0}else Array.isArray(a)&&(a=a.slice());if(!Array.isArray(a))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(a));if(!c){if(a[1]>=40)return this.reporter.error("Second objid identifier OOB");a.splice(0,2,40*a[0]+a[1])}for(var e=0,d=0;d<a.length;d++){var f=a[d];for(e++;f>=128;f>>=7)e++}for(var g=new h(e),i=g.length-1,d=a.length-1;d>=0;d--){var f=a[d];for(g[i--]=127&f;(f>>=7)>0;)g[i--]=128|127&f}return this._createEncoderBuffer(g)},d.prototype._encodeTime=function(a,b){var c,d=new Date(a);return"gentime"===b?c=[d.getFullYear(),e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):"utctime"===b?c=[d.getFullYear()%100,e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(c,"octstr")},d.prototype._encodeNull=function(){return this._createEncoderBuffer("")},d.prototype._encodeInt=function(a,b){if("string"==typeof a){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(a))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(a));a=b[a]}if(null!==k&&a instanceof k){var c=a.toArray();a.sign===!1&&128&c[0]&&c.unshift(0),a=new h(c)}if(h.isBuffer(a)){var d=a.length;0===a.length&&d++;var e=new h(d);return a.copy(e),0===a.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>a)return this._createEncoderBuffer(a);if(256>a)return this._createEncoderBuffer([0,a]);for(var d=1,f=a;f>=256;f>>=8)d++;for(var e=new Array(d),f=e.length-1;f>=0;f--)e[f]=255&a,a>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new h(e))},d.prototype._encodeBool=function(a){return this._createEncoderBuffer(a?255:0)},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getEncoder("der").tree},d.prototype._skipDefault=function(a,b,c){var d,e=this._baseState;if(null===e["default"])return!1;var f=a.join();if(void 0===e.defaultBuffer&&(e.defaultBuffer=this._encodeValue(e["default"],b,c).join()),f.length!==e.defaultBuffer.length)return!1;for(d=0;d<f.length;d++)if(f[d]!==e.defaultBuffer[d])return!1;return!0}},{"../../asn1":93,buffer:40,inherits:184}],104:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":103}],105:[function(a,b){function c(a,b){if(!a)throw new Error(b||"Assertion failed")}b.exports=c,c.equal=function(a,b,c){if(a!=b)throw new Error(c||"Assertion failed: "+a+" != "+b)}},{}],106:[function(a,b,c){c.strip=function(a){a=a.toString();var b=/^-----BEGIN (.*)-----\n/,c=b.exec(a),d=c[1],e=new RegExp("\n-----END "+d+"-----(\n*)$"),f=a.slice(c[0].length).replace(e,"").replace(/\n/g,"");return{tag:d,base64:f}};var d=function(a,b){for(var c=[];a;){if(a.length<b){c.push(a);break}c.push(a.substr(0,b)),a=a.substr(b)}return c.join("\n")};c.assemble=function(a){var b=a.tag,c=a.base64,e="-----BEGIN "+b+"-----",f="-----END "+b+"-----";return e+"\n"+d(c,64)+"\n"+f+"\n"}},{}],107:[function(a,b){(function(c){function d(a,b,c,d){var g=m(b,d);if(g.curve)return e(a,g,d);if("dsa"===g.type)return f(a,g,c,d);for(var h=g.modulus.byteLength(),i=[0,1];a.length+i.length+1<h;)i.push(255);i.push(0);for(var j=-1;++j<a.length;)i.push(a[j]);var k=p(i,g,d);return k}function e(a,b,d){o.rand=d.randomBytes;var e;"1.3.132.0.10"===b.curve.join(".")&&(e=new o.ec("secp256k1"));var f=e.genKeyPair();f._importPrivate(b.privateKey);var g=f.sign(a);return new c(g.toDER())}function f(a,b,c,d){for(var e,f=b.params.priv_key,j=b.params.p,m=b.params.q,o=(n.mont(m),b.params.g),p=new n(0),q=i(a,m).mod(m),r=!1,s=h(f,m,a,c,d);r===!1;)e=k(m,s,c,d),p=l(o,e,j,m),r=e.invm(m).imul(q.add(f.mul(p))).mod(m),r.cmpn(0)||(r=!1,p=new n(0));return g(p,r)}function g(a,b){a=a.toArray(),b=b.toArray(),128&a[0]&&(a=[0].concat(a)),128&b[0]&&(b=[0].concat(b));var d=a.length+b.length+4,e=[48,d,2,a.length];return e=e.concat(a,[2,b.length],b),new c(e)}function h(a,b,d,e,f){if(a=new c(a.toArray()),a.length<b.byteLength()){var g=new c(b.byteLength()-a.length);g.fill(0),a=c.concat([g,a])}var h=d.length,i=j(d,b),k=new c(h);k.fill(1);var l=new c(h);return l.fill(0),l=f.createHmac(e,l).update(k).update(new c([0])).update(a).update(i).digest(),k=f.createHmac(e,l).update(k).digest(),l=f.createHmac(e,l).update(k).update(new c([1])).update(a).update(i).digest(),k=f.createHmac(e,l).update(k).digest(),{k:l,v:k}}function i(a,b){bits=new n(a);var c=8*a.length-b.bitLength();return c>0&&bits.ishrn(c),bits}function j(a,b){a=i(a,b),a=a.mod(b);var d=new c(a.toArray());if(d.length<b.byteLength()){var e=new c(b.byteLength()-d.length);e.fill(0),d=c.concat([e,d])}return d}function k(a,b,d,e){for(var f,g;;){for(f=new c("");8*f.length<a.bitLength();)b.v=e.createHmac(d,b.k).update(b.v).digest(),f=c.concat([f,b.v]);if(g=i(f,a),b.k=e.createHmac(d,b.k).update(b.v).update(new c([0])).digest(),b.v=e.createHmac(d,b.k).update(b.v).digest(),-1===g.cmp(a))return g}}function l(a,b,c,d){return a.toRed(n.mont(c)).redPow(b).fromRed().mod(d)}var m=a("parse-asn1"),n=a("bn.js"),o=a("elliptic"),p=a("browserify-rsa");b.exports=d,b.exports.getKay=h,b.exports.makeKey=k}).call(this,a("buffer").Buffer)},{"bn.js":65,"browserify-rsa":66,buffer:40,elliptic:67,"parse-asn1":91}],108:[function(a,b){(function(c){function d(a,b,d){var g=h(d);if("ec"===g.type)return e(a,b,g);if("dsa"===g.type)return f(a,b,g);for(var i=g.modulus.byteLength(),k=[0,1];b.length+k.length+1<i;)k.push(255);k.push(0);for(var l=-1;++l<b.length;)k.push(b[l]);k=b;var m=j.mont(g.modulus);a=new j(a).toRed(m),a=a.redPow(new j(g.publicExponent)),a=new c(a.fromRed().toArray()),a=a.slice(a.length-b.length);var n=0;for(i=a.length,l=-1;++l<i;)n+=a[l]^b[l];return!n}function e(a,b,c){var d;"1.3.132.0.10"===c.data.algorithm.curve.join(".")&&(d=new i.ec("secp256k1"));var e=c.data.subjectPrivateKey.data;return d.verify(b.toString("hex"),a.toString("hex"),e.toString("hex"))}function f(a,b,c){var d=c.data.p,e=c.data.q,f=c.data.g,i=c.data.pub_key,k=h.signature.decode(a,"der"),l=k.s,m=k.r;g(l,e),g(m,e);var n=(j.mont(e),j.mont(d)),o=l.invm(e),p=f.toRed(n).redPow(new j(b).mul(o).mod(e)).fromRed().mul(i.toRed(n).redPow(m.mul(o).mod(e)).fromRed()).mod(d).mod(e);return!p.cmp(m)}function g(a,b){if(a.cmpn(0)<=0)throw new Error("invalid sig");if(a.cmp(b)>=b)throw new Error("invalid sig")}var h=a("parse-asn1"),i=a("elliptic"),j=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"bn.js":65,buffer:40,elliptic:67,"parse-asn1":91}],109:[function(a,b){(function(c){function d(a){this.curveType=h[a],this.curveType||(this.curveType={name:a}),this.curve=new f.ec(this.curveType.name),this.keys=void 0}function e(a,b,d){Array.isArray(a)||(a=a.toArray());var e=new c(a);if(d&&e.length<d){var f=new c(d-e.length);f.fill(0),e=c.concat([f,e])}return b?e.toString(b):e}var f=a("elliptic"),g=a("bn.js");b.exports=function(a){return new d(a)};var h={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32}};h.p224=h.secp224r1,h.p256=h.secp256r1=h.prime256v1,h.p192=h.secp192r1=h.prime192v1,d.prototype.generateKeys=function(a,b){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,b)},d.prototype.computeSecret=function(a,b,d){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),a=new g(a),a=a.toString(16);var f=this.curve.keyPair(a,"hex").getPublic(),h=f.mul(this.keys.getPrivate()).getX();return e(h,d,this.curveType.byteLength)},d.prototype.getPublicKey=function(a,b){var c=this.keys.getPublic("compressed"===b,!0);return"hybrid"===b&&(c[0]=c[c.length-1]%2?7:6),e(c,a)},d.prototype.getPrivateKey=function(a){return e(this.keys.getPrivate(),a)},d.prototype.setPublicKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);return d=d.toArray(),this.keys._importPublicHex(d),this},d.prototype.setPrivateKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);return d=d.toString(16),this.keys._importPrivate(d),this}}).call(this,a("buffer").Buffer)},{"bn.js":111,buffer:40,elliptic:112}],110:[function(a,b){var c=a("crypto").createECDH;b.exports=c||a("./browser")},{"./browser":109,crypto:44}],111:[function(a,b,c){arguments[4][65][0].apply(c,arguments)},{dup:65}],112:[function(a,b,c){arguments[4][67][0].apply(c,arguments)},{"../package.json":131,"./elliptic/curve":115,"./elliptic/curves":118,"./elliptic/ec":119,"./elliptic/hmac-drbg":122,"./elliptic/utils":123,brorand:124,dup:67}],113:[function(a,b,c){arguments[4][68][0].apply(c,arguments)},{"../../elliptic":112,"bn.js":111,dup:68}],114:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{"../../elliptic":112,"../curve":115,"bn.js":111,dup:69,inherits:184}],115:[function(a,b,c){arguments[4][70][0].apply(c,arguments)},{"./base":113,"./edwards":114,"./mont":116,"./short":117,dup:70}],116:[function(a,b,c){arguments[4][71][0].apply(c,arguments)},{"../../elliptic":112,"../curve":115,"bn.js":111,dup:71,inherits:184}],117:[function(a,b,c){arguments[4][72][0].apply(c,arguments)},{"../../elliptic":112,"../curve":115,"bn.js":111,dup:72,inherits:184}],118:[function(a,b,c){arguments[4][73][0].apply(c,arguments)},{"../elliptic":112,"bn.js":111,dup:73,"hash.js":125}],119:[function(a,b,c){arguments[4][74][0].apply(c,arguments)},{"../../elliptic":112,"./key":120,"./signature":121,"bn.js":111,dup:74}],120:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{"../../elliptic":112,"bn.js":111,dup:75}],121:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"../../elliptic":112,"bn.js":111,dup:76}],122:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{"../elliptic":112,dup:77,"hash.js":125}],123:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"bn.js":111,dup:78}],124:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{dup:79}],125:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{"./hash/common":126,"./hash/hmac":127,"./hash/ripemd":128,"./hash/sha":129,"./hash/utils":130,dup:80}],126:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{"../hash":125,dup:81}],127:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"../hash":125,dup:82}],128:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"../hash":125,dup:83}],129:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{"../hash":125,dup:84}],130:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,inherits:184}],
131:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],132:[function(a,b){(function(c){"use strict";function d(a){j.call(this),this._hash=a,this.buffers=[]}function e(a){j.call(this),this._hash=a}var f=a("inherits"),g=a("./md5"),h=a("ripemd160"),i=a("sha.js"),j=a("stream").Transform;f(d,j),d.prototype._transform=function(a,b,c){this.buffers.push(a),c()},d.prototype._flush=function(a){this.push(this.digest()),a()},d.prototype.update=function(a,b){return"string"==typeof a&&(a=new c(a,b)),this.buffers.push(a),this},d.prototype.digest=function(a){var b=c.concat(this.buffers),d=this._hash(b);return this.buffers=null,a?d.toString(a):d},f(e,j),e.prototype._transform=function(a,b,d){b&&(a=new c(a,b)),this._hash.update(a),d()},e.prototype._flush=function(a){this.push(this._hash.digest()),this._hash=null,a()},e.prototype.update=function(a,b){return"string"==typeof a&&(a=new c(a,b)),this._hash.update(a),this},e.prototype.digest=function(a){var b=this._hash.digest();return a?b.toString(a):b},b.exports=function(a){return"md5"===a?new d(g):"rmd160"===a?new d(h):new e(i(a))}}).call(this,a("buffer").Buffer)},{"./md5":134,buffer:40,inherits:184,ripemd160:135,"sha.js":137,stream:203}],133:[function(a,b,c){(function(a){"use strict";function b(b,c){if(b.length%f!==0){var d=b.length+(f-b.length%f);b=a.concat([b,g],d)}for(var e=[],h=c?b.readInt32BE:b.readInt32LE,i=0;i<b.length;i+=f)e.push(h.call(b,i));return e}function d(b,c,d){for(var e=new a(c),f=d?e.writeInt32BE:e.writeInt32LE,g=0;g<b.length;g++)f.call(e,b[g],4*g,!0);return e}function e(c,e,f,g){a.isBuffer(c)||(c=new a(c));var i=e(b(c,g),c.length*h);return d(i,f,g)}var f=4,g=new a(f);g.fill(0);var h=8;c.hash=e}).call(this,a("buffer").Buffer)},{buffer:40}],134:[function(a,b){"use strict";function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":133}],135:[function(a,b){(function(a){function c(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b}function d(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b}function e(a,b,c){for(var d=0;16>d;d++){var e=c+d,l=b[e];b[e]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s,t,u,v,w,x,y,z,A,B;x=s=a[0],y=t=a[1],z=u=a[2],A=v=a[3],B=w=a[4];for(var C,d=0;80>d;d+=1)C=s+b[c+m[d]]|0,C+=16>d?f(t,u,v)+q[0]:32>d?g(t,u,v)+q[1]:48>d?h(t,u,v)+q[2]:64>d?i(t,u,v)+q[3]:j(t,u,v)+q[4],C=0|C,C=k(C,o[d]),C=C+w|0,s=w,w=v,v=k(u,10),u=t,t=C,C=x+b[c+n[d]]|0,C+=16>d?j(y,z,A)+r[0]:32>d?i(y,z,A)+r[1]:48>d?h(y,z,A)+r[2]:64>d?g(y,z,A)+r[3]:f(y,z,A)+r[4],C=0|C,C=k(C,p[d]),C=C+B|0,x=B,B=A,A=k(z,10),z=y,y=C;C=a[1]+u+A|0,a[1]=a[2]+v+B|0,a[2]=a[3]+w+x|0,a[3]=a[4]+s+y|0,a[4]=a[0]+t+z|0,a[0]=C}function f(a,b,c){return a^b^c}function g(a,b,c){return a&b|~a&c}function h(a,b,c){return(a|~b)^c}function i(a,b,c){return a&c|b&~c}function j(a,b,c){return a^(b|~c)}function k(a,b){return a<<b|a>>>32-b}function l(b){var f=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof b&&(b=new a(b,"utf8"));var g=c(b),h=8*b.length,i=8*b.length;g[h>>>5]|=128<<24-h%32,g[(h+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var j=0;j<g.length;j+=16)e(f,g,j);for(var j=0;5>j;j++){var k=f[j];f[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}var l=d(f);return new a(l)}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],q=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0];b.exports=l}).call(this,a("buffer").Buffer)},{buffer:40}],136:[function(a,b){(function(a){function c(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}c.prototype.update=function(b,c){"string"==typeof b&&(c=c||"utf8",b=new a(b,c));for(var d=this._len+=b.length,e=this._s||0,f=0,g=this._block;d>e;){for(var h=Math.min(b.length,f+this._blockSize-e%this._blockSize),i=h-f,j=0;i>j;j++)g[e%this._blockSize+j]=b[j+f];e+=i,f+=i,e%this._blockSize===0&&this._update(g)}return this._s=e,this},c.prototype.digest=function(a){var b=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),b%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(b,this._blockSize-4);var c=this._update(this._block)||this._hash();return a?c.toString(a):c},c.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b.exports=c}).call(this,a("buffer").Buffer)},{buffer:40}],137:[function(a,b,c){var c=b.exports=function(a){var b=c[a.toLowerCase()];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b};c.sha1=a("./sha1"),c.sha224=a("./sha224"),c.sha256=a("./sha256"),c.sha384=a("./sha384"),c.sha512=a("./sha512")},{"./sha1":138,"./sha224":139,"./sha256":140,"./sha384":141,"./sha512":142}],138:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}function e(a,b){return a<<b|a>>>32-b}var f=a("inherits"),g=a("./hash"),h=new Array(80);f(d,g),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},d.prototype._update=function(a){function b(){return e(f[l-3]^f[l-8]^f[l-14]^f[l-16],1)}function c(a,b){f[l]=a;var c=e(g,5)+b+k+a+d;k=j,j=i,i=e(h,30),h=g,g=c,l++}var d,f=this._w,g=this._a,h=this._b,i=this._c,j=this._d,k=this._e,l=0;for(d=1518500249;16>l;)c(a.readInt32BE(4*l),h&i|~h&j);for(;20>l;)c(b(),h&i|~h&j);for(d=1859775393;40>l;)c(b(),h^i^j);for(d=-1894007588;60>l;)c(b(),h&i|h&j|i&j);for(d=-899497514;80>l;)c(b(),h^i^j);this._a=g+this._a|0,this._b=h+this._b|0,this._c=i+this._c|0,this._d=j+this._d|0,this._e=k+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":136,buffer:40,inherits:184}],139:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}var e=a("inherits"),f=a("./sha256"),g=a("./hash"),h=new Array(64);e(d,f),d.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this},d.prototype._hash=function(){var a=new c(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":136,"./sha256":140,buffer:40,inherits:184}],140:[function(a,b){(function(c){function d(){this.init(),this._w=p,n.call(this,64,56)}function e(a,b){return a>>>b|a<<32-b}function f(a,b){return a>>>b}function g(a,b,c){return a&b^~a&c}function h(a,b,c){return a&b^a&c^b&c}function i(a){return e(a,2)^e(a,13)^e(a,22)}function j(a){return e(a,6)^e(a,11)^e(a,25)}function k(a){return e(a,7)^e(a,18)^f(a,3)}function l(a){return e(a,17)^e(a,19)^f(a,10)}var m=a("inherits"),n=a("./hash"),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);m(d,n),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this},d.prototype._update=function(a){function b(){return l(d[t-2])+d[t-7]+k(d[t-15])+d[t-16]}function c(a){d[t]=a;var b=s+j(p)+g(p,q,r)+o[t]+a,c=i(e)+h(e,f,m);s=r,r=q,q=p,p=n+b,n=m,m=f,f=e,e=b+c,t++}for(var d=this._w,e=0|this._a,f=0|this._b,m=0|this._c,n=0|this._d,p=0|this._e,q=0|this._f,r=0|this._g,s=0|this._h,t=0;16>t;)c(a.readInt32BE(4*t));for(;64>t;)c(b());this._a=e+this._a|0,this._b=f+this._b|0,this._c=m+this._c|0,this._d=n+this._d|0,this._e=p+this._e|0,this._f=q+this._f|0,this._g=r+this._g|0,this._h=s+this._h|0},d.prototype._hash=function(){var a=new c(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":136,buffer:40,inherits:184}],141:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,128,112)}var e=a("inherits"),f=a("./sha512"),g=a("./hash"),h=new Array(160);e(d,f),d.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(48);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":136,"./sha512":142,buffer:40,inherits:184}],142:[function(a,b){(function(c){function d(){this.init(),this._w=k,i.call(this,128,112)}function e(a,b,c){return a>>>c|b<<32-c}function f(a,b,c){return a&b^~a&c}function g(a,b,c){return a&b^a&c^b&c}var h=a("inherits"),i=a("./hash"),j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],k=new Array(160);h(d,i),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this},d.prototype._update=function(a){function b(){var a=i[B-30],b=i[B-30+1],c=e(a,b,1)^e(a,b,8)^a>>>7,f=e(b,a,1)^e(b,a,8)^e(b,a,7);a=i[B-4],b=i[B-4+1];var g=e(a,b,19)^e(b,a,29)^a>>>6,j=e(b,a,19)^e(a,b,29)^e(b,a,6),k=i[B-14],l=i[B-14+1],m=i[B-32],n=i[B-32+1];h=f+l,d=c+k+(f>>>0>h>>>0?1:0),h+=j,d=d+g+(j>>>0>h>>>0?1:0),h+=n,d=d+m+(n>>>0>h>>>0?1:0)}function c(){i[B]=d,i[B+1]=h;var a=g(k,l,m),b=g(s,t,u),c=e(k,s,28)^e(s,k,2)^e(s,k,7),C=e(s,k,28)^e(k,s,2)^e(k,s,7),D=e(o,w,14)^e(o,w,18)^e(w,o,9),E=e(w,o,14)^e(w,o,18)^e(o,w,9),F=j[B],G=j[B+1],H=f(o,p,q),I=f(w,x,y),J=z+E,K=r+D+(z>>>0>J>>>0?1:0);J+=I,K=K+H+(I>>>0>J>>>0?1:0),J+=G,K=K+F+(G>>>0>J>>>0?1:0),J+=h,K=K+d+(h>>>0>J>>>0?1:0);var L=C+b,M=c+a+(C>>>0>L>>>0?1:0);r=q,z=y,q=p,y=x,p=o,x=w,w=v+J|0,o=n+K+(v>>>0>w>>>0?1:0)|0,n=m,v=u,m=l,u=t,l=k,t=s,s=J+L|0,k=K+M+(J>>>0>s>>>0?1:0)|0,A++,B+=2}for(var d,h,i=this._w,k=0|this._a,l=0|this._b,m=0|this._c,n=0|this._d,o=0|this._e,p=0|this._f,q=0|this._g,r=0|this._h,s=0|this._al,t=0|this._bl,u=0|this._cl,v=0|this._dl,w=0|this._el,x=0|this._fl,y=0|this._gl,z=0|this._hl,A=0,B=0;16>A;)d=a.readInt32BE(4*B),h=a.readInt32BE(4*B+4),c();for(;80>A;)b(),c();this._al=this._al+s|0,this._bl=this._bl+t|0,this._cl=this._cl+u|0,this._dl=this._dl+v|0,this._el=this._el+w|0,this._fl=this._fl+x|0,this._gl=this._gl+y|0,this._hl=this._hl+z|0,this._a=this._a+k+(this._al>>>0<s>>>0?1:0)|0,this._b=this._b+l+(this._bl>>>0<t>>>0?1:0)|0,this._c=this._c+m+(this._cl>>>0<u>>>0?1:0)|0,this._d=this._d+n+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+o+(this._el>>>0<w>>>0?1:0)|0,this._f=this._f+p+(this._fl>>>0<x>>>0?1:0)|0,this._g=this._g+q+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+r+(this._hl>>>0<z>>>0?1:0)|0},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(64);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),a(this._g,this._gl,48),a(this._h,this._hl,56),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":136,buffer:40,inherits:184}],143:[function(a,b){(function(c){"use strict";function d(a,b){g.call(this),"string"==typeof b&&(b=new c(b));var d="sha512"===a||"sha384"===a?128:64;this._alg=a,this._key=b,b.length>d?b=e(a).update(b).digest():b.length<d&&(b=c.concat([b,h],d));for(var f=this._ipad=new c(d),i=this._opad=new c(d),j=0;d>j;j++)f[j]=54^b[j],i[j]=92^b[j];this._hash=e(a).update(f)}var e=a("create-hash/browser"),f=a("inherits"),g=a("stream").Transform,h=new c(128);h.fill(0),f(d,g),d.prototype.update=function(a,b){return this._hash.update(a,b),this},d.prototype._transform=function(a,b,c){this._hash.update(a),c()},d.prototype._flush=function(a){this.push(this.digest()),a()},d.prototype.digest=function(a){var b=this._hash.digest();return e(this._alg).update(this._opad).update(b).digest(a)},b.exports=function(a,b){return new d(a,b)}}).call(this,a("buffer").Buffer)},{buffer:40,"create-hash/browser":132,inherits:184,stream:203}],144:[function(a,b,c){(function(b){function d(a){var c=new b(g[a].prime,"hex"),d=new b(g[a].gen,"hex");return new h(c,d)}function e(a,c,d,e){return(b.isBuffer(c)||"string"==typeof c&&-1===["hex","binary","base64"].indexOf(c))&&(e=d,d=c,c=void 0),c=c||"binary",e=e||"binary",d=d||new b([2]),b.isBuffer(d)||(d=new b(d,e)),"number"==typeof a?new h(f(a,d),d,!0):(b.isBuffer(a)||(a=new b(a,c)),new h(a,d,!0))}var f=a("./lib/generatePrime"),g=a("./lib/primes"),h=a("./lib/dh");c.DiffieHellmanGroup=c.createDiffieHellmanGroup=c.getDiffieHellman=d,c.createDiffieHellman=c.DiffieHellman=e}).call(this,a("buffer").Buffer)},{"./lib/dh":145,"./lib/generatePrime":146,"./lib/primes":147,buffer:40}],145:[function(a,b){(function(c){function d(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._pub=new j(a),this}function e(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._priv=new j(a),this}function f(a,b){var c=b.toString("hex"),d=[c,a.toString(16)].join("_");if(d in t)return t[d];var e=0;if(a.isEven()||!r.simpleSieve||!r.fermatTest(a)||!l.test(a))return e+=1,e+="02"===c||"05"===c?8:4,t[d]=e,e;l.test(a.shrn(1))||(e+=2);var f;switch(c){case"02":a.mod(m).cmp(n)&&(e+=8);break;case"05":f=a.mod(o),f.cmp(p)&&f.cmp(q)&&(e+=8);break;default:e+=4}return t[d]=e,e}function g(a,b){try{Object.defineProperty(a,"verifyError",{enumerable:!0,value:b,writable:!1})}catch(c){a.verifyError=b}}function h(a,b,c){this.setGenerator(b),this.__prime=new j(a),this._prime=j.mont(this.__prime),this._primeLen=a.length,this._pub=void 0,this._priv=void 0,c?(this.setPublicKey=d,this.setPrivateKey=e,g(this,f(this.__prime,b))):g(this,8)}function i(a,b){var d=new c(a.toArray());return b?d.toString(b):d}var j=a("bn.js"),k=a("miller-rabin"),l=new k,m=new j(24),n=new j(11),o=new j(10),p=new j(3),q=new j(7),r=a("./generatePrime"),s=a("randombytes");b.exports=h;var t={};h.prototype.generateKeys=function(){return this._priv||(this._priv=new j(s(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},h.prototype.computeSecret=function(a){a=new j(a),a=a.toRed(this._prime);var b=a.redPow(this._priv).fromRed(),d=new c(b.toArray()),e=this.getPrime();if(d.length<e.length){var f=new c(e.length-d.length);f.fill(0),d=c.concat([f,d])}return d},h.prototype.getPublicKey=function(a){return i(this._pub,a)},h.prototype.getPrivateKey=function(a){return i(this._priv,a)},h.prototype.getPrime=function(a){return i(this.__prime,a)},h.prototype.getGenerator=function(a){return i(this._gen,a)},h.prototype.setGenerator=function(a,b){return b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._gen=new j(a),this}}).call(this,a("buffer").Buffer)},{"./generatePrime":146,"bn.js":148,buffer:40,"miller-rabin":149,randombytes:178}],146:[function(a,b){function c(){if(null!==v)return v;var a=1048576,b=[];b[0]=2;for(var c=1,d=3;a>d;d+=2){for(var e=Math.ceil(Math.sqrt(d)),f=0;c>f&&b[f]<=e&&d%b[f]!==0;f++);c!==f&&b[f]<=e||(b[c++]=d)}return v=b,b}function d(a){for(var b=c(),d=0;d<b.length;d++)if(0===a.modn(b[d]))return 0===a.cmpn(b[d])?!0:!1;return!0}function e(a){var b=h.mont(a);return 0===m.toRed(b).redPow(a.subn(1)).fromRed().cmpn(1)}function f(a,b){function c(a){f=-1;for(var c=new h(g(Math.ceil(a/8)));c.bitLength()>a;)c.ishrn(1);if(c.isEven()&&c.iadd(l),c.testn(1)||c.iadd(m),b.cmp(m))if(b.cmp(n))j={major:[t],minor:[m]};else{for(rem=c.mod(q);rem.cmp(r);)c.iadd(t),rem=c.mod(q);j={major:[t,o],minor:[m,p]}}else{for(;c.mod(i).cmp(s);)c.iadd(t);j={major:[i],minor:[u]}}return c}if(16>a)return new h(2===b||5===b?[140,123]:[140,39]);b=new h(b);for(var f,j,v=c(a),w=v.shrn(1);;){for(;v.bitLength()>a;)v=c(a),w=v.shrn(1);if(f++,d(w)&&d(v)&&e(w)&&e(v)&&k.test(w)&&k.test(v))return v;v.iadd(j.major[f%j.major.length]),w.iadd(j.minor[f%j.minor.length])}}var g=a("randombytes");b.exports=f,f.simpleSieve=d,f.fermatTest=e;var h=a("bn.js"),i=new h(24),j=a("miller-rabin"),k=new j,l=new h(1),m=new h(2),n=new h(5),o=new h(16),p=new h(8),q=new h(10),r=new h(3),s=(new h(7),new h(11)),t=new h(4),u=new h(12),v=null},{"bn.js":148,"miller-rabin":149,randombytes:178}],147:[function(a,b){b.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],148:[function(a,b,c){arguments[4][65][0].apply(c,arguments)},{dup:65}],149:[function(a,b){function c(a){this.rand=a||new e.Rand}var d=a("bn.js"),e=a("brorand");b.exports=c,c.create=function(a){return new c(a)},c.prototype._rand=function(a){var b=a.bitLength(),c=this.rand.generate(Math.ceil(b/8));c[0]|=3;var e=7&b;return 0!==e&&(c[c.length-1]>>=7-e),new d(c)},c.prototype.test=function(a,b,c){var e=a.bitLength(),f=d.mont(a),g=new d(1).toRed(f);b||(b=Math.max(1,e/48|0));for(var h=a.subn(1),i=h.subn(1),j=0;!h.testn(j);j++);for(var k=a.shrn(j),l=h.toRed(f),m=!0;b>0;b--){var n=this._rand(i);c&&c(n);var o=n.toRed(f).redPow(k);if(0!==o.cmp(g)&&0!==o.cmp(l)){for(var p=1;j>p;p++){if(o=o.redSqr(),0===o.cmp(g))return!1;if(0===o.cmp(l))break}if(p===j)return!1}}return m},c.prototype.getDivisor=function(a,b){var c=a.bitLength(),e=d.mont(a),f=new d(1).toRed(e);b||(b=Math.max(1,c/48|0));for(var g=a.subn(1),h=g.subn(1),i=0;!g.testn(i);i++);for(var j=a.shrn(i),k=g.toRed(e),l=!0;b>0;b--){var m=this._rand(h),n=a.gcd(m);if(0!==n.cmpn(1))return n;var o=m.toRed(e).redPow(j);if(0!==o.cmp(f)&&0!==o.cmp(k)){for(var p=1;i>p;p++){if(o=o.redSqr(),0===o.cmp(f))return o.fromRed().subn(1).gcd(a);if(0===o.cmp(k))break}if(p===i)return o=o.redSqr(),o.fromRed().subn(1).gcd(a)}}return l}},{"bn.js":148,brorand:150}],150:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{dup:79}],151:[function(a,b,c){(function(b){function d(a,b,c,d,f,g){if("function"==typeof f&&(g=f,f=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");var h=e(a,b,c,d,f);setTimeout(function(){g(void 0,h)})}function e(a,c,d,e,g){if("number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(0>e)throw new TypeError("Bad key length");g=g||"sha1",b.isBuffer(a)||(a=new b(a)),b.isBuffer(c)||(c=new b(c));var h,i=1,j=new b(e),k=new b(c.length+4);c.copy(k,0,0,c.length);for(var l,m,n=1;i>=n;n++){k.writeUInt32BE(n,c.length);var o=f(g,a).update(k).digest();if(!h&&(h=o.length,m=new b(h),i=Math.ceil(e/h),l=e-(i-1)*h,e>(Math.pow(2,32)-1)*h))throw new TypeError("keylen exceeds maximum length");o.copy(m,0,0,h);for(var p=1;d>p;p++){o=f(g,a).update(o).digest();for(var q=0;h>q;q++)m[q]^=o[q]}var r=(n-1)*h,s=n===i?l:h;m.copy(j,r,0,s)}return j}var f=a("create-hmac");c.pbkdf2=d,c.pbkdf2Sync=e}).call(this,a("buffer").Buffer)},{buffer:40,"create-hmac":143
}],152:[function(a,b,c){c.publicEncrypt=a("./publicEncrypt"),c.privateDecrypt=a("./privateDecrypt"),c.privateEncrypt=function(a,b){return c.publicEncrypt(a,b,!0)},c.publicDecrypt=function(a,b){return c.privateDecrypt(a,b,!0)}},{"./privateDecrypt":174,"./publicEncrypt":175}],153:[function(a,b){(function(c){function d(a){var b=new c(4);return b.writeUInt32BE(a,0),b}var e=a("create-hash");b.exports=function(a,b){for(var f,g=new c(""),h=0;g.length<b;)f=d(h++),g=c.concat([g,e("sha1").update(a).update(f).digest()]);return g.slice(0,b)}}).call(this,a("buffer").Buffer)},{buffer:40,"create-hash":132}],154:[function(a,b,c){arguments[4][65][0].apply(c,arguments)},{dup:65}],155:[function(a,b){(function(c){function d(a){var b=f(a),c=b.toRed(g.mont(a.modulus)).redPow(new g(a.publicExponent)).fromRed();return{blinder:c,unblinder:b.invm(a.modulus)}}function e(a,b){var e=d(b),f=b.modulus.byteLength(),h=(g.mont(b.modulus),new g(a).mul(e.blinder).mod(b.modulus)),i=h.toRed(g.mont(b.prime1)),j=h.toRed(g.mont(b.prime2)),k=b.coefficient,l=b.prime1,m=b.prime2,n=i.redPow(b.exponent1),o=j.redPow(b.exponent2);n=n.fromRed(),o=o.fromRed();var p=n.isub(o).imul(k).mod(l);p.imul(m),o.iadd(p);var q=new c(o.imul(e.unblinder).mod(b.modulus).toArray());if(q.length<f){var r=new c(f-q.length);r.fill(0),q=c.concat([r,q],f)}return q}function f(a){for(var b=a.modulus.byteLength(),c=new g(h(b));c.cmp(a.modulus)>=0||!c.mod(a.prime1)||!c.mod(a.prime2);)c=new g(h(b));return c}var g=a("bn.js"),h=a("randombytes");b.exports=e,e.getr=f}).call(this,a("buffer").Buffer)},{"bn.js":154,buffer:40,randombytes:178}],156:[function(a,b){(function(c){var d=a("create-hash");b.exports=function(a,b,e){e/=8;for(var f,g,h,i=0,j=new c(e),k=0;;){if(f=d("md5"),k++>0&&f.update(g),f.update(a),f.update(b),g=f.digest(),h=0,e>0)for(;;){if(0===e)break;if(h===g.length)break;j[i++]=g[h++],e--}if(0===e)break}for(h=0;h<g.length;h++)g[h]=0;return j}}).call(this,a("buffer").Buffer)},{buffer:40,"create-hash":132}],157:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{dup:88}],158:[function(a,b,c){var d=a("asn1.js"),e=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});c.RSAPrivateKey=e;var f=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});c.RSAPublicKey=f;var g=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())});c.PublicKey=g;var h=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()).optional())}),i=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(h),this.key("subjectPrivateKey").octstr())});c.PrivateKey=i;var j=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});c.EncryptedPrivateKey=j;var k=d.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});c.DSAPrivateKey=k,c.DSAparam=d.define("DSAparam",function(){this["int"]()});var l=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=l;var m=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});c.signature=d.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":161}],159:[function(a,b){(function(c){var d=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,e=/^-----BEGIN (.*) KEY-----\n/m,f=/^-----BEGIN (.*) KEY-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1 KEY-----$/m,g=a("./EVP_BytesToKey"),h=a("browserify-aes");b.exports=function(a,b){var i,j=a.toString(),k=j.match(d);if(k){var l="aes"+k[1],m=new c(k[2],"hex"),n=new c(k[3].replace(/\n\r?/g,""),"base64"),o=g(b,m.slice(0,8),parseInt(k[1])),p=[],q=h.createDecipheriv(l,o,m);p.push(q.update(n)),p.push(q["final"]()),i=c.concat(p)}else{var r=j.match(f);i=new c(r[2].replace(/\n\r?/g,""),"base64")}var s=j.match(e)[1]+" KEY";return{tag:s,data:i}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":156,"browserify-aes":48,buffer:40}],160:[function(a,b){(function(c){function d(a){var b;"object"!=typeof a||c.isBuffer(a)||(b=a.passphrase,a=a.key),"string"==typeof a&&(a=new c(a));var d,g,i=h(a,b),j=i.tag,k=i.data;switch(j){case"PUBLIC KEY":switch(g=f.PublicKey.decode(k,"der"),d=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return f.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=f.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+d)}throw new Error("unknown key type "+j);case"ENCRYPTED PRIVATE KEY":k=f.EncryptedPrivateKey.decode(k,"der"),k=e(k,b);case"PRIVATE KEY":switch(g=f.PrivateKey.decode(k,"der"),d=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return f.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:f.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=f.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+d)}throw new Error("unknown key type "+j);case"RSA PUBLIC KEY":return f.RSAPublicKey.decode(k,"der");case"RSA PRIVATE KEY":return f.RSAPrivateKey.decode(k,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:f.DSAPrivateKey.decode(k,"der")};case"EC PRIVATE KEY":return k=f.ECPrivateKey.decode(k,"der"),{curve:k.parameters.value,privateKey:k.privateKey};default:throw new Error("unknown key type "+j)}}function e(a,b){var d=a.algorithm.decrypt.kde.kdeparams.salt,e=a.algorithm.decrypt.kde.kdeparams.iters,f=g[a.algorithm.decrypt.cipher.algo.join(".")],h=a.algorithm.decrypt.cipher.iv,k=a.subjectPrivateKey,l=parseInt(f.split("-")[1],10)/8,m=j.pbkdf2Sync(b,d,e,l),n=i.createDecipheriv(f,m,h),o=[];return o.push(n.update(k)),o.push(n["final"]()),c.concat(o)}var f=a("./asn1"),g=a("./aesid.json"),h=a("./fixProc"),i=a("browserify-aes"),j=a("pbkdf2-compat");b.exports=d,d.signature=f.signature}).call(this,a("buffer").Buffer)},{"./aesid.json":157,"./asn1":158,"./fixProc":159,"browserify-aes":48,buffer:40,"pbkdf2-compat":151}],161:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{"./asn1/api":162,"./asn1/base":164,"./asn1/constants":168,"./asn1/decoders":170,"./asn1/encoders":172,"bn.js":154,dup:93}],162:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{"../asn1":161,dup:94,inherits:184,vm:208}],163:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"../base":164,buffer:40,dup:95,inherits:184}],164:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{"./buffer":163,"./node":165,"./reporter":166,dup:96}],165:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"../base":164,dup:97,"minimalistic-assert":173}],166:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98,inherits:184}],167:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"../constants":168,dup:99}],168:[function(a,b,c){arguments[4][100][0].apply(c,arguments)},{"./der":167,dup:100}],169:[function(a,b,c){arguments[4][101][0].apply(c,arguments)},{"../../asn1":161,dup:101,inherits:184}],170:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"./der":169,dup:102}],171:[function(a,b,c){arguments[4][103][0].apply(c,arguments)},{"../../asn1":161,buffer:40,dup:103,inherits:184}],172:[function(a,b,c){arguments[4][104][0].apply(c,arguments)},{"./der":171,dup:104}],173:[function(a,b,c){arguments[4][105][0].apply(c,arguments)},{dup:105}],174:[function(a,b){(function(c){function d(a,b){var d=(a.modulus,a.modulus.byteLength()),e=(b.length,l("sha1").update(new c("")).digest()),g=e.length;if(0!==b[0])throw new Error("decryption error");var j=b.slice(1,g+1),k=b.slice(g+1),m=i(j,h(k,g)),n=i(k,h(m,d-g-1));if(f(e,n.slice(0,g)))throw new Error("decryption error");for(var o=g;0===n[o];)o++;if(1!==n[o++])throw new Error("decryption error");return n.slice(o)}function e(a,b,c){for(var d=b.slice(0,2),e=2,f=0;0!==b[e++];)if(e>=b.length){f++;break}{var g=b.slice(2,e-1);b.slice(e-1,e)}if(("0002"!==d.toString("hex")&&!c||"0001"!==d.toString("hex")&&c)&&f++,g.length<8&&f++,f)throw new Error("decryption error");return b.slice(e)}function f(a,b){a=new c(a),b=new c(b);var d=0,e=a.length;a.length!==b.length&&(d++,e=Math.min(a.length,b.length));for(var f=-1;++f<e;)d+=a[f]^b[f];return d}var g=a("parse-asn1"),h=a("./mgf"),i=a("./xor"),j=a("bn.js"),k=a("browserify-rsa"),l=a("create-hash"),m=a("./withPublic");b.exports=function(a,b,f){var h;h=a.padding?a.padding:f?1:4;var i=g(a),l=i.modulus.byteLength();if(b.length>l||new j(b).cmp(i.modulus)>=0)throw new Error("decryption error");var n;n=f?m(new j(b),i):k(b,i);var o=new c(l-n.length);if(o.fill(0),n=c.concat([o,n],l),4===h)return d(i,n);if(1===h)return e(i,n,f);if(3===h)return n;throw new Error("unknown padding")}}).call(this,a("buffer").Buffer)},{"./mgf":153,"./withPublic":176,"./xor":177,"bn.js":154,"browserify-rsa":155,buffer:40,"create-hash":132,"parse-asn1":160}],175:[function(a,b){(function(c){function d(a,b){var d=a.modulus.byteLength(),e=b.length,f=i("sha1").update(new c("")).digest(),g=f.length,m=2*g;if(e>d-m-2)throw new Error("message too long");var n=new c(d-e-m-2);n.fill(0);var o=d-g-1,p=h(g),q=k(c.concat([f,n,new c([1]),b],o),j(p,o)),r=k(p,j(q,g));return new l(c.concat([new c([0]),r,q],d))}function e(a,b,d){var e=b.length,g=a.modulus.byteLength();if(e>g-11)throw new Error("message too long");var h;return d?(h=new c(g-e-3),h.fill(255)):h=f(g-e-3),new l(c.concat([new c([0,d?1:2]),h,new c([0]),b],g))}function f(a){for(var b,d=new c(a),e=0,f=h(2*a),g=0;a>e;)g===f.length&&(f=h(2*a),g=0),b=f[g++],b&&(d[e++]=b);return d}var g=a("parse-asn1"),h=a("randombytes"),i=a("create-hash"),j=a("./mgf"),k=a("./xor"),l=a("bn.js"),m=a("./withPublic"),n=a("browserify-rsa");b.exports=function(a,b,c){var f;f=a.padding?a.padding:c?1:4;var h,i=g(a);if(4===f)h=d(i,b);else if(1===f)h=e(i,b,c);else{if(3!==f)throw new Error("unknown padding");if(h=new l(b),h.cmp(i.modulus)>=0)throw new Error("data too long for modulus")}return c?n(h,i):m(h,i)}}).call(this,a("buffer").Buffer)},{"./mgf":153,"./withPublic":176,"./xor":177,"bn.js":154,"browserify-rsa":155,buffer:40,"create-hash":132,"parse-asn1":160,randombytes:178}],176:[function(a,b){(function(c){function d(a,b){return new c(a.toRed(e.mont(b.modulus)).redPow(new e(b.publicExponent)).fromRed().toArray())}var e=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"bn.js":154,buffer:40}],177:[function(a,b){b.exports=function(a,b){for(var c=a.length,d=-1;++d<c;)a[d]^=b[d];return a}},{}],178:[function(a,b){(function(a,c,d){"use strict";function e(b,c){var e=new d(b);return g.getRandomValues(e),"function"==typeof c?a.nextTick(function(){c(null,e)}):e}function f(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var g=c.crypto||c.msCrypto;b.exports=g&&g.getRandomValues?e:f}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{_process:187,buffer:40}],179:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],180:[function(a,b){var c=b.exports,d=(a("events").EventEmitter,a("./lib/request")),e=a("url");c.request=function(a,b){"string"==typeof a&&(a=e.parse(a)),a||(a={}),a.host||a.port||(a.port=parseInt(window.location.port,10)),!a.host&&a.hostname&&(a.host=a.hostname),a.protocol||(a.protocol=a.scheme?a.scheme+":":window.location.protocol),a.host||(a.host=window.location.hostname||window.location.host),/:/.test(a.host)&&(a.port||(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]),a.port||(a.port="https:"==a.protocol?443:80);var c=new d(new f,a);return b&&c.on("response",b),c},c.get=function(a,b){a.method="GET";var d=c.request(a,b);return d.end(),d},c.Agent=function(){},c.Agent.defaultMaxSockets=4;var f=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{var c=new window.ActiveXObject(a[b]);return function(){if(c){var d=c;return c=null,d}return new window.ActiveXObject(a[b])}}catch(d){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();c.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":181,events:179,url:205}],181:[function(a,b){var c=a("stream"),d=a("./response"),e=a("Base64"),f=a("inherits"),g=b.exports=function(a,b){var c=this;c.writable=!0,c.xhr=a,c.body=[],c.uri=(b.protocol||"http:")+"//"+b.host+(b.port?":"+b.port:"")+(b.path||"/"),"undefined"==typeof b.withCredentials&&(b.withCredentials=!0);try{a.withCredentials=b.withCredentials}catch(f){}if(b.responseType)try{a.responseType=b.responseType}catch(f){}if(a.open(b.method||"GET",c.uri,!0),a.onerror=function(){c.emit("error",new Error("Network error"))},c._headers={},b.headers)for(var g=h(b.headers),i=0;i<g.length;i++){var j=g[i];if(c.isSafeRequestHeader(j)){var k=b.headers[j];c.setHeader(j,k)}}b.auth&&this.setHeader("Authorization","Basic "+e.btoa(b.auth));var l=new d;l.on("close",function(){c.emit("close")}),l.on("ready",function(){c.emit("response",l)}),l.on("error",function(a){c.emit("error",a)}),a.onreadystatechange=function(){a.__aborted||l.handle(a)}};f(g,c),g.prototype.setHeader=function(a,b){this._headers[a.toLowerCase()]=b},g.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]},g.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]},g.prototype.write=function(a){this.body.push(a)},g.prototype.destroy=function(){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},g.prototype.end=function(a){void 0!==a&&this.body.push(a);for(var b=h(this._headers),c=0;c<b.length;c++){var d=b[c],e=this._headers[d];if(i(e))for(var f=0;f<e.length;f++)this.xhr.setRequestHeader(d,e[f]);else this.xhr.setRequestHeader(d,e)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(i(this.body[0])){for(var g=[],c=0;c<this.body.length;c++)g.push.apply(g,this.body[c]);this.xhr.send(g)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var j=0,c=0;c<this.body.length;c++)j+=this.body[c].length;for(var g=new this.body[0].constructor(j),l=0,c=0;c<this.body.length;c++)for(var m=this.body[c],f=0;f<m.length;f++)g[l++]=m[f];this.xhr.send(g)}else if(k(this.body[0]))this.xhr.send(this.body[0]);else{for(var g="",c=0;c<this.body.length;c++)g+=this.body[c].toString();this.xhr.send(g)}},g.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],g.prototype.isSafeRequestHeader=function(a){return a?-1===j(g.unsafeHeaders,a.toLowerCase()):!1};var h=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},i=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},k=function(a){return"undefined"!=typeof Blob&&a instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&a instanceof FormData?!0:void 0}},{"./response":182,Base64:183,inherits:184,stream:203}],182:[function(a,b){function c(a){for(var b=a.getAllResponseHeaders().split(/\r?\n/),c={},d=0;d<b.length;d++){var e=b[d];if(""!==e){var f=e.match(/^([^:]+):\s*(.*)/);if(f){var g=f[1].toLowerCase(),i=f[2];void 0!==c[g]?h(c[g])?c[g].push(i):c[g]=[c[g],i]:c[g]=i}else c[e]=!0}}return c}var d=a("stream"),e=a("util"),f=b.exports=function(){this.offset=0,this.readable=!0};e.inherits(f,d);var g={streaming:!0,status2:!0};f.prototype.getResponse=function(a){var b=String(a.responseType).toLowerCase();return"blob"===b?a.responseBlob||a.response:"arraybuffer"===b?a.response:a.responseText},f.prototype.getHeader=function(a){return this.headers[a.toLowerCase()]},f.prototype.handle=function(a){if(2===a.readyState&&g.status2){try{this.statusCode=a.status,this.headers=c(a)}catch(b){g.status2=!1}g.status2&&this.emit("ready")}else if(g.streaming&&3===a.readyState){try{this.statusCode||(this.statusCode=a.status,this.headers=c(a),this.emit("ready"))}catch(b){}try{this._emitData(a)}catch(b){g.streaming=!1}}else 4===a.readyState&&(this.statusCode||(this.statusCode=a.status,this.emit("ready")),this._emitData(a),a.error?this.emit("error",this.getResponse(a)):this.emit("end"),this.emit("close"))},f.prototype._emitData=function(a){var b=this.getResponse(a);return b.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(b,this.offset)),void(this.offset=b.byteLength)):void(b.length>this.offset&&(this.emit("data",b.slice(this.offset)),this.offset=b.length))};var h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{stream:203,util:207}],183:[function(a,b,c){!function(){function a(a){this.message=a}var b="undefined"!=typeof c?c:this,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var c,e,f=0,g=d,h="";b.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&c>>8-f%1*8)){if(e=b.charCodeAt(f+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return h}),b.atob||(b.atob=function(b){if(b=b.replace(/=+$/,""),b.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var c,e,f=0,g=0,h="";e=b.charAt(g++);~e&&(c=f%4?64*c+e:e,f++%4)?h+=String.fromCharCode(255&c>>(-2*f&6)):0)e=d.indexOf(e);return h})}()},{}],184:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],185:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],186:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:187}],187:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],188:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function g(a,b){return f(a.split(G),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c,r="object"==typeof b&&b&&b.exports==q&&b,s="object"==typeof a&&a;(s.global===s||s.window===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^ -~]/,G=/\x2E|\u3002|\uFF0E|\uFF61/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.2.4",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&!q.nodeType)if(r)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],189:[function(a,b){"use strict";function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,e,f){b=b||"&",e=e||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(e);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),c(g,n)?d(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],190:[function(a,b){"use strict";function c(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,g,h){return b=b||"&",g=g||"=",null===a&&(a=void 0),"object"==typeof a?c(f(a),function(f){var h=encodeURIComponent(d(f))+g;return e(a[f])?c(a[f],function(a){return h+encodeURIComponent(d(a))}).join(b):h+encodeURIComponent(d(a[f]))}).join(b):h?encodeURIComponent(d(h))+g+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],191:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":189,"./encode":190}],192:[function(a,b){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":193}],193:[function(a,b){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),
f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":195,"./_stream_writable":197,_process:187,"core-util-is":198,inherits:184}],194:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":196,"core-util-is":198,inherits:184}],195:[function(a,b){(function(c){function d(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,void A.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(B.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=E)a=E;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||B.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||B.isString(b)||B.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(D("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){D("emit readable"),a.emit("readable"),s(a)}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(D("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;D("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&z.listenerCount(a,"data")&&(b.flowing=!0,s(a))}}function q(a,b){b.resumeScheduled||(b.resumeScheduled=!0,c.nextTick(function(){r(a,b)}))}function r(a,b){b.resumeScheduled=!1,a.emit("resume"),s(a),b.flowing&&!b.reading&&a.read(0)}function s(a){var b=a._readableState;if(D("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C,D=a("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return B.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){return C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b,this};var E=8388608;e.prototype.read=function(a){D("read",a);var b=this._readableState,c=a;if((!B.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return D("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?u(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;D("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,D("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,D("reading or ended",d)),d&&(D("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,B.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&u(this),B.isNull(e)||this.emit("data",e),e},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){D("onunpipe"),a===l&&f()}function e(){D("onend"),a.end()}function f(){D("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){D("ondata");var c=a.write(b);!1===c&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){D("onerror",b),k(),a.removeListener("error",h),0===z.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){D("onfinish"),a.removeListener("close",i),k()}function k(){D("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,D("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?c.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(D("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var d=A.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;c.nextTick(function(){D("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(D("resume"),a.flowing=!0,a.reading||(D("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(D("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(D("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)B.isFunction(a[e])&&B.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){D("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{"./_stream_duplex":193,_process:187,buffer:40,"core-util-is":198,events:179,inherits:184,isarray:185,stream:203,"string_decoder/":204,util:39}],196:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,h.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a),this._transformState=new c(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){h.isFunction(this._flush)?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./_stream_duplex"),h=a("core-util-is");h.inherits=a("inherits"),h.inherits(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;h.isNull(a.writechunk)||!a.writecb||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))}},{"./_stream_duplex":193,"core-util-is":198,inherits:184}],197:[function(a,b){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(c,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void x.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!(w.isBuffer(d)||w.isString(d)||w.isNullOrUndefined(d)||b.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&w.isString(b)&&(b=new v(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),w.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){b.pendingcb--,f(e)}):(b.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),t(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function t(a,b){var c=r(a,b);return c&&(0===b.pendingcb?(s(a,b),b.finished=!0,a.emit("finish")):s(a,b)),c}function u(a,b,d){b.ending=!0,t(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var v=a("buffer").Buffer;f.WritableState=e;var w=a("core-util-is");w.inherits=a("inherits");var x=a("stream");w.inherits(f,x),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return w.isFunction(b)&&(c=b,b=null),w.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),w.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;w.isFunction(a)?(c=a,a=null,b=null):w.isFunction(b)&&(c=b,b=null),w.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":193,_process:187,buffer:40,"core-util-is":198,inherits:184,stream:203}],198:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:40}],199:[function(a,b){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":194}],200:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=a("stream"),c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":193,"./lib/_stream_passthrough.js":194,"./lib/_stream_readable.js":195,"./lib/_stream_transform.js":196,"./lib/_stream_writable.js":197,stream:203}],201:[function(a,b){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":196}],202:[function(a,b){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":197}],203:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("readable-stream/readable.js"),c.Writable=a("readable-stream/writable.js"),c.Duplex=a("readable-stream/duplex.js"),c.Transform=a("readable-stream/transform.js"),c.PassThrough=a("readable-stream/passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:179,inherits:184,"readable-stream/duplex.js":192,"readable-stream/passthrough.js":199,"readable-stream/readable.js":200,"readable-stream/transform.js":201,"readable-stream/writable.js":202}],204:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:40}],205:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname=this.hostname.length>u?"":this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:188,querystring:191}],206:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],207:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a;

}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":206,_process:187,inherits:184}],208:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(a){return function(a,b,c){a[b]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(a){return this instanceof Script?void(this.code=a):new Script(a)};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={}),b.style.display="none",document.body.appendChild(b);var c=b.contentWindow,d=c.eval,e=c.execScript;!d&&e&&(e.call(c,"null"),d=c.eval),forEach(Object_keys(a),function(b){c[b]=a[b]}),forEach(globals,function(b){a[b]&&(c[b]=a[b])});var f=Object_keys(c),g=d.call(c,this.code);return forEach(Object_keys(c),function(b){(b in a||-1===indexOf(f,b))&&(a[b]=c[b])}),forEach(globals,function(b){b in a||defineProp(a,b,c[b])}),document.body.removeChild(b),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var b=Script.createContext(a),c=this.runInContext(b);return forEach(Object_keys(b),function(c){a[c]=b[c]}),c},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(b){var c=Script(b);return c[a].apply(c,[].slice.call(arguments,1))}}),exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var b=new Context;return"object"==typeof a&&forEach(Object_keys(a),function(c){b[c]=a[c]}),b}},{indexof:209}],209:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],210:[function(a,b){function c(a){return h.lastIndex=0,h.test(a)?'"'+a.replace(h,function(a){var b=i[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,b){var h,i,j,k,l,m=e,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof g&&(n=g.call(b,a,n)),typeof n){case"string":return c(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,h=0;k>h;h+=1)l[h]=d(h,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(g&&"object"==typeof g)for(k=g.length,h=0;k>h;h+=1)"string"==typeof g[h]&&(i=g[h],j=d(i,n),j&&l.push(c(i)+(e?": ":":")+j));else{var o=Object.keys(n).sort();for(h in o)i=o[h],Object.prototype.hasOwnProperty.call(n,i)&&(j=d(i,n),j&&l.push(c(i)+(e?": ":":")+j))}return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",e=m,j}}var e,f,g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j=function(a,b,c){var h;if(e="",f="","number"==typeof c)for(h=0;c>h;h+=1)f+=" ";else"string"==typeof c&&(f=c);if(g=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return d("",{"":a})};b.exports=j},{}],211:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?j.removeItem("debug"):j.debug=a}catch(b){}}function h(){var a;try{a=j.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d;var j;j="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":212}],212:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:213}],213:[function(a,b){function c(a){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*k;case"days":case"day":case"d":return c*j;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*h;case"seconds":case"second":case"secs":case"sec":case"s":return c*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}function d(a){return a>=j?Math.round(a/j)+"d":a>=i?Math.round(a/i)+"h":a>=h?Math.round(a/h)+"m":a>=g?Math.round(a/g)+"s":a+"ms"}function e(a){return f(a,j,"day")||f(a,i,"hour")||f(a,h,"minute")||f(a,g,"second")||a+" ms"}function f(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var g=1e3,h=60*g,i=60*h,j=24*i,k=365.25*j;b.exports=function(a,b){return b=b||{},"string"==typeof a?c(a):b["long"]?e(a):d(a)}},{}],214:[function(a,b,c){"use strict";function d(a,b){var d,e=a.filename,f=void 0!==b;if(a.cache){if(!e)throw new Error("cache option requires a filename");if(d=c.cache.get(e))return d;f||(b=j.readFileSync(e).toString().replace(s,""))}else if(!f){if(!e)throw new Error("Internal EJS error: no file name or template provided");b=j.readFileSync(e).toString().replace(s,"")}return d=c.compile(b,a),a.cache&&c.cache.set(e,d),d}function e(a,b){var e=k.shallowCopy({},b);if(!e.filename)throw new Error("`include` requires the 'filename' option.");return e.filename=c.resolveInclude(a,e.filename),d(e)}function f(a,b){var d,e,f=k.shallowCopy({},b);if(!f.filename)throw new Error("`include` requires the 'filename' option.");d=c.resolveInclude(a,f.filename),e=j.readFileSync(d).toString().replace(s,""),f.filename=d;var g=new i(e,f);return g.generateSource(),g.source}function g(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}function h(a,b){q.forEach(function(c){"undefined"!=typeof a[c]&&(b[c]=a[c])})}function i(a,b){b=b||{};var d={};this.templateText=a,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",d.client=b.client||!1,d.escapeFunction=b.escape||k.escapeXML,d.compileDebug=b.compileDebug!==!1,d.debug=!!b.debug,d.filename=b.filename,d.delimiter=b.delimiter||c.delimiter||n,d._with="undefined"!=typeof b._with?b._with:!0,d.cache=b.cache||!1,d.rmWhitespace=b.rmWhitespace,this.opts=d,this.regex=this.createRegex()}var j=a("fs"),k=a("./utils"),l=!1,m=a("../package.json").version,n="%",o="locals",p="(<%%|<%=|<%-|<%#|<%|%>|-%>)",q=["cache","filename","delimiter","scope","context","debug","compileDebug","client","_with"],r=/;\s*$/,s=/^\uFEFF/;c.cache=k.cache,c.localsName=o,c.resolveInclude=function(b,c){var d=a("path"),e=d.dirname,f=d.extname,g=d.resolve,h=g(e(c),b),i=f(b);return i||(h+=".ejs"),h},c.compile=function(a,b){var c;return b&&b.scope&&(l||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),l=!0),b.context||(b.context=b.scope),delete b.scope),c=new i(a,b),c.compile()},c.render=function(a,b,c){b=b||{},c=c||{};var e;return 2==arguments.length&&h(b,c),e=d(c,a),e.call(c.context,b)},c.renderFile=function(){var a,b=Array.prototype.slice.call(arguments),c=b.shift(),e=b.pop(),f=b.shift()||{},g=b.pop()||{};3==arguments.length&&h(f,g),g.filename=c;try{a=d(g)(f)}catch(i){return e(i)}return e(null,a)},c.clearCache=function(){c.cache.reset()},i.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},i.prototype={createRegex:function(){var a=p,b=k.escapeRegExpChars(this.opts.delimiter);return a=a.replace(/%/g,b),new RegExp(a)},compile:function(){var a,b,d=this.opts,f=d.escapeFunction;if(d.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),!this.source){this.generateSource();var h="  var __output = [];\n";d._with!==!1&&(h+="  with ("+c.localsName+" || {}) {\n"),this.source=h+this.source,d._with!==!1&&(this.source+="  }\n"),this.source+='  return __output.join("");\n'}a=d.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(d.filename?JSON.stringify(d.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line);\n}\n":this.source,d.debug&&console.log(a),d.client&&(a="escape = escape || "+f.toString()+";\n"+a,d.compileDebug&&(a="rethrow = rethrow || "+g.toString()+";\n"+a));try{b=new Function(c.localsName+", escape, include, rethrow",a)}catch(i){throw i instanceof SyntaxError&&(d.filename&&(i.message+=" in "+d.filename),i.message+=" while compiling ejs"),i}return d.client?b:function(a){var c=function(b,c){var f=k.shallowCopy({},a);return c&&(f=k.shallowCopy(f,c)),e(b,d)(f)};return b(a||{},f,c,g)}},generateSource:function(){var a=this,b=this.parseTemplateText(),c=this.opts.delimiter;b&&b.length&&b.forEach(function(d,e){var g,h,i,j;if(0===d.indexOf("<"+c)&&0!==d.indexOf("<"+c+c)&&(g=b[e+2],g!=c+">"&&g!="-"+c+">"))throw new Error('Could not find matching close tag for "'+d+'".');(h=d.match(/^\s*include\s+(\S+)/))?(i=k.shallowCopy({},a.opts),j=f(h[1],i),j="    ; (function(){\n"+j+"    ; })()\n",a.source+=j):a.scanLine(d)})},parseTemplateText:function(){for(var a,b,c=this.templateText,d=this.regex,e=d.exec(c),f=[];e;)a=e.index,b=d.lastIndex,0!==a&&(f.push(c.substring(0,a)),c=c.slice(a)),f.push(e[0]),c=c.slice(e[0].length),e=d.exec(c);return c&&f.push(c),f},scanLine:function(a){function b(){c.truncate?(a=a.replace("\n",""),c.truncate=!1):c.opts.rmWhitespace&&(a=a.replace(/^\n/,"")),a&&(a=a.replace(/\\/g,"\\\\"),a=a.replace(/\n/g,"\\n"),a=a.replace(/\r/g,"\\r"),a=a.replace(/"/g,'\\"'),c.source+='    ; __output.push("'+a+'")\n')}var c=this,d=this.opts.delimiter,e=0;switch(e=a.split("\n").length-1,a){case"<"+d:this.mode=i.modes.EVAL;break;case"<"+d+"=":this.mode=i.modes.ESCAPED;break;case"<"+d+"-":this.mode=i.modes.RAW;break;case"<"+d+"#":this.mode=i.modes.COMMENT;break;case"<"+d+d:this.mode=i.modes.LITERAL,this.source+='    ; __output.push("'+a.replace("<"+d+d,"<"+d)+'")\n';break;case d+">":case"-"+d+">":this.mode==i.modes.LITERAL&&b(),this.mode=null,this.truncate=0===a.indexOf("-");break;default:if(this.mode){switch(this.mode){case i.modes.EVAL:case i.modes.ESCAPED:case i.modes.RAW:a.lastIndexOf("//")>a.lastIndexOf("\n")&&(a+="\n")}switch(this.mode){case i.modes.EVAL:this.source+="    ; "+a+"\n";break;case i.modes.ESCAPED:this.source+="    ; __output.push(escape("+a.replace(r,"").trim()+"))\n";break;case i.modes.RAW:this.source+="    ; __output.push("+a.replace(r,"").trim()+")\n";break;case i.modes.COMMENT:break;case i.modes.LITERAL:b()}}else b()}c.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},c.__express=c.renderFile,a.extensions&&(a.extensions[".ejs"]=function(a,b){b=b||a.filename;var d={filename:b,client:!0},e=j.readFileSync(b).toString(),f=c.compile(e,d);a._compile("module.exports = "+f.toString()+";",b)}),c.VERSION=m,"undefined"!=typeof window&&(window.ejs=c)},{"../package.json":216,"./utils":215,fs:37,path:186}],215:[function(a,b,c){"use strict";var d=/[|\\{}()[\]^$+*?.]/g;c.escapeRegExpChars=function(a){return a?String(a).replace(d,"\\$&"):""};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},f=/[&<>\'"]/g,g='var _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\n';c.escapeXML=function(a){return void 0==a?"":String(a).replace(f,function(a){return e[a]||a})},c.escapeXML.toString=function(){return Function.prototype.toString.call(this)+";\n"+g},c.shallowCopy=function(a,b){b=b||{};for(var c in b)a[c]=b[c];return a},c.cache={_data:{},set:function(a,b){this._data[a]=b},get:function(a){return this._data[a]},reset:function(){this._data={}}}},{}],216:[function(a,b){b.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.3.1",author:{name:"Matthew Eernisse",email:"mde@fleegix.org",url:"http://fleegix.org"},contributors:[{name:"Timothy Gu",email:"timothygu99@gmail.com",url:"https://timothygu.github.io"}],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:{url:"https://github.com/mde/ejs/issues"},homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^8.0.3",istanbul:"~0.3.5",jake:"^8.0.0",jsdoc:"^3.3.0-beta1","lru-cache":"^2.5.0",mocha:"^2.1.0",rimraf:"^2.2.8","uglify-js":"^2.4.16"},engines:{node:">=0.10.0"},scripts:{test:"mocha",coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"rimraf out && jsdoc -c jsdoc.json lib/* docs/jsdoc/*",devdoc:"rimraf out && jsdoc -p -c jsdoc.json lib/* docs/jsdoc/*"},_id:"ejs@2.3.1",_shasum:"a697d98ac401e32a99c3deed92c60c19b6199a7f",_resolved:"http://ci.strongloop.com:4873/ejs/-/ejs-2.3.1.tgz",_from:"ejs@>=2.3.1 <3.0.0",_npmVersion:"2.1.11",_nodeVersion:"0.10.33",_npmUser:{name:"mde",email:"mde@fleegix.org"},maintainers:[{name:"tjholowaychuk",email:"tj@vision-media.ca"},{name:"mde",email:"mde@fleegix.org"}],dist:{shasum:"a697d98ac401e32a99c3deed92c60c19b6199a7f",tarball:"http://ci.strongloop.com:4873/ejs/-/ejs-2.3.1.tgz"},directories:{}}},{}],217:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.inflection=d()}(this,function(){var a=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","grammar","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],b={plural:{men:new RegExp("^(m)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopi:new RegExp("(octop|vir)i$","gi"),aliases:new RegExp("(alias|status)es$","gi"),summonses:new RegExp("^(summons)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status)$","gi"),summons:new RegExp("^(summons)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},c=[[b.plural.men],[b.plural.people],[b.plural.children],[b.plural.tia],[b.plural.analyses],[b.plural.hives],[b.plural.curves],[b.plural.lrves],[b.plural.foves],[b.plural.aeiouyies],[b.plural.series],[b.plural.movies],[b.plural.xes],[b.plural.mice],[b.plural.buses],[b.plural.oes],[b.plural.shoes],[b.plural.crises],[b.plural.octopi],[b.plural.aliases],[b.plural.summonses],[b.plural.oxen],[b.plural.matrices],[b.plural.feet],[b.plural.teeth],[b.plural.geese],[b.plural.quizzes],[b.plural.whereases],[b.singular.man,"$1en"],[b.singular.person,"$1ople"],[b.singular.child,"$1ren"],[b.singular.ox,"$1en"],[b.singular.axis,"$1es"],[b.singular.octopus,"$1i"],[b.singular.alias,"$1es"],[b.singular.summons,"$1es"],[b.singular.bus,"$1ses"],[b.singular.buffalo,"$1oes"],[b.singular.tium,"$1a"],[b.singular.sis,"ses"],[b.singular.ffe,"$1$2ves"],[b.singular.hive,"$1ves"],[b.singular.aeiouyy,"$1ies"],[b.singular.matrix,"$1ices"],[b.singular.vertex,"$1ices"],[b.singular.x,"$1es"],[b.singular.mouse,"$1ice"],[b.singular.foot,"feet"],[b.singular.tooth,"teeth"],[b.singular.goose,"geese"],[b.singular.quiz,"$1zes"],[b.singular.whereas,"$1es"],[b.singular.s,"s"],[b.singular.common,"s"]],d=[[b.singular.man],[b.singular.person],[b.singular.child],[b.singular.ox],[b.singular.axis],[b.singular.octopus],[b.singular.alias],[b.singular.summons],[b.singular.bus],[b.singular.buffalo],[b.singular.tium],[b.singular.sis],[b.singular.ffe],[b.singular.hive],[b.singular.aeiouyy],[b.singular.x],[b.singular.matrix],[b.singular.mouse],[b.singular.foot],[b.singular.tooth],[b.singular.goose],[b.singular.quiz],[b.singular.whereas],[b.plural.men,"$1an"],[b.plural.people,"$1rson"],[b.plural.children,"$1"],[b.plural.tia,"$1um"],[b.plural.analyses,"$1$2sis"],[b.plural.hives,"$1ve"],[b.plural.curves,"$1"],[b.plural.lrves,"$1f"],[b.plural.foves,"$1fe"],[b.plural.movies,"$1ovie"],[b.plural.aeiouyies,"$1y"],[b.plural.series,"$1eries"],[b.plural.xes,"$1"],[b.plural.mice,"$1ouse"],[b.plural.buses,"$1"],[b.plural.oes,"$1"],[b.plural.shoes,"$1"],[b.plural.crises,"$1is"],[b.plural.octopi,"$1us"],[b.plural.aliases,"$1"],[b.plural.summonses,"$1"],[b.plural.oxen,"$1"],[b.plural.matrices,"$1ix"],[b.plural.vertices,"$1ex"],[b.plural.feet,"foot"],[b.plural.teeth,"tooth"],[b.plural.geese,"goose"],[b.plural.quizzes,"$1"],[b.plural.whereases,"$1"],[b.plural.ss,"ss"],[b.plural.s,""]],e=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],f=new RegExp("(_ids|_id)$","g"),g=new RegExp("_","g"),h=new RegExp("[ _]","g"),i=new RegExp("([A-Z])","g"),j=new RegExp("^_"),k={_apply_rules:function(a,b,c,d){if(d)a=d;else{var e=k.indexOf(c,a.toLowerCase())>-1;if(!e)for(var f=0,g=b.length;g>f;f++)if(a.match(b[f][0])){void 0!==b[f][1]&&(a=a.replace(b[f][0],b[f][1]));break}}return a},indexOf:function(a,b,c,d){c||(c=-1);for(var e=-1,f=c,g=a.length;g>f;f++)if(a[f]===b||d&&d(a[f],b)){e=f;break}return e},pluralize:function(b,d){return k._apply_rules(b,c,a,d)},singularize:function(b,c){return k._apply_rules(b,d,a,c)},inflect:function(b,e,f,g){return e=parseInt(e,10),isNaN(e)?b:0===e||e>1?k._apply_rules(b,c,a,g):k._apply_rules(b,d,a,f)},camelize:function(a,b){for(var c,d,e,f,g=a.split("/"),h=0,i=g.length;i>h;h++){for(c=g[h].split("_"),d=0,e=c.length;e>d;d++)0!==d&&(c[d]=c[d].toLowerCase()),f=c[d].charAt(0),f=b&&0===h&&0===d?f.toLowerCase():f.toUpperCase(),c[d]=f+c[d].substring(1);g[h]=c.join("")}return g.join("::")},underscore:function(a,b){if(b&&a===a.toUpperCase())return a;for(var c=a.split("::"),d=0,e=c.length;e>d;d++)c[d]=c[d].replace(i,"_$1"),c[d]=c[d].replace(j,"");return c.join("/").toLowerCase()},humanize:function(a,b){return a=a.toLowerCase(),a=a.replace(f,""),a=a.replace(g," "),b||(a=k.capitalize(a)),a},capitalize:function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)},dasherize:function(a){return a.replace(h,"-")},titleize:function(a){a=a.toLowerCase().replace(g," ");for(var b,c,d,f=a.split(" "),h=0,i=f.length;i>h;h++){for(b=f[h].split("-"),c=0,d=b.length;d>c;c++)k.indexOf(e,b[c].toLowerCase())<0&&(b[c]=k.capitalize(b[c]));f[h]=b.join("-")}return a=f.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1)},demodulize:function(a){var b=a.split("::");return b[b.length-1]},tableize:function(a){return a=k.underscore(a),a=k.pluralize(a)},classify:function(a){return a=k.camelize(a),a=k.singularize(a)},foreign_key:function(a,b){return a=k.demodulize(a),a=k.underscore(a)+(b?"":"_")+"id"},ordinalize:function(a){for(var b=a.split(" "),c=0,d=b.length;d>c;c++){var e=parseInt(b[c],10);if(!isNaN(e)){var f=b[c].substring(b[c].length-2),g=b[c].substring(b[c].length-1),h="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===g?h="st":"2"===g?h="nd":"3"===g&&(h="rd")),b[c]+=h}}return b.join(" ")},transform:function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];this.hasOwnProperty(e)&&(a=this[e](a))}return a}};return k.version="1.6.0",k})},{}],218:[function(a,b){b.exports=a("./lib/remote-connector")},{"./lib/remote-connector":220}],219:[function(a,b){function c(){}function d(a,b){Object.defineProperty(a.prototype,b.name,{get:function(){var a=this,c=function(){return a["__get__"+b.name].apply(a,arguments)};return c.count=function(){return a["__count__"+b.name].apply(a,arguments)},c.create=function(){return a["__create__"+b.name].apply(a,arguments)},c.deleteById=destroyById=function(){return a["__destroyById__"+b.name].apply(a,arguments)},c.exists=function(){return a["__exists__"+b.name].apply(a,arguments)},c.findById=function(){return a["__findById__"+b.name].apply(a,arguments)},c}})}var e=a("loopback-datasource-juggler/lib/relation-definition"),f=e.RelationDefinition;b.exports=c,c.hasMany=function(a,b){var c=f.hasMany(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.belongsTo=function(a,b){var c=f.belongsTo(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.hasAndBelongsToMany=function(a,b){var c=f.hasAndBelongsToMany(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.hasOne=function(a,b){var c=f.hasOne(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.referencesMany=function(a,b){var c=f.referencesMany(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.embedsOne=function(a,b){var c=f.embedsOne(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)},c.embedsMany=function(a,b){var c=f.embedsMany(this,a,b);this.dataSource.adapter.resolve(this),d(this,c)}},{"loopback-datasource-juggler/lib/relation-definition":236}],220:[function(a,b){(function(c){function d(a){f("object"==typeof a,"cannot initiaze RemoteConnector without a settings object"),this.client=a.client,this.adapter=a.adapter||"rest",this.protocol=a.protocol||"http",this.root=a.root||"",this.host=a.host||"localhost",this.port=a.port||3e3,this.remotes=g.create(),this.name="remote-connector",this.url=a.url?a.url:this.protocol+"://"+this.host+":"+this.port+this.root;this.DataAccessObject=function(){}}function e(a,b,c){{var d=c.isStatic?a:a.prototype;d[c.name]}d[c.name]=function(){var a,d=Array.prototype.slice.call(arguments),e="function"==typeof d[d.length-1];if(e&&(a=d.pop()),c.isStatic)return b.invoke(c.stringName,d,a);var f=[this.id];return b.invoke(c.stringName,f,d,a)}}var f=a("assert"),g=a("strong-remoting"),h=a("loopback-datasource-juggler/lib/jutil"),i=a("./relations"),j=a("loopback-datasource-juggler/lib/include");b.exports=d,d.prototype.connect=function(){this.remotes.connect(this.url,this.adapter)},d.initialize=function(a,b){var e=a.connector=new d(a.settings);e.connect(),c.nextTick(b)},d.prototype.define=function(a){var b=a.model,c=this.remotes;f(b.sharedClass,"cannot attach "+b.modelName+" to a remote connector without a Model.sharedClass"),h.mixin(b,i),h.mixin(b,j),c.addClass(b.sharedClass),this.resolve(b)},d.prototype.resolve=function(a){var b=this.remotes;a.sharedClass.methods().forEach(function(c){"Change"!==c.name&&"Checkpoint"!==c.name&&e(a,b,c)})}}).call(this,a("_process"))},{"./relations":219,_process:187,assert:38,"loopback-datasource-juggler/lib/include":228,"loopback-datasource-juggler/lib/jutil":230,"strong-remoting":253}],221:[function(a,b,c){c.ModelBuilder=c.LDL=a("./lib/model-builder.js").ModelBuilder,c.DataSource=c.Schema=a("./lib/datasource.js").DataSource,c.ModelBaseClass=a("./lib/model.js"),c.GeoPoint=a("./lib/geo.js").GeoPoint,c.ValidationError=a("./lib/validations.js").ValidationError,Object.defineProperty(c,"version",{get:function(){return a("./package.json").version}});var d="./test/common_test";Object.defineProperty(c,"test",{get:function(){return a(d)}})},{"./lib/datasource.js":225,"./lib/geo.js":226,"./lib/model-builder.js":233,"./lib/model.js":235,"./lib/validations.js":241,"./package.json":252}],222:[function(a,b){(function(a){b.exports=function(b){var c={};return function(d){c[d]||(c[d]=!0,a.noDeprecation||(a.traceDeprecation?console.trace(b,"deprecated",d):console.warn(b,"deprecated",d)));

}}}).call(this,a("_process"))},{_process:187}],223:[function(a,b,c){(function(b){function d(a,b){a instanceof d?(this.isTransaction=!0,this.cache=a.cache,this.ids=a.ids,this.constructor.super_.call(this,"memory",b),this._models=a._models):(this.isTransaction=!1,this.cache={},this.ids={},this.constructor.super_.call(this,"memory",b))}function e(a){return null===a||void 0===a?a:JSON.stringify(a)}function f(a){return null===a||void 0===a?a:"string"==typeof a?JSON.parse(a):a}function g(a){function b(a){if(a instanceof RegExp)return a;var b="";a=a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");for(var c=0,d=a.length;d>c;c++){var e=a.charAt(c);"\\"!==e?b+="%"===e?".*":"_"===e?".":"."===e?"\\.":"*"===e?"\\*":e:(c++,d>c&&(b+=a.charAt(c)))}return b}function c(a,c){if("string"==typeof c&&a instanceof RegExp)return c.match(a);if(void 0===a)return void 0;if("object"==typeof a&&null!==a){if(a.near)return!0;if(a.inq){for(var f=0;f<a.inq.length;f++)if(a.inq[f]==c)return!0;return!1}if("neq"in a)return 0!==d(a.neq,c);if("between"in a)return e({gte:a.between[0]},c)&&e({lte:a.between[1]},c);if(a.like||a.nlike){var g=a.like||a.nlike;if("string"==typeof g&&(g=b(g)),a.like)return!!new RegExp(g).test(c);if(a.nlike)return!new RegExp(g).test(c)}if(e(a,c))return!0}return(null!==a?a.toString():a)==(null!=c?c.toString():c)}function d(a,b){if(null==a||null==b)return a==b?0:0/0;if("number"==typeof a)return a-b;if("string"==typeof a)return a>b?1:b>a?-1:a==b?0:0/0;if("boolean"==typeof a)return a-b;if(a instanceof Date){var c=a-b;return c}return a==b?0:0/0}function e(a,b){return"gt"in a?d(b,a.gt)>0:"gte"in a?d(b,a.gte)>=0:"lt"in a?d(b,a.lt)<0:"lte"in a?d(b,a.lte)<=0:!1}var f=a.where;if("function"==typeof f)return f;var h=Object.keys(f);return function(a){var b=!0;return h.forEach(function(d){if(("and"===d||"or"===d)&&Array.isArray(f[d])){if("and"===d)return b=f[d].every(function(b){return g({where:b})(a)});if("or"===d)return b=f[d].some(function(b){return g({where:b})(a)})}c(f[d],a&&a[d])||(b=!1)}),b}}function h(a,b){if(!a)return b;for(var c in b){var d=b[c];"function"!=typeof d&&(a[c]=d)}return a}var i=a("util"),j=a("loopback-connector").Connector,k=a("../geo"),l=a("../utils"),m=a("fs"),n=a("async");c.initialize=function(a,b){a.connector=new d(null,a.settings),a.connector.connect(b)},c.Memory=d,c.applyFilter=g,i.inherits(d,j),d.prototype.getDefaultIdType=function(){return Number},d.prototype.getTypes=function(){return["db","nosql","memory"]},d.prototype.connect=function(a){this.isTransaction?this.onTransactionExec=a:this.loadFromFile(a)},d.prototype.getCollection=function(a){var b=this._models[a];return b&&b.settings.memory&&(a=b.settings.memory.collection||a),a},d.prototype.initCollection=function(a){this.collection(a,{}),this.collectionSeq(a,1)},d.prototype.collection=function(a,b){return a=this.getCollection(a),arguments.length>1&&(this.cache[a]=b),this.cache[a]},d.prototype.collectionSeq=function(a,b){return a=this.getCollection(a),arguments.length>1&&(this.ids[a]=b),this.ids[a]},d.prototype.loadFromFile=function(a){function c(b){if(b){try{b=JSON.parse(b.toString())}catch(c){return a(c)}d.ids=b.ids||{},d.cache=b.models||{}}else d.cache||(d.ids={},d.cache={});a&&a()}var d=this,e="undefined"!=typeof window&&window.localStorage,f=e&&this.settings.localStorage;if(d.settings.file)m.readFile(d.settings.file,{encoding:"utf8",flag:"r"},function(b,d){b&&"ENOENT"!==b.code?a&&a(b):c(d)});else if(f){var g=window.localStorage.getItem(f);g=g||"{}",c(g)}else b.nextTick(a)},d.prototype.saveToFile=function(a,c){var d=this,e=this.settings.file,f="undefined"!=typeof window&&window.localStorage,g=f&&this.settings.localStorage;if(e)d.writeQueue||(d.writeQueue=n.queue(function(a,b){var c=JSON.stringify({ids:d.ids,models:d.cache},null,"  ");m.writeFile(d.settings.file,c,function(c){b(c),a.callback&&a.callback(c,a.data)})},1)),d.writeQueue.push({data:a,callback:c});else if(g){var h=JSON.stringify({ids:d.ids,models:d.cache},null,"  ");window.localStorage.setItem(g,h),b.nextTick(function(){c&&c(null,a)})}else b.nextTick(function(){c&&c(null,a)})},d.prototype.define=function(a){this.constructor.super_.prototype.define.apply(this,[].slice.call(arguments));var b=a.model.modelName;this.collection(b)||this.initCollection(b)},d.prototype.create=function(a,c,d){var f=this.collectionSeq(a);void 0===f&&(f=this.collectionSeq(a,1));var g=this.getIdValue(a,c)||f;g>f&&(f=g),this.collectionSeq(a,Number(f)+1);var h=this._models[a].properties,i=this.idName(a);return g=h[i]&&h[i].type&&h[i].type(g)||g,this.setIdValue(a,c,g),this.collection(a)||this.collection(a,{}),this.collection(a)[g]?b.nextTick(function(){d(new Error("Duplicate entry for "+a+"."+i))}):(this.collection(a)[g]=e(c),void this.saveToFile(g,d))},d.prototype.updateOrCreate=function(a,b,c){var d=this;this.exists(a,d.getIdValue(a,b),function(e,f){f?d.save(a,b,function(a,b){c(a,b,{isNewInstance:!1})}):d.create(a,b,function(e,f){d.setIdValue(a,b,f),c(e,b,{isNewInstance:!0})})})},d.prototype.save=function(a,b,c){var d=this.getIdValue(a,b),g=this.collection(a),i=g&&this.collection(a)[d];i=i&&f(i),i&&(b=h(i,b)),this.collection(a)[d]=e(b),this.saveToFile(b,function(a){c(a,b,{isNewInstance:!i})})},d.prototype.exists=function(a,c,d){b.nextTick(function(){d(null,this.collection(a)&&this.collection(a).hasOwnProperty(c))}.bind(this))},d.prototype.find=function(a,c,d){b.nextTick(function(){d(null,c in this.collection(a)&&this.fromDb(a,this.collection(a)[c]))}.bind(this))},d.prototype.destroy=function(a,b,c){delete this.collection(a)[b],this.saveToFile(null,c)},d.prototype.fromDb=function(a,b){if(!b)return null;b=f(b);var c=this._models[a].properties;for(var d in b){var e=b[d];if(void 0!==e&&null!==e){if(c[d])switch(c[d].type.name){case"Date":e=new Date(e.toString().replace(/GMT.*$/,"GMT"));break;case"Boolean":e=Boolean(e);break;case"Number":e=Number(e)}b[d]=e}}return b},d.prototype.all=function(a,c,d){function e(a,b){for(var c,d,e=0,f=this.length;f>e;e++){if(d=void 0===b[this[e].key]&&void 0!==a[this[e].key],c=void 0===a[this[e].key]&&void 0!==b[this[e].key],d||a[this[e].key]>b[this[e].key])return 1*this[e].reverse;if(c||a[this[e].key]<b[this[e].key])return-1*this[e].reverse}return 0}var f=this,h=Object.keys(this.collection(a)).map(function(b){return this.fromDb(a,this.collection(a)[b])}.bind(this));if(c){if(!c.order){var i=this.idNames(a);i&&i.length&&(c.order=i)}if(c.order){var j=c.order;"string"==typeof c.order&&(j=[c.order]),j.forEach(function(a,b){var c=1,d=a.match(/\s+(A|DE)SC$/i);d&&(a=a.replace(/\s+(A|DE)SC/i,""),"de"===d[1].toLowerCase()&&(c=-1)),j[b]={key:a,reverse:c}}),h=h.sort(e.bind(j))}var m=k.nearFilter(c.where);m&&(h=k.filter(h,m)),c.where&&(h=h?h.filter(g(c)):h),c.fields&&(h=h.map(l.selectFields(c.fields)));var n=c.skip||c.offset||0,o=c.limit||h.length;h=h.slice(n,n+o)}b.nextTick(function(){c&&c.include?f._models[a].model.include(h,c.include,d):d(null,h)})},d.prototype.destroyAll=function(a,b,c){c||"function"!=typeof b||(c=b,b=void 0);var d=this.collection(a),e=null,f=0;b?(e=g({where:b}),Object.keys(d).forEach(function(b){(!e||e(this.fromDb(a,d[b])))&&(f++,delete d[b])}.bind(this))):(f=Object.keys(d).length,this.collection(a,{})),this.saveToFile({count:f},c)},d.prototype.count=function(a,c,d){var e=this.collection(a),f=Object.keys(e);if(d){var h={where:d};f=f.map(function(b){return this.fromDb(a,e[b])}.bind(this)),f=f.filter(g(h))}b.nextTick(function(){c(null,f.length)})},d.prototype.update=d.prototype.updateAll=function(a,c,d,e){var f=this,h=this.collection(a),i=null;c=c||{},i=g({where:c});var j=Object.keys(h),k=0;n.each(j,function(c,e){var g=f.fromDb(a,h[c]);!i||i(g)?(k++,c=f.getIdValue(a,g),f.updateAttributes(a,c,d,e)):b.nextTick(e)},function(a){return a?e(a):void f.saveToFile({count:k},e)})},d.prototype.updateAttributes=function(a,b,c,d){if(!b){var e=new Error("You must provide an id when updating attributes!");if(d)return d(e);throw e}c=Object.create(c),this.setIdValue(a,c,b);var f=this.collection(a),g=f&&this.collection(a)[b];g?this.save(a,c,d):d(new Error("Could not update attributes. Object with id "+b+" does not exist!"))},d.prototype.transaction=function(){return new d(this)},d.prototype.exec=function(a){this.onTransactionExec(),setTimeout(a,50)},d.prototype.buildNearFilter=function(){},d.prototype.automigrate=function(a,c){var d=this;if(c||"function"!=typeof a||(c=a,a=void 0),"string"==typeof a&&(a=[a]),a=a||Object.keys(d._models),0===a.length)return b.nextTick(c);var e=a.filter(function(a){return!(a in d._models)});return e.length?b.nextTick(function(){c(new Error("Cannot migrate models not attached to this datasource: "+e.join(" ")))}):(a.forEach(function(a){d.initCollection(a)}),void(c&&b.nextTick(c)))}}).call(this,a("_process"))},{"../geo":226,"../utils":240,_process:187,async:35,fs:37,"loopback-connector":242,util:207}],224:[function(a,b){(function(c){function d(){if(d._mixins){var a=this,b=arguments;d._mixins.forEach(function(c){c.call(a,b)})}}function e(a){return a.definition.idName()||"id"}function f(a,b){return b&&b[e(a)]}function g(a,b){var c=e(a),d={where:{}};return d.where[c]=b,d}function h(a,b,c){var d=Object.keys(b);if(1!=d.length)return!1;var f=e(a);return d[0]!==f?!1:b[f]===c}function i(a,b){G("callback is ignored: err=%j, result=%j",a,b)}function j(a,b,c){if("function"==typeof c[c.length-1])return a.ready(b,c);var d=Array.prototype.slice.call(c);d.callee=c.callee;var e=y.createPromiseCallback();return d.push(e),a.ready(b,d)?e.promise:!1}function k(a){var b=new Date(a);if(isNaN(b.getTime()))throw new Error("Invalid date: "+a);return b}function l(a){if("string"==typeof a)switch(a){case"true":case"1":return!0;case"false":case"0":return!1}return null==a?null:Boolean(a)}function m(a){var b=Number(a);return isNaN(b)?a:b}function n(a){return!a||"object"==typeof a&&0===Object.keys(a).length}function o(a,b){return a===b?!0:"number"==typeof a&&"string"==typeof b||"string"==typeof a&&"number"==typeof b?a==b:(a=JSON.stringify(a),b=JSON.stringify(b),a===b?!0:!1)}function p(a,b,c){Object.defineProperty(a,b,{writable:!1,enumerable:!0,configurable:!0,value:c})}b.exports=d;var q=a("async"),r=a("./jutil"),s=a("./validations").ValidationError,t=a("./relations.js"),u=a("./include.js"),v=a("./list.js"),w=a("./geo"),x=a("./connectors/memory").Memory,y=a("./utils"),z=y.fieldsToArray,A=y.removeUndefined,B=y.setScopeValuesFromWhere,C=y.mergeQuery,D=a("util"),E=a("assert"),F=a("./model"),G=a("debug")("loopback:dao");d._forDB=function(a){if(!this.getDataSource().isRelational||!this.getDataSource().isRelational())return a;var b={};for(var c in a){var d=this.getPropertyType(c);b[c]="JSON"===d||"Any"===d||"Object"===d||a[c]instanceof Array?JSON.stringify(a[c]):a[c]}return b},d.defaultScope=function(a,b){var c=this.definition.settings.scope;return"function"==typeof c&&(c=this.definition.settings.scope.call(this,a,b)),c},d.applyScope=function(a,b){var c=this.defaultScope(a,b)||{};"object"==typeof c&&C(a,c||{},this.definition.settings.scope)},d.applyProperties=function(a,b){var c=this.definition.settings.properties;if(c=c||this.definition.settings.attributes,"object"==typeof c)D._extend(a,c);else if("function"==typeof c)D._extend(a,c.call(this,a,b)||{});else if(c!==!1){var d=this.defaultScope(a,b)||{};"object"==typeof d.where&&B(a,d.where,this)}},d.lookupModel=function(){return this},d.create=function(a,b,c){function d(){n.trigger("create",function(a){n.trigger("save",function(b){var d=e(h),f=h.modelName,g=A(n.toObject(!0));this._adapter().create(f,this.constructor._forDB(g),function(e,f,g){return f&&(n.__data[d]=f,p(n,d,f)),g&&(n._rev=g),e?c(e,n):(n.__persisted=!0,void b.call(n,function(){a.call(n,function(){if(e)return c(e,n);var a={Model:h,instance:n,isNewInstance:!0,hookState:t};h.notifyObserversOf("after save",a,function(a){c(a,n),a||h.emit("changed",n)})})}))},n)},n,c)},n,c)}var g=j(this.getDataSource(),this,arguments);if(g)return g;var h=this,k=this;if(void 0===b&&void 0===c?"function"==typeof a&&(c=a,a={}):void 0===c&&"function"==typeof b&&(c=b,b={}),a=a||{},b=b||{},c=c||(Array.isArray(a)?i:y.createPromiseCallback()),E("object"==typeof a,"The data argument must be an object or array"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof c,"The cb argument must be a function"),Array.isArray(a)){for(var l=0,m=a.length;m>l;l++)void 0===a[l]&&(a[l]={});return q.map(a,function(a,c){k.create(a,b,function(b,d){c(null,{err:b,result:d||a})})},function(a,b){if(a)return c(a,b);for(var d=null,e=[],f=0,g=b.length;g>f;f++)b[f].err&&(d||(d=[]),d[f]=b[f].err),e[f]=b[f].result;c(d,e)}),a}var n,o={},r=f(this,a),t={};n=a instanceof h&&!r?a:new h(a),this.applyProperties(o,n),n.setAttributes(o),h=this.lookupModel(a),h!==n.constructor&&(n=new h(a));var u={Model:h,instance:n,isNewInstance:!0,hookState:t};return h.notifyObserversOf("before save",u,function(b){return b?c(b):(a=n.toObject(!0),void n.isValid(function(a){a?d():c(new s(n),n)},a))}),c.promise||n},d.updateOrCreate=d.upsert=function(a,b,c){function d(d,f){if(d)return c(d);var g=h(l,f.query.where,n);if(l.getDataSource().connector.updateOrCreate&&g){var i={Model:l,where:f.query.where,data:a,hookState:m};l.notifyObserversOf("before save",i,function(b,d){function e(a,b,d){var e;if(!b||b instanceof l?e=b:(g._initProperties(b,{persisted:!0}),e=g),a)c(a,e),a||l.emit("changed",g);else{var f={Model:l,instance:e,isNewInstance:d?d.isNewInstance:void 0,hookState:m};l.notifyObserversOf("after save",f,function(a){c(a,e),a||l.emit("changed",g)})}}if(b)return c(b);a=d.data;var f=a,g=a;a instanceof l||(g=new l(a)),f=g.toObject(!1),l.applyProperties(f,g),l=l.lookupModel(f),f=A(f),k.getDataSource().connector.updateOrCreate(l.modelName,f,e)})}else l.findOne({where:f.query.where},{notify:!1},function(d,f){if(d)return c(d);if(g||delete a[e(l)],f)f.updateAttributes(a,b,c);else{l=k.lookupModel(a);var h=new l(a);h.save(b,c)}})}var i=j(this.getDataSource(),this,arguments);if(i)return i;void 0===b&&void 0===c?"function"==typeof a&&(c=a,a={}):void 0===c&&"function"==typeof b&&(c=b,b={}),c=c||y.createPromiseCallback(),a=a||{},b=b||{},E("object"==typeof a,"The data argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof c,"The cb argument must be a function");var k=this,l=this,m={},n=f(this,a);if(!n)return this.create(a,b,c);var o={Model:l,query:g(l,n),hookState:m};return l.notifyObserversOf("access",o,d),c.promise},d.findOrCreate=function(a,b,d,e){function f(a,b){var c=i.modelName;b=A(b),i.getDataSource().connector.findOrCreate(c,a,i._forDB(b),function(b,c,d){var f,g=i.lookupModel(c);if(c&&(f=new g(c,{fields:a.fields,applySetters:!1,persisted:!0})),d){var h={Model:g,instance:f,isNewInstance:!0,hookState:k};g.notifyObserversOf("after save",h,function(a){e.promise?e(a,[f,d]):e(a,f,d),a||g.emit("changed",f)})}else e.promise?e(b,[f,d]):e(b,f,d)})}var g=j(this.getDataSource(),this,arguments);if(g)return g;E(arguments.length>=1,"At least one argument is required"),void 0===b&&void 0===d&&void 0===e?(E("object"==typeof a,"Single argument must be data object"),b=a,a={where:b}):void 0===d&&void 0===e?"function"==typeof b&&(e=b,b=a,a={where:b}):void 0===e&&"function"==typeof d&&(e=d,d={}),e=e||y.createPromiseCallback(),a=a||{where:{}},b=b||{},d=d||{},E("object"==typeof a,"The query argument must be an object"),E("object"==typeof b,"The data argument must be an object"),E("object"==typeof d,"The options argument must be an object"),E("function"==typeof e,"The cb argument must be a function");var h=this,i=this,k={};if(this.getDataSource().connector.findOrCreate){a.limit=1;try{this._normalize(a)}catch(l){return c.nextTick(function(){e(l)}),e.promise}this.applyScope(a);var m={Model:h,query:a,hookState:k};h.notifyObserversOf("access",m,function(a,c){if(a)return e(a);var d=c.query,g={},h=i.lookupModel(b),j=b instanceof h?b:new h(b);h.applyProperties(g,j),j.setAttributes(g);var l={Model:h,instance:j,isNewInstance:!0,hookState:k};h.notifyObserversOf("before save",l,function(a,b){if(a)return e(a);var c=b.instance,g=c.toObject(!0);c.isValid(function(a){a?f(d,g):e(new s(c),c)},g)})})}else h.findOne(a,d,function(a,c){return a?e(a):c?e.promise?e(null,[c,!1]):e(null,c,!1):void h.create(b,d,function(a,b){e.promise?e(a,[b,null!=b]):e(a,b,null!=b)})});return e.promise},d.exists=function(a,b,d){var e=j(this.getDataSource(),this,arguments);return e?e:(E(arguments.length>=1,"The id argument is required"),void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),b=b||{},E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function"),void 0!==a&&null!==a&&""!==a?this.count(g(this,a).where,b,function(a,b){d(a,a?!1:1===b)}):c.nextTick(function(){d(new Error("Model::exists requires the id argument"))}),d.promise)},d.findById=function(a,b,d){var e=j(this.getDataSource(),this,arguments);return e?e:(E(arguments.length>=1,"The id argument is required"),void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),b=b||{},E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function"),null==a||""===a?c.nextTick(function(){d(new Error("Model::findById requires the id argument"))}):this.findOne(g(this,a),b,d),d.promise)},d.findByIds=function(a,b,d,f){void 0===d&&void 0===f?"function"==typeof b&&(f=b,b={}):void 0===f&&"function"==typeof d&&(f=d,d={}),f=f||y.createPromiseCallback(),d=d||{},b=b||{},E(Array.isArray(a),"The ids argument must be an array"),E("object"==typeof b,"The query argument must be an object"),E("object"==typeof d,"The options argument must be an object"),E("function"==typeof f,"The cb argument must be a function");var g=e(this);if(0===a.length)return c.nextTick(function(){f(null,[])}),f.promise;var h={where:{}};return h.where[g]={inq:[].concat(a)},C(h,b||{}),this.find(h,d,function(b,c){f(b,b?c:y.sortObjectsByIds(g,a,c))}),f.promise},d.all=function(){return d.find.apply(this,arguments)};var H={gt:">",gte:">=",lt:"<",lte:"<=",between:"BETWEEN",inq:"IN",nin:"NOT IN",neq:"!=",like:"LIKE",nlike:"NOT LIKE"};d._normalize=function(a){if(!a)return void 0;var b=null;if("object"!=typeof a||Array.isArray(a))throw b=new Error(D.format("The query filter %j is not an object",a)),b.statusCode=400,b;if(a.limit||a.skip||a.offset){var c=Number(a.limit||100),d=Number(a.skip||a.offset||0);if(isNaN(c)||0>=c||Math.ceil(c)!==c)throw b=new Error(D.format("The limit parameter %j is not valid",a.limit)),b.statusCode=400,b;if(isNaN(d)||0>d||Math.ceil(d)!==d)throw b=new Error(D.format("The offset/skip parameter %j is not valid",a.skip||a.offset)),b.statusCode=400,b;a.limit=c,a.offset=d,a.skip=d}if(a.order){var e=a.order;Array.isArray(e)||(e=[e]);for(var f=[],g=0,h=e.length;h>g;g++){if("string"!=typeof e[g])throw b=new Error(D.format("The order %j is not valid",e[g])),b.statusCode=400,b;for(var i=e[g].split(/(?:\s*,\s*)+/),j=0,k=i.length;k>j;j++){var l=i[j];if(0!==l.length){var m=l.split(/\s+/);if(m.length>=2){var n=m[1].toUpperCase();if("ASC"!==n&&"DESC"!==n)throw b=new Error(D.format("The order %j has invalid direction",l)),b.statusCode=400,b;l=m[0]+" "+n}f.push(l)}}}a.order=1===f.length&&"string"==typeof a.order?f[0]:f}return a.fields&&(a.fields=z(a.fields,Object.keys(this.definition.properties))),a=A(a),this._coerce(a.where),a},d._coerce=function(a){var b=this;if(!a)return a;var c;if("object"!=typeof a||Array.isArray(a))throw c=new Error(D.format("The where clause %j is not an object",a)),c.statusCode=400,c;var d=b.definition.properties;for(var e in a){if("and"===e||"or"===e||"nor"===e){var f=a[e];if(!Array.isArray(f))throw c=new Error(D.format("The %s operator has invalid clauses %j",e,f)),c.statusCode=400,c;for(var g=0;g<f.length;g++)b._coerce(f[g]);return a}var h=d[e]&&d[e].type;if(h&&((Array.isArray(h)||h===Array)&&(h=h[0]),h===Date?h=k:h===Boolean?h=l:h===Number&&(h=m),h&&!(h.prototype instanceof F)&&h!==w.GeoPoint)){var i=a[e];if(null!==i&&void 0!==i){var j=null;if("object"==typeof i){if(1!==Object.keys(i).length)continue;for(var n in H)if(n in i){switch(i=i[n],j=n){case"inq":case"nin":if(!Array.isArray(i))throw c=new Error(D.format("The %s property has invalid clause %j",e,a[e])),c.statusCode=400,c;break;case"between":if(!Array.isArray(i)||2!==i.length)throw c=new Error(D.format("The %s property has invalid clause %j",e,a[e])),c.statusCode=400,c;break;case"like":case"nlike":if(!("string"==typeof i||i instanceof RegExp))throw c=new Error(D.format("The %s property has invalid clause %j",e,a[e])),c.statusCode=400,c}break}}if(Array.isArray(i))for(var o=0;o<i.length;o++)null!==i[o]&&void 0!==i[o]&&(i[o]=h(i[o]));else null!==i&&void 0!==i&&(i=h(i));if(j){var p={};p[j]=i,i=p}a[e]=i}}}return a},d.find=function(a,b,d){var e=j(this.getDataSource(),this,arguments);if(e)return e;void 0===b&&void 0===d?"function"==typeof a&&(d=a,a={}):void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),a=a||{},b=b||{},E("object"==typeof a,"The query argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function");var f=this,g={};try{this._normalize(a)}catch(h){return c.nextTick(function(){d(h)}),d.promise}this.applyScope(a);var i=a&&w.nearFilter(a.where),k=!!this.getDataSource().connector.buildNearFilter;if(i)if(k)this.getDataSource().connector.buildNearFilter(a,i);else if(a.where){var l={Model:f,query:a,hookState:g};return f.notifyObserversOf("access",l,function(a,b){return a?d(a):void f.getDataSource().connector.all(f.modelName,{},function(a,c){var e=new x,g=f.modelName;a?d(a):Array.isArray(c)?(e.define({properties:f.dataSource.definitions[f.modelName].properties,settings:f.dataSource.definitions[f.modelName].settings,model:f}),c.forEach(function(a){e.create(g,a,function(){})}),e.all(g,b.query,d)):d(null,[])})}),d.promise}var m=function(b,c){var e=[];if(Array.isArray(c)){for(var g=0,h=c.length;h>g;g++){var j=c[g],l=f.lookupModel(j),m=new l(j,{fields:a.fields,applySetters:!1,persisted:!0});if(a&&a.include)if(a.collect)m=m.__cachedRelations[a.collect],null===m&&(m=void 0);else{var n=u.normalizeInclude(a.include||[]);n.forEach(function(a){var b=a;y.isPlainObject(a)&&(b=Object.keys(a)[0]);var c=m.__cachedRelations[b];Array.isArray(c)&&(c=new v(c,null,m)),c&&(m.__data[b]=c)}),delete m.__data.__cachedRelations}void 0!==m&&e.push(m)}c&&c.countBeforeLimit&&(e.countBeforeLimit=c.countBeforeLimit),!k&&i&&(e=w.filter(e,i)),d(b,e)}else d(b,[])};if(b.notify===!1)f.getDataSource().connector.all(f.modelName,a,m);else{var l={Model:this,query:a,hookState:g};this.notifyObserversOf("access",l,function(a,b){if(a)return d(a);var c=b.query;f.getDataSource().connector.all(f.modelName,c,m)})}return d.promise},d.findOne=function(a,b,c){var d=j(this.getDataSource(),this,arguments);return d?d:(void 0===b&&void 0===c?"function"==typeof a&&(c=a,a={}):void 0===c&&"function"==typeof b&&(c=b,b={}),c=c||y.createPromiseCallback(),a=a||{},b=b||{},E("object"==typeof a,"The query argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof c,"The cb argument must be a function"),a.limit=1,this.find(a,b,function(a,b){return a||!b||!b.length>0?c(a,null):void c(a,b[0])}),c.promise)},d.remove=d.deleteAll=d.destroyAll=function(a,b,d){function e(a){function e(c,e){if(c)return d(c);if(b.notify===!1)return d(c,e);var f={Model:g,where:a,hookState:i};g.notifyObserversOf("after delete",f,function(b){d(b,e),b||g.emit("deletedAll",n(a)?void 0:a)})}if(n(a))g.getDataSource().connector.destroyAll(g.modelName,e);else{try{a=A(a),a=g._coerce(a)}catch(f){return c.nextTick(function(){d(f)})}g.getDataSource().connector.destroyAll(g.modelName,a,e)}}var f=j(this.getDataSource(),this,arguments);if(f)return f;var g=this;void 0===b&&void 0===d?"function"==typeof a&&(d=a,a={}):void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),a=a||{},b=b||{},E("object"==typeof a,"The where argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function");var h={where:a};this.applyScope(h),a=h.where;var i={},k={Model:g,where:n(a)?{}:a,hookState:i};if(b.notify===!1)e(a);else{h={where:n(a)?{}:a};var k={Model:g,query:h,hookState:i};g.notifyObserversOf("access",k,function(a,b){if(a)return d(a);var c={Model:g,where:b.query.where,hookState:i};g.notifyObserversOf("before delete",c,function(a,b){return a?d(a):void e(b.where)})})}return d.promise},d.removeById=d.destroyById=d.deleteById=function(a,b,d){var e=j(this.getDataSource(),this,arguments);if(e)return e;if(E(arguments.length>=1,"The id argument is required"),void 0===d&&"function"==typeof b&&(d=b,b={}),b=b||{},d=d||y.createPromiseCallback(),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function"),null==a||""===a)return c.nextTick(function(){d(new Error("Model::deleteById requires the id argument"))}),d.promise;var f=this;return this.remove(g(this,a).where,b,function(b){"function"==typeof d&&d(b),b||f.emit("deleted",a)}),d.promise},d.count=function(a,b,d){var e=j(this.getDataSource(),this,arguments);if(e)return e;void 0===b&&void 0===d?"function"==typeof a&&(d=a,a={}):void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),a=a||{},b=b||{},E("object"==typeof a,"The where argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function");var f={where:a};this.applyScope(f),a=f.where;try{a=A(a),a=this._coerce(a)}catch(g){return c.nextTick(function(){d(g)}),d.promise}var h=this,i={},k={Model:h,query:{where:a},hookState:i};return this.notifyObserversOf("access",k,function(b,c){return b?d(b):(a=c.query.where,void h.getDataSource().connector.count(h.modelName,d,a))}),d.promise},d.prototype.save=function(a,b){var c=j(this.getDataSource(),this,arguments);if(c)return c;var d=this.constructor;if("function"==typeof a&&(b=a,a={}),b=b||y.createPromiseCallback(),a=a||{},E("object"==typeof a,"The options argument should be an object"),E("function"==typeof b,"The cb argument should be a function"),void 0===a.validate&&(a.validate=!0),void 0===a["throws"]&&(a["throws"]=!1),this.isNewRecord())return d.create(this,b);var e=this,f=d.modelName,g={},h={Model:d,instance:e,hookState:g};return d.notifyObserversOf("before save",h,function(c){function h(){e.trigger("save",function(a){e.trigger("update",function(c){i=A(i),e._adapter().save(f,e.constructor._forDB(i),function(f,h,j){if(f)return b(f,e);e._initProperties(i,{persisted:!0});var k={Model:d,instance:e,isNewInstance:j&&j.isNewInstance,hookState:g};d.notifyObserversOf("after save",k,function(f){return f?b(f,e):void c.call(e,function(){a.call(e,function(){b(f,e),f||d.emit("changed",e)})})})})},i,b)},i,b)}if(c)return b(c);var i=e.toObject(!0);return d.applyProperties(i,e),e.setAttributes(i),a.validate?void e.isValid(function(c){if(c)h();else{var d=new s(e);if(a["throws"])throw d;b(d,e)}}):h()}),b.promise},d.update=d.updateAll=function(a,b,d,e){function f(a,b){try{a=A(a),a=i._coerce(a),b=A(b),b=i._coerce(b)}catch(d){return c.nextTick(function(){e(d)})}var f=i.getDataSource().connector;f.update(i.modelName,a,b,function(c,d){if(c)return e(c);var f={Model:i,where:a,data:b,hookState:k};i.notifyObserversOf("after save",f,function(a){return e(a,d)})})}var g=j(this.getDataSource(),this,arguments);if(g)return g;E(arguments.length>=1,"At least one argument is required"),void 0===b&&void 0===d&&void 0===e&&1===arguments.length?(b=a,a={}):void 0===d&&void 0===e?"function"==typeof b&&(e=b,b=a,a={}):void 0===e&&"function"==typeof d&&(e=d,d={}),b=b||{},d=d||{},e=e||y.createPromiseCallback(),E("object"==typeof a,"The where argument must be an object"),E("object"==typeof b,"The data argument must be an object"),E("object"==typeof d,"The options argument must be an object"),E("function"==typeof e,"The cb argument must be a function");var h={where:a};this.applyScope(h),this.applyProperties(b),a=h.where;var i=this,k={},l={Model:i,query:{where:a},hookState:k};return i.notifyObserversOf("access",l,function(a,c){if(a)return e(a);var d={Model:i,where:c.query.where,data:b,hookState:k};i.notifyObserversOf("before save",d,function(a,b){return a?e(a):void f(b.where,b.data)})}),e.promise},d.prototype.isNewRecord=function(){return!this.__persisted},d.prototype._adapter=function(){return this.getDataSource().connector},d.prototype.remove=d.prototype["delete"]=d.prototype.destroy=function(a,b){function c(a){return h(i,a,k)?void e.trigger("destroy",function(c){e._adapter().destroy(e.constructor.modelName,k,function(d){return d?b(d):void c(function(){var c={Model:i,where:a,instance:e,hookState:l};i.notifyObserversOf("after delete",c,function(a){b(a),a||i.emit("deleted",k)})})})},null,b):void i.deleteAll(a,{notify:!1},function(c){if(c)return b(c);var d={Model:i,where:a,instance:e,hookState:l};i.notifyObserversOf("after delete",d,function(a){b(a),a||i.emit("deleted",k)})})}var d=j(this.getDataSource(),this,arguments);if(d)return d;void 0===b&&"function"==typeof a&&(b=a,a={}),b=b||y.createPromiseCallback(),a=a||{},E("object"==typeof a,"The options argument should be an object"),E("function"==typeof b,"The cb argument should be a function");var e=this,i=this.constructor,k=f(this.constructor,this),l={},m={Model:i,query:g(i,k),hookState:l};return i.notifyObserversOf("access",m,function(a,d){if(a)return b(a);var f={Model:i,where:d.query.where,instance:e,hookState:l};i.notifyObserversOf("before delete",f,function(a,d){return a?b(a):void c(d.where)})}),b.promise},d.prototype.setAttribute=function(a,b){this[a]=b},d.prototype.updateAttribute=function(a,b,c){var d={};return d[a]=b,this.updateAttributes(d,c)},d.prototype.setAttributes=function(a){if("object"==typeof a){this.constructor.applyProperties(a,this);var b=this.constructor,c=this;for(var d in a)c.setAttribute(d,a[d]);b.emit("set",c)}},d.prototype.unsetAttribute=function(a,b){b?this[a]=this.__data[a]=null:(delete this[a],delete this.__data[a])},d.prototype.updateAttributes=function(a,b,d){var e=j(this.getDataSource(),this,arguments);if(e)return e;void 0===b&&void 0===d?"function"==typeof a&&(d=a,a=void 0):void 0===d&&"function"==typeof b&&(d=b,b={}),d=d||y.createPromiseCallback(),b=b||{},E("object"==typeof a&&null!==a,"The data argument must be an object"),E("object"==typeof b,"The options argument must be an object"),E("function"==typeof d,"The cb argument must be a function");var h=this,i=this.constructor,k=i.modelName,l={};a instanceof i&&(a=a.toObject(!1)),a=A(a);for(var m=i.definition.idNames(),n=0,p=m.length;p>n;n++){var q=m[n];if(void 0!==a[q]&&!o(a[q],h[q])){var r=new Error("id property ("+q+") cannot be updated from "+h[q]+" to "+a[q]);return r.statusCode=400,c.nextTick(function(){d(r)})}}var t={Model:i,where:g(i,f(i,h)).where,data:a,currentInstance:h,hookState:l};return i.notifyObserversOf("before save",t,function(b,c){return b?d(b):(a=c.data,h.setAttributes(a),void h.isValid(function(b){return b?void h.trigger("save",function(b){h.trigger("update",function(c){var e={};for(var g in a)h[g]=a[g],e[g]=h[g],"object"==typeof e[g]&&null!==e[g]&&"function"==typeof e[g].toObject&&(e[g]=e[g].toObject());h._adapter().updateAttributes(k,f(h.constructor,h),h.constructor._forDB(e),function(a){a||(h.__persisted=!0),c.call(h,function(){b.call(h,function(){if(a)return d(a,h);var b={Model:i,instance:h,isNewInstance:!1,hookState:l};i.notifyObserversOf("after save",b,function(a){a||i.emit("changed",h),d(a,h)})})})})},a,d)},a,d):void d(new s(h),h)},a))}),d.promise},d.prototype.reload=function(a){var b=j(this.getDataSource(),this,arguments);return b?b:this.constructor.findById(f(this.constructor,this),a)};var I=a("./scope.js").defineScope;d.scope=function(a,b,c,d,e){var f=this;e&&e.isStatic===!1&&(f=f.prototype),I(f,c||f,a,b,d,e)},r.mixin(d,u),r.mixin(d,t)}).call(this,a("_process"))},{"./connectors/memory":223,"./geo":226,"./include.js":228,"./jutil":230,"./list.js":231,"./model":235,
"./relations.js":237,"./scope.js":238,"./utils":240,"./validations":241,_process:187,assert:38,async:35,debug:211,util:207}],225:[function(a,b,c){(function(b){function d(a,b,c){if(!(this instanceof d))return new d(a,b);"object"==typeof a&&void 0===b&&(b=a,a=void 0),"string"==typeof a&&-1!==a.indexOf("://")&&(a=p.parseSettings(a)),"string"==typeof b&&-1!==b.indexOf("://")&&(b=p.parseSettings(b)),this.modelBuilder=c||new l,this.models=this.modelBuilder.models,this.definitions=this.modelBuilder.definitions,this._operations={},this.setup(a,b),this._setupConnector();var e=this.connector,f=e&&e.DataAccessObject||this.constructor.DataAccessObject;this.DataAccessObject=function(){},Object.keys(f).forEach(function(a){var b=f[a];this.DataAccessObject[a]=b,"function"==typeof b&&this.defineOperation(a,{accepts:b.accepts,returns:b.returns,http:b.http,remoteEnabled:b.shared?!0:!1,scope:this.DataAccessObject,fnName:a})}.bind(this)),Object.keys(f.prototype).forEach(function(a){var b=f.prototype[a];this.DataAccessObject.prototype[a]=b,"function"==typeof b&&this.defineOperation(a,{prototype:!0,accepts:b.accepts,returns:b.returns,http:b.http,remoteEnabled:b.shared?!0:!1,scope:this.DataAccessObject.prototype,fnName:a})}.bind(this))}function e(a){var b=[];return a.match(/^\//)||(b.push("./connectors/"+a),0!==a.indexOf("loopback-connector-")&&b.push("loopback-connector-"+a)),-1===["mongodb","oracle","mysql","postgresql","mssql","rest","soap"].indexOf(a)&&b.push(a),b}function f(b,c){var d;c=c||a;for(var e=0;e<b.length;e++){try{d=c(b[e])}catch(f){}if(d)break}return d}function g(a){return a?a.prototype instanceof q:!1}function h(a){return a&&!a.settings.unresolved&&a.dataSource instanceof d}function i(a){return a?a.charAt(0).toUpperCase()+(a.length>1?a.slice(1).toLowerCase():""):a}function j(a,b){if(!a)return a;var c=a.split(/-|_/);c[0]=b?c[0].toLowerCase():i(c[0]);for(var d=1;d<c.length;d++)c[d]=i(c[d]);return c.join("")}function k(a,b,c){Object.defineProperty(a,b,{writable:!1,enumerable:!1,configurable:!1,value:c})}var l=a("./model-builder.js").ModelBuilder,m=a("./model-definition.js"),n=a("./relation-definition.js"),o=a("./jutil"),p=a("./utils"),q=a("./model.js"),r=a("./dao.js"),s=a("./scope.js").defineScope,t=a("events").EventEmitter,u=a("util"),v=a("assert"),w=a("async"),x=a("traverse");"loopback"===b.env.DEBUG&&(b.env.DEBUG="loopback:*");var y=a("debug")("loopback:datasource");c.DataSource=d;var z=Array.prototype.slice;u.inherits(d,t),d.DataAccessObject=r,d.prototype._setupConnector=function(){if(this.connector=this.connector||this.adapter,this.adapter=this.connector,this.connector){this.connector.dataSource||(this.connector.dataSource=this);var a=this;this.connector.log=function(b,c){a.log(b,c)},this.connector.logger=function(a){var b=Date.now(),c=this.log;return function(d){c(d||a,b)}}}},d._resolveConnector=function(a,b){var c=e(a),d=f(c,b),g=null;return d||(g=u.format('\nWARNING: LoopBack connector "%s" is not installed as any of the following modules:\n\n %s\n\nTo fix, run:\n\n    npm install %s\n',a,c.join("\n"),c[c.length-1])),{connector:d,error:g}},d.prototype.setup=function(a,c){var e,f=this;if(a&&"object"==typeof a&&!c&&(c=a,a=void 0),"object"==typeof c&&(c.initialize?e=c:c.connector?e=c.connector:c.adapter&&(e=c.adapter)),this.settings=c||{},this.settings.debug=this.settings.debug||y.enabled,this.settings.debug&&y("Settings: %j",this.settings),this.connected=!1,this.connecting=!1,"string"==typeof e&&(a=e,e=void 0),a=a||e&&e.name,this.name=a,a&&!e)if("object"==typeof a)e=a,this.name=e.name;else{var g=d._resolveConnector(a);if(e=g.connector,!e)return console.error(g.error),void this.emit("error",new Error(g.error))}if(e){var h=function(a){if(this._setupConnector(),!this.connector)throw new Error("Connector is not defined correctly: it should create `connector` member of dataSource");this.connected=!a,this.connected?this.emit("connected"):(console.error("Connection fails: ",a,"\nIt will be retried for the next request."),this.emit("error",a),this.connecting=!1)}.bind(this);"function"==typeof e.initialize?e.initialize(this,h):"function"==typeof e&&(this.connector=new e(this.settings),h())}f.connect=function(a){var c=this;return c.connected||c.connecting?void b.nextTick(function(){a&&a()}):(c.connecting=!0,void(c.connector.connect?c.connector.connect(function(b,d){b?(c.connected=!1,c.connecting=!1,c.emit("error",b)):(c.connected=!0,c.connecting=!1,c.emit("connected")),a&&a(b,d)}):b.nextTick(function(){c.connected=!0,c.connecting=!1,c.emit("connected"),a&&a()})))}},d.relationTypes=Object.keys(n.RelationTypes),d.prototype.defineScopes=function(a,b){if(b)for(var c in b)s(a,a,c,b[c],{},b[c].options)},d.prototype.defineRelations=function(a,b){var c=this,e=function(b,c,d,e){h(d)||d.once("dataAccessConfigured",function(d){if(!e||h(e)){var f=x(c).clone();f.as=b,f.model=d,e&&(f.through=e),a[c.type].call(a,b,f)}}),e&&!h(e)&&e.once("dataAccessConfigured",function(e){if(h(d)){var f=x(c).clone();f.as=b,f.model=d,f.through=e,a[c.type].call(a,b,f)}})};b&&Object.keys(b).forEach(function(f){var i=b[f];v(-1!==d.relationTypes.indexOf(i.type),"Invalid relation type: "+i.type);var j,k;if(i.polymorphic&&"belongsTo"!==i.type&&!i.model)throw new Error("No model specified for polymorphic "+i.type+": "+f);i.polymorphic&&(k="string"==typeof i.model?i.model:f,"string"==typeof i.polymorphic?k=i.polymorphic:"object"==typeof i.polymorphic&&"string"==typeof i.polymorphic.as&&(k=i.polymorphic.as)),i.model&&(j=g(i.model)?i.model:c.getModel(i.model,!0));var l=null;if(i.through&&(l=g(i.through)?i.through:c.getModel(i.through,!0)),j&&!h(j)||l&&!h(l))e(f,i,j,l);else{var m=x(i).clone();m.as=f,m.model=k||j,l&&(m.through=l),a[i.type].call(a,f,m)}})},d.prototype.setupDataAccess=function(a,b){if(this.connector){var c=a.definition.idName(),d=a.definition.rawProperties[c];if(d&&d.generated&&this.connector.getDefaultIdType){var e=this.connector.getDefaultIdType()||String;d.type=e,a.definition.properties[c].type=e,b.forceId&&a.validatesAbsenceOf(c,{"if":"isNewRecord"})}this.connector.define&&this.connector.define({model:a,properties:a.definition.properties,settings:b})}this.mixin(a);var f=b.relationships||b.relations;this.defineRelations(a,f),a.emit("dataAccessConfigured",a);var g=b.scopes||{};this.defineScopes(a,g)},d.prototype.createModel=d.prototype.define=function(a,b,c){var d=z.call(arguments);if(!a)throw new Error("Class name required");1===d.length&&(b={},d.push(b)),2===d.length&&(c={},d.push(c)),b=b||{},c=c||{},this.isRelational()&&((void 0===c.strict||null===c.strict)&&(c.strict=!0),c.strict===!1&&(c.strict="throw"));var e=this.modelBuilder.define(a,b,c);return e.dataSource=this,c.unresolved?e:(this.setupDataAccess(e,c),e.emit("dataSourceAttached",e),e)},d.prototype.mixin=function(a){var b=this.operations(),c=this.DataAccessObject;o.mixin(a,c,{proxyFunctions:!0,override:!0}),Object.keys(b).forEach(function(c){var d,e=b[c];e.enabled&&(d=e.prototype?a.prototype:a,Object.keys(e).filter(function(a){return~["scope","fnName","prototype"].indexOf(a)}).forEach(function(a){"undefined"!=typeof e[a]&&(e.scope[e.fnName][a]=e[a])}))})},d.prototype.getModel=function(a,b){return this.modelBuilder.getModel(a,b)},d.prototype.getModelDefinition=function(a){return this.modelBuilder.getModelDefinition(a)},d.prototype.getTypes=function(){var a=this.connector&&this.connector.getTypes,b=a&&a()||[];return"string"==typeof b&&(b=b.split(/[\s,\/]+/)),b},d.prototype.supportTypes=function(a){var b=this.getTypes();if(Array.isArray(a)){for(var c=0;c<a.length;c++)if(-1===b.indexOf(a[c]))return!1;return!0}return-1!==b.indexOf(a)},d.prototype.attach=function(a){return a.dataSource===this?a:(a.modelBuilder!==this.modelBuilder&&(this.modelBuilder.definitions[a.modelName]=a.definition,this.modelBuilder.models[a.modelName]=a,a.modelBuilder=this.modelBuilder),a.dataSource=this,this.setupDataAccess(a,a.settings),a.emit("dataSourceAttached",a),a)},d.prototype.defineProperty=function(a,b,c){this.modelBuilder.defineProperty(a,b,c);var d=this.getModelDefinition(a).properties[b];this.connector&&this.connector.defineProperty&&this.connector.defineProperty(a,b,d)},d.prototype.automigrate=function(a,c){if(this.freeze(),c||"function"!=typeof a||(c=a,a=void 0),!this.connector.automigrate)return c&&b.nextTick(c);"string"==typeof a&&(a=[a]);var d=this.connector._models;if(d&&"object"==typeof d){if(a=a||Object.keys(d),0===a.length)return c&&b.nextTick(c);var e=a.filter(function(a){return!(a in d)});if(e.length)return b.nextTick(function(){c&&c(new Error("Cannot migrate models not attached to this datasource: "+e.join(" ")))})}this.connector.automigrate(a,c)},d.prototype.autoupdate=function(a,c){if(this.freeze(),c||"function"!=typeof a||(c=a,a=void 0),!this.connector.autoupdate)return c&&b.nextTick(c);"string"==typeof a&&(a=[a]);var d=this.connector._models;if(d&&"object"==typeof d){if(a=a||Object.keys(d),0===a.length)return b.nextTick(c);var e=a.filter(function(a){return!(a in d)});if(e.length)return b.nextTick(function(){c&&c(new Error("Cannot migrate models not attached to this datasource: "+e.join(" ")))})}this.connector.autoupdate(a,c)},d.prototype.discoverModelDefinitions=function(a,c){this.freeze(),this.connector.discoverModelDefinitions?this.connector.discoverModelDefinitions(a,c):c&&b.nextTick(c)},d.prototype.discoverModelDefinitionsSync=function(a){return this.freeze(),this.connector.discoverModelDefinitionsSync?this.connector.discoverModelDefinitionsSync(a):null},d.prototype.discoverModelProperties=function(a,c,d){this.freeze(),this.connector.discoverModelProperties?this.connector.discoverModelProperties(a,c,d):d&&b.nextTick(d)},d.prototype.discoverModelPropertiesSync=function(a,b){return this.freeze(),this.connector.discoverModelPropertiesSync?this.connector.discoverModelPropertiesSync(a,b):null},d.prototype.discoverPrimaryKeys=function(a,c,d){this.freeze(),this.connector.discoverPrimaryKeys?this.connector.discoverPrimaryKeys(a,c,d):d&&b.nextTick(d)},d.prototype.discoverPrimaryKeysSync=function(a,b){return this.freeze(),this.connector.discoverPrimaryKeysSync?this.connector.discoverPrimaryKeysSync(a,b):null},d.prototype.discoverForeignKeys=function(a,c,d){this.freeze(),this.connector.discoverForeignKeys?this.connector.discoverForeignKeys(a,c,d):d&&b.nextTick(d)},d.prototype.discoverForeignKeysSync=function(a,b){return this.freeze(),this.connector.discoverForeignKeysSync?this.connector.discoverForeignKeysSync(a,b):null},d.prototype.discoverExportedForeignKeys=function(a,c,d){this.freeze(),this.connector.discoverExportedForeignKeys?this.connector.discoverExportedForeignKeys(a,c,d):d&&b.nextTick(d)},d.prototype.discoverExportedForeignKeysSync=function(a,b){return this.freeze(),this.connector.discoverExportedForeignKeysSync?this.connector.discoverExportedForeignKeysSync(a,b):null},d.prototype.discoverSchema=function(a,b,c){b=b||{},c||"function"!=typeof b||(c=b,b={}),b.visited={},b.relations=!1,this.discoverSchemas(a,b,function(a,b){if(a)return void(c&&c(a,b));for(var d in b)return void(c&&c(null,b[d]))})},d.prototype.discoverSchemas=function(a,b,c){b=b||{},c||"function"!=typeof b||(c=b,b={});var e=this,f=this.connector.name||this.name,g=[this.discoverModelProperties.bind(this,a,b),this.discoverPrimaryKeys.bind(this,a,b)],h=b.associations||b.relations;h&&g.push(this.discoverForeignKeys.bind(this,a,b)),w.parallel(g,function(g,i){if(g)return void(c&&c(g));var k=i[0];if(!k||0===k.length)return void(c&&c());var l=i[1],m={};l.forEach(function(a){m[a.columnName]=a.keySeq}),e.settings.debug&&y("Primary keys: ",m);var n={name:j(a,!1),options:{idInjection:!1},properties:{}};n.options[f]={schema:k[0].owner,table:a},k.forEach(function(a){var b=a,c=j(a.columnName,!0);n.properties[c]={type:a.type,required:"N"===a.nullable||"NO"===a.nullable||0===a.nullable||a.nullable===!1,length:a.dataLength,precision:a.dataPrecision,scale:a.dataScale},m[a.columnName]&&(n.properties[c].id=m[a.columnName]),n.properties[c][f]={columnName:b.columnName,dataType:b.dataType,dataLength:b.dataLength,dataPrecision:a.dataPrecision,dataScale:a.dataScale,nullable:b.nullable}}),b.visited=b.visited||{};var o=k[0].owner+"."+a;b.visited.hasOwnProperty(o)||(e.settings.debug&&y("Adding schema for "+o),b.visited[o]=n);var p={};if(h){var q={},r=i[2];r.forEach(function(a){var b={keySeq:a.keySeq,owner:a.pkOwner,tableName:a.pkTableName,columnName:a.pkColumnName};q[a.fkName]?q[a.fkName].push(b):q[a.fkName]=[b]}),e.settings.debug&&y("Foreign keys: ",q),n.options.relations={},r.forEach(function(a){var c=j(a.pkTableName,!0);n.options.relations[c]={model:j(a.pkTableName,!1),type:"belongsTo",foreignKey:j(a.fkColumnName,!0)};var d=a.pkOwner+"."+a.pkTableName;b.visited.hasOwnProperty(d)||p.hasOwnProperty(d)||(p[d]={owner:a.pkOwner,tableName:a.pkTableName})})}if(0===Object.keys(p).length)c&&c(null,b.visited);else{var s=[];for(var t in p){e.settings.debug&&y("Discovering related schema for "+o);var u={};for(var v in b)u[v]=b[v];u.owner=p[t].owner,s.push(d.prototype.discoverSchemas.bind(e,p[t].tableName,u))}w.parallel(s,function(a,b){var d=b&&b[0];c&&c(a,d)})}})},d.prototype.discoverSchemasSync=function(a,b){var c=this,d=this.name||this.connector.name,e=this.discoverModelPropertiesSync(a,b);if(!e||0===e.length)return[];var f=this.discoverPrimaryKeysSync(a,b),g={};f.forEach(function(a){g[a.columnName]=a.keySeq}),c.settings.debug&&y("Primary keys: ",g);var h={name:j(a,!1),options:{idInjection:!1},properties:{}};h.options[d]={schema:e.length>0&&e[0].owner,table:a},e.forEach(function(a){var b=a,c=j(a.columnName,!0);h.properties[c]={type:a.type,required:"N"===a.nullable,length:a.dataLength,precision:a.dataPrecision,scale:a.dataScale},g[a.columnName]&&(h.properties[c].id=g[a.columnName]),h.properties[c][d]={columnName:b.columnName,dataType:b.dataType,dataLength:b.dataLength,dataPrecision:a.dataPrecision,dataScale:a.dataScale,nullable:b.nullable}}),b.visited=b.visited||{};var i=e[0].owner+"."+a;b.visited.hasOwnProperty(i)||(c.settings.debug&&y("Adding schema for "+i),b.visited[i]=h);var k={},l=b.associations||b.relations;if(l){var m={},n=this.discoverForeignKeysSync(a,b);n.forEach(function(a){var b={keySeq:a.keySeq,owner:a.pkOwner,tableName:a.pkTableName,columnName:a.pkColumnName};m[a.fkName]?m[a.fkName].push(b):m[a.fkName]=[b]}),c.settings.debug&&y("Foreign keys: ",m),h.options.relations={},n.forEach(function(a){var c=j(a.pkTableName,!0);h.options.relations[c]={model:j(a.pkTableName,!1),type:"belongsTo",foreignKey:j(a.fkColumnName,!0)};var d=a.pkOwner+"."+a.pkTableName;b.visited.hasOwnProperty(d)||k.hasOwnProperty(d)||(k[d]={owner:a.pkOwner,tableName:a.pkTableName})})}if(0===Object.keys(k).length)return b.visited;for(var o in k){c.settings.debug&&y("Discovering related schema for "+i);var p={};for(var q in b)p[q]=b[q];p.owner=k[o].owner,c.discoverSchemasSync(k[o].tableName,p)}return b.visited},d.prototype.discoverAndBuildModels=function(a,b,c){var d=this;b=b||{},this.discoverSchemas(a,b,function(a,e){if(a)return void(c&&c(a,e));var f=[];for(var g in e){var h=e[g];b.base&&(h.options=h.options||{},h.options.base=b.base),f.push(h)}var i=d.modelBuilder.buildModels(f,d.createModel.bind(d));c&&c(a,i)})},d.prototype.discoverAndBuildModelsSync=function(a,b){b=b||{};var c=this.discoverSchemasSync(a,b),d=[];for(var e in c){var f=c[e];b.base&&(f.options=f.options||{},f.options.base=b.base),d.push(f)}var g=this.modelBuilder.buildModels(d,this.createModel.bind(this));return g},d.prototype.buildModelFromInstance=function(a,b,c){var d=l.introspect(b);return this.createModel(a,d,c)},d.prototype.isActual=function(a,c){this.freeze(),this.connector.isActual?this.connector.isActual(a,c):(c||"function"!=typeof a||(c=a,a=void 0),c&&b.nextTick(function(){c(null,!0)}))},d.prototype.log=function(a,b){y(a,b),this.emit("log",a,b)},d.prototype.freeze=function(){if(!this.connector)throw new Error("The connector has not been initialized.");this.connector.freezeDataSource&&this.connector.freezeDataSource(),this.connector.freezeSchema&&this.connector.freezeSchema()},d.prototype.tableName=function(a){return this.getModelDefinition(a).tableName(this.connector.name)},d.prototype.columnName=function(a,b){return this.getModelDefinition(a).columnName(this.connector.name,b)},d.prototype.columnMetadata=function(a,b){return this.getModelDefinition(a).columnMetadata(this.connector.name,b)},d.prototype.columnNames=function(a){return this.getModelDefinition(a).columnNames(this.connector.name)},d.prototype.idColumnName=function(a){return this.getModelDefinition(a).idColumnName(this.connector.name)},d.prototype.idName=function(a){return this.getModelDefinition(a).idName||console.error("No id name",this.getModelDefinition(a)),this.getModelDefinition(a).idName()},d.prototype.idNames=function(a){return this.getModelDefinition(a).idNames()},d.prototype.idProperty=function(a){var b=this.getModelDefinition(a),c=b&&b.ids();return c&&c[0]&&c[0].property},d.prototype.defineForeignKey=function(a,b,c){var d=null,e=this.getModelDefinition(c),f=e&&e.idName();f&&(d=e.properties[f].type);var g=this.getModelDefinition(a);if(g.properties[b])return void(d&&(g.rawProperties[b].type=g.properties[b].type=d));var h={type:d},i=this.columnMetadata(c,f);if(i&&i.dataType&&(h[this.connector.name]={},h[this.connector.name].dataType=i.dataType),this.connector.defineForeignKey){var j=function(c,e){if(c)throw c;h.type=e||d,this.defineProperty(a,b,h)}.bind(this);switch(this.connector.defineForeignKey.length){case 4:this.connector.defineForeignKey(a,b,c,j);break;default:case 3:this.connector.defineForeignKey(a,b,j)}}else this.defineProperty(a,b,h)},d.prototype.disconnect=function(a){var c=this;this.connected&&"function"==typeof this.connector.disconnect?this.connector.disconnect(function(b,d){c.connected=!1,a&&a(b,d)}):b.nextTick(function(){a&&a()})},d.prototype.copyModel=function(a){var b=this,c=a.modelName,d=a.modelBuilder.getModelDefinition(c),e=function(){a.apply(this,[].slice.call(arguments))};return u.inherits(e,a),e.__proto__=a,k(e,"dataSource",b),k(e,"modelName",c),k(e,"relations",a.relations),c in b.modelBuilder.models||(b.modelBuilder.models[c]=e,b.modelBuilder.definitions[c]=new m(b.modelBuilder,d.name,d.properties,d.settings),!b.isTransaction&&b.connector&&b.connector.define&&b.connector.define({model:e,properties:d.properties,settings:d.settings})),e},d.prototype.transaction=function(){var a=this,b=new t;for(var c in a)b[c]=a[c];b.isTransaction=!0,b.origin=a,b.name=a.name,b.settings=a.settings,b.connected=!1,b.connecting=!1,b.connector=a.connector.transaction(),b.modelBuilder=new l,b.models=b.modelBuilder.models,b.definitions=b.modelBuilder.definitions;for(var d in a.modelBuilder.models)a.copyModel.call(b,a.modelBuilder.models[d]);return b.exec=function(a){b.connector.exec(a)},b},d.prototype.enableRemote=function(a){var b=this.getOperation(a);if(!b)throw new Error(a+" is not provided by the attached connector");b.remoteEnabled=!0},d.prototype.disableRemote=function(a){var b=this.getOperation(a);if(!b)throw new Error(a+" is not provided by the attached connector");b.remoteEnabled=!1},d.prototype.getOperation=function(a){for(var b=this.operations(),c=Object.keys(b),d=0;d<c.length;d++){var e=b[c[d]];if(e.name===a)return e}},d.prototype.operations=function(){return this._operations},d.prototype.defineOperation=function(a,b,c){b.fn=c,b.name=a,this._operations[a]=b},d.prototype.isRelational=function(){return this.connector&&this.connector.relational},d.prototype.ready=function(a,b){var c=this;if(this.connected)return!1;var d=b.callee,e=null,f=null,g=null;e=function(){c.removeListener("error",f),g&&clearTimeout(g),d.apply(a,[].slice.call(b))},f=function(a){c.removeListener("connected",e),g&&clearTimeout(g);var d=[].slice.call(b),f=d.pop();"function"==typeof f&&f(a)},this.once("connected",e),this.once("error",f);var h=this.settings.connectionTimeout||5e3;return g=setTimeout(function(){c.removeListener("error",f),c.removeListener("connected",e);var a=[].slice.call(b),d=a.pop();"function"==typeof d&&d(new Error("Timeout in connecting after "+h+" ms"))},h),this.connecting||this.connect(),!0},d.prototype.ping=function(a){var c=this;c.connector.ping?this.connector.ping(a):c.connector.discoverModelProperties?c.discoverModelProperties("dummy",{},a):b.nextTick(function(){var b=c.connected?null:"Not connected";a(b)})},d.Text=l.Text,d.JSON=l.JSON,d.Any=l.Any,d.registerType=function(a){l.registerType(a)}}).call(this,a("_process"))},{"./dao.js":224,"./jutil":230,"./model-builder.js":233,"./model-definition.js":234,"./model.js":235,"./relation-definition.js":236,"./scope.js":238,"./utils":240,_process:187,assert:38,async:35,debug:211,events:179,traverse:251,util:207}],226:[function(a,b,c){function d(a){return this instanceof d?(2===arguments.length&&(a={lat:arguments[0],lng:arguments[1]}),f(Array.isArray(a)||"object"==typeof a||"string"==typeof a,'must provide valid geo-coordinates array [lat, lng] or object or a "lat, lng" string'),"string"==typeof a&&(a=a.split(/,\s*/),f(2===a.length,'must provide a string "lat,lng" creating a GeoPoint with a string')),Array.isArray(a)?a={lat:Number(a[0]),lng:Number(a[1])}:(a.lng=Number(a.lng),a.lat=Number(a.lat)),f("object"==typeof a,"must provide a lat and lng object when creating a GeoPoint"),f("number"==typeof a.lat&&!isNaN(a.lat),"lat must be a number when creating a GeoPoint"),f("number"==typeof a.lng&&!isNaN(a.lng),"lng must be a number when creating a GeoPoint"),f(a.lng<=180,"lng must be <= 180"),f(a.lng>=-180,"lng must be >= -180"),f(a.lat<=90,"lat must be <= 90"),f(a.lat>=-90,"lat must be >= -90"),this.lat=a.lat,void(this.lng=a.lng)):new d(a)}function e(a,b,c,d,e){var f=e&&e.type||"miles";a*=g,b*=g,c*=g,d*=g;var h=function(a){return Math.pow(Math.sin(a/2),2)},j=Math.sqrt(h(c-a)+Math.cos(c)*Math.cos(a)*h(d-b));return 2*Math.asin(j)*i[f]}var f=a("assert");c.nearFilter=function(a){var b=!1;return a&&"object"==typeof a&&Object.keys(a).forEach(function(c){var d=a[c];d&&d.near&&(b={near:d.near,maxDistance:d.maxDistance,key:c})}),b},c.filter=function(a,b){var c=b.near,e=b.maxDistance>0?b.maxDistance:!1,f=b.key,g={},h=[];return a.forEach(function(a){var b=a[f];if(b&&(b instanceof d||(b=d(b)),"number"==typeof b.lat&&"number"==typeof b.lng)){var i=d.distanceBetween(c,b);e&&i>e||(g[a.id]=i,h.push(a))}}),h.sort(function(a,b){var c=b[f],d=b[f];if(c&&d){var e=g[a.id],h=g[b.id];return h===e?0:e>h?1:-1}return 0})},c.GeoPoint=d,d.distanceBetween=function(a,b,c){a instanceof d||(a=d(a)),b instanceof d||(b=d(b));var f=a.lat,g=a.lng,h=b.lat,i=b.lng;return e(f,g,h,i,c)},d.prototype.distanceTo=function(a,b){return d.distanceBetween(this,a,b)},d.prototype.toString=function(){return this.lat+","+this.lng};var g=.01745329252,h=57.29577951308,i={kilometers:6370.99056,meters:6370990.56,miles:3958.75,feet:20902200,radians:1,degrees:h}},{assert:38}],227:[function(a,b){function c(){}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,b,c){var d=b.map(function(a){return a+c});"Validate"===c&&d.push(b[0]+"Validation");var e=d.filter(function(b){return!!a[b]})[0];e&&(a.modelName&&(e=a.modelName+"."+e),f('Model hook "'+e+'" is deprecated, use Operation hooks instead. http://docs.strongloop.com/display/LB/Operation+hooks'))}var f=a("depd")("loopback-datasource-juggler");b.exports=c,c.afterInitialize=null,c.beforeValidate=null,c.afterValidate=null,c.beforeSave=null,c.afterSave=null,c.beforeCreate=null,c.afterCreate=null,c.beforeUpdate=null,c.afterUpdate=null,c.beforeDestroy=null,c.afterDestroy=null,c.prototype.trigger=function(a,b,c,f){function g(a){j?j.call(k,a):a&&a.call(this)}var h=d(a),i=this.constructor["before"+h]||this.constructor["pre"+h],j=this.constructor["after"+h]||this.constructor["post"+h];"validate"===a&&(i=i||this.constructor.beforeValidation,j=j||this.constructor.afterValidation);var k=this;"initialize"!==a&&(i&&e(k.constructor,["before","pre"],h),j&&e(k.constructor,["after","post"],h)),b?i?i.call(k,function(){return arguments.length?f&&f.apply(null,arguments):void b.call(k,g)},c):b.call(k,g):g()}},{depd:222}],228:[function(a,b){(function(c){function d(a){var b;if("string"==typeof a)return[a];if(i(a)){b=[];var c=a.rel||a.relation,f={};if("string"==typeof c)f[c]=new e(a.scope),b.push(f);else for(var g in a)f[g]=a[g],b.push(f);return b}if(Array.isArray(a)){b=[];for(var h=0,j=a.length;j>h;h++){var k=d(a[h]);b=b.concat(k)}return b}return a}function e(a){this._scope=h.deepMerge({},a||{}),this._scope.include?(this._include=d(this._scope.include),delete this._scope.include):this._include=null}function f(){}var g=a("async"),h=a("./utils"),i=h.isPlainObject,j=h.defineCachedRelations;e.prototype.conditions=function(){return h.deepMerge({},this._scope)},e.prototype.include=function(){return this._include},b.exports=f,f.normalizeInclude=d,f.include=function(a,b,f){function k(a,b,c){var d,f=l.relations,k=null,m=null;i(b)?(d=Object.keys(b)[0],b[d]instanceof e?(m=b[d],k=m.include()):k=b[d]):(d=b,k=null);var n=f[d];return n?n.options.disableInclude?void c():void g.each(a,function(a,b){if("belongsTo"===n.type&&(null===a[n.keyFrom]||void 0===a[n.keyFrom]))return j(a),a.__cachedRelations[d]=null,a===e?a.__data[d]=null:a[d]=null,b();var c,e=a instanceof l?a:new l(a);if((n.multiple||"belongsTo"===n.type)&&m){var f={},g=m.conditions();g.fields&&Array.isArray(k)&&n.modelTo.relations&&(f.fields=[],k.forEach(function(a){var b=n.modelTo.relations[a];b&&"belongsTo"===b.type&&f.fields.push(b.keyFrom)})),h.mergeQuery(g,f,{fields:!1}),c=e[d].bind(e,g)}else c=e[d].bind(e);c(function(c,f){if(c)return b(c);if(j(a),a.__cachedRelations[d]=f,a===e?(a.__data[d]=f,a.setStrict(!1)):a[d]=f,k&&f){var g=n.multiple?f:[f];n.modelTo.include(g,k,b)}else b(null,f)})},c):void c(new Error('Relation "'+d+'" is not defined for '+l.modelName+" model"))}var l=this;return!b||Array.isArray(b)&&0===b.length||i(b)&&0===Object.keys(b).length?c.nextTick(function(){f&&f(null,a)}):(b=d(b),void g.each(b,function(b,c){k(a,b,c)},function(b){f&&f(b,a)}))}}).call(this,a("_process"))},{"./utils":240,_process:187,async:35}],229:[function(a,b){b.exports=function(a){function b(c){if(null===c||void 0===c)return a.Any;for(var d in a.schemaTypes){var e=a.schemaTypes[d];if(e!==Object&&e!==Array&&c instanceof e)return d}var f=typeof c;if("string"===f||"number"===f||"boolean"===f)return f;if(c instanceof Date)return"date";var g;if(Array.isArray(c)){for(var h=0;h<c.length;h++)if(null!==c[h]&&void 0!==c[h]&&(g=b(c[h])))return[g];return"array"}if("function"===f)return c.constructor.name;var i={};for(var j in c)g=b(c[j]),g&&(i[j]=g);return 0===Object.keys(i).length?"object":i}return a.introspect=b,b}},{}],230:[function(a,b,c){function d(a,b,c){Object.keys(a).forEach(function(d){var f=b.hasOwnProperty(d),g=Object.getOwnPropertyDescriptor(a,d),h=f&&Object.getOwnPropertyDescriptor(b,d),i=("function"==typeof g.value,f&&"function"==typeof h.value),j=i&&h.value._delegate,k=c.override||!f||j;return"_mixins"==d?void e(a._mixins,b._mixins):void(k&&Object.defineProperty(b,d,g))})}function e(a,b){for(var c in a){var d=a[c];-1===b.indexOf(d)&&b.push(d)}}var f=a("util");c.inherits=function(a,b,c){f.inherits(a,b),c=c||{staticProperties:!0,override:!1},c.staticProperties&&Object.keys(b).forEach(function(d){if("super_"!==d&&(!a.hasOwnProperty(d)||c.override)){var e=Object.getOwnPropertyDescriptor(b,d);Object.defineProperty(a,d,e)}})},c.mixin=function(a,b,c){if(Array.isArray(a._mixins)){if(-1!==a._mixins.indexOf(b))return;a._mixins.push(b)}else a._mixins=[b];return c=c||{staticProperties:!0,instanceProperties:!0,override:!1,proxyFunctions:!1},void 0===c.staticProperties&&(c.staticProperties=!0),void 0===c.instanceProperties&&(c.instanceProperties=!0),c.staticProperties&&d(b,a,c),c.instanceProperties&&b.prototype&&d(b.prototype,a.prototype,c),a}},{util:207}],231:[function(a,b){function c(a,b,f){var g=this;if(!(g instanceof c))return new c(a,b,f);if("string"==typeof a)try{a=JSON.parse(a)}catch(h){var i=new Error(d.format("could not create List from JSON string: %j",a));throw i.statusCode=400,i}var j=[];if(j.__proto__=c.prototype,a=a||[],!Array.isArray(a)){var i=new Error(d.format("Items must be an array: %j",a));throw i.statusCode=400,i}return b||(b=a[0]&&a[0].constructor),Array.isArray(b)&&(b=b[0]),b===Array&&(b=e),Object.defineProperty(j,"itemType",{writable:!0,enumerable:!1,value:b}),f&&Object.defineProperty(j,"parent",{writable:!0,enumerable:!1,value:f}),a.forEach(function(a,c){j[c]=!b||a instanceof b?a:b(a)}),j}var d=a("util"),e=a("./types").Types.Any;b.exports=c,d.inherits(c,Array);var f=c.prototype.push;c.prototype.push=function(a){var b=this.itemType&&a instanceof this.itemType?a:this.itemType(a);return f.call(this,b),b},c.prototype.toObject=function(a,b,c){var d=[];return this.forEach(function(e){d.push(e&&"object"==typeof e&&e.toObject?e.toObject(a,b,c):e)}),d},c.prototype.toJSON=function(){return this.toObject(!0)},c.prototype.toString=function(){return JSON.stringify(this.toJSON())}},{"./types":239,util:207}],232:[function(a,b){function c(a){return a?a.prototype instanceof g:!1}function d(a){this.modelBuilder=a,this.mixins={}}var e=a("debug")("loopback:mixin"),f=a("assert"),g=a("./model.js");b.exports=d,d.prototype.applyMixin=function(a,b,c){var d=this.mixins[b];if("function"==typeof d)a.dataSource?d(a,c||{}):a.once("dataSourceAttached",function(){d(a,c||{})});else{var f=this.modelBuilder.getModel(b);f?(e("Mixin is resolved to a model: %s",b),a.mixin(f,c)):e("Invalid mixin: %s",b)}},d.prototype.define=function(a,b){f("function"==typeof b,"The mixin must be a function or model class"),this.mixins[a]?e("Duplicate mixin: %s",a):e("Defining mixin: %s",a),c(b)?this.mixins[a]=function(a,c){a.mixin(b,c)}:"function"==typeof b&&(this.mixins[a]=b)}},{"./model.js":235,assert:38,debug:211}],233:[function(a,b,c){function d(){this.models={},this.definitions={},this.mixins=new r(this),this.defaultModelBaseClass=n}function e(a){return a?a.prototype instanceof n:!1}function f(a){var b=new Date(a);if(isNaN(b.getTime()))throw new Error("Invalid date: "+a);return b}function g(a){if("string"==typeof a)switch(a){case"true":case"1":return!0;case"false":case"0":return!1}return null==a?null:Boolean(a)}function h(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}var i=a("inflection"),j=a("events").EventEmitter,k=a("util"),l=a("assert"),m=a("depd")("loopback-datasource-juggler"),n=a("./model.js"),o=a("./list.js"),p=a("./model-definition.js"),q=a("./utils").mergeSettings,r=a("./mixins");a("./types")(d);var s=a("./introspection")(d);c.ModelBuilder=c.Schema=d;var t=Array.prototype.slice;k.inherits(d,j),d.defaultInstance=new d,d.prototype.getModel=function(a,b){var c=this.models[a];return!c&&b&&(c=this.define(a,{},{unresolved:!0})),c},d.prototype.getModelDefinition=function(a){return this.definitions[a]},d.prototype.define=function(a,b,c,d){var n=this,r=t.call(arguments),s=c&&c.plural||i.pluralize(a),u=c&&c.http||{},v=u.path||s;if(!a)throw new Error("Class name required");1===r.length&&(b={},r.push(b)),2===r.length&&(c={},r.push(c)),b=b||{},c=c||{},(void 0===c.strict||null===c.strict)&&(c.strict=!1);var w=d||this.defaultModelBaseClass,x=c.base||c["super"];if(x&&(c.base=x,delete c["super"],e(x)?w=x:(w=this.models[x],l(w,"Base model is not found: "+x))),d&&!c.base||!d&&c.base)return w.extend(a,b,c);var y=this.models[a];if(!y||!y.settings.unresolved){y=function O(a,b){if(!(this instanceof O))return new O(a,b);if(y.settings.unresolved)throw new Error("Model "+y.modelName+" is not defined.");w.apply(this,arguments)};var z=new j;z.setMaxListeners(32);for(var A in j.prototype)if("function"==typeof j.prototype[A]){if("on"!==A){y[A]=j.prototype[A].bind(z);continue}y.on=function(a){-1!==["changed","deleted","deletedAll"].indexOf(a)&&m(this.modelName+"'s event \""+a+'" is deprecated, use Operation hooks instead. http://docs.strongloop.com/display/LB/Operation+hooks'),j.prototype.on.apply(z,arguments)}}h(y,"modelName",a)}if(k.inherits(y,w),this.models[a]=y,c.unresolved)return y.settings={unresolved:!0},y;h(y,"modelBuilder",n),h(y,"dataSource",null),h(y,"pluralModelName",s),h(y,"relations",{}),
h(y,"http",{path:"/"+v}),h(y,"base",w),h(y,"_observers",{});for(var B in w)"_mixins"===B||B in y||(y[B]=w[B]);c.models&&Object.keys(c.models).forEach(function(a){var b=c.models[a];y[a]="string"==typeof b?n.getModel(b,!0):b}),y.getter={},y.setter={};for(var C in b)(null===b[C]||b[C]===!1)&&delete b[C];var D=new p(this,a,b,c);this.definitions[a]=D,y.definition=D,y.settings=D.settings;var E=c.idInjection;E!==!1&&(E=!0);var F=D.idNames();if(F.length>0&&(E=!1),E&&y.definition.defineProperty("id",{type:Number,id:1,generated:!0}),F=D.idNames(),1===F.length){var G=F[0];"id"!==G&&Object.defineProperty(y.prototype,"id",{get:function(){var a=y.definition.idNames()[0];return this.__data[a]},configurable:!0,enumerable:!1})}else Object.defineProperty(y.prototype,"id",{get:function(){for(var a,b={},c=y.definition.idNames(),d=0;d<c.length;d++)a=c[d],b[a]=this.__data[a];return b},configurable:!0,enumerable:!1});y.forEachProperty=function(a){for(var b=y.definition.properties,c=Object.keys(b),d=0,e=c.length;e>d;d++)a(c[d],b[c[d]])},y.attachTo=function(a){a.attach(this)},y.extend=function(a,b,c){var d=y.definition.properties,e=y.definition.settings;b=b||{},c=c||{};var f=!1;for(var g in b)if(b[g]&&b[g].id){f=!0;break}for(var h=Object.keys(d),i=0,j=h.length;j>i;i++){var k=h[i];f&&d[k].id||void 0===b[k]&&(b[k]=d[k])}var l=c;c=q(e,c),l.base||(c.base=y);var m=n.define(a,b,c,y);return"function"==typeof m.setup&&m.setup.call(m),m},y.registerProperty=function(a){var b=D.build(),c=b[a],d=c.type;if(!d)throw new Error("Invalid type for property "+a);if(c.required){var e="object"==typeof c.required?c.required:void 0;y.validatesPresenceOf(a,e)}Object.defineProperty(y.prototype,a,{get:function(){return y.getter[a]?y.getter[a].call(this):this.__data&&this.__data[a]},set:function(c){var d=y.definition.properties[a].type;Array.isArray(d)||d===Array?d=o:d===Date?d=f:d===Boolean?d=g:"string"==typeof d&&(d=n.resolveType(d)),y.setter[a]?y.setter[a].call(this,c):(this.__data=this.__data||{},this.__data[a]=null===c||void 0===c?c:d===o?d(c,b[a].type,this.__data):c instanceof d?c:d(c))},configurable:!0,enumerable:!0}),Object.defineProperty(y.prototype,"$"+a,{get:function(){return this.__data&&this.__data[a]},set:function(b){this.__data||(this.__data={}),this.__data[a]=b},configurable:!0,enumerable:!1})};var H=y.definition.properties,I=Object.keys(H),J=I.length;for(B=0;J>B;B++){var K=I[B];y.registerProperty(K)}var L=c.mixins||{};for(I=Object.keys(L),J=I.length,B=0;J>B;B++){var M=I[B],N=L[M];N===!0&&(N={}),Array.isArray(N)?N.forEach(function(a){a===!0&&(a={}),"object"==typeof a&&n.mixins.applyMixin(y,M,a)}):"object"==typeof N&&n.mixins.applyMixin(y,M,N)}return y.emit("defined",y),y},d.prototype.defineProperty=function(a,b,c){this.definitions[a].defineProperty(b,c),this.models[a].registerProperty(b)},d.prototype.defineValueType=function(a,b){d.registerType(a,b)},d.prototype.extendModel=function(a,b){for(var c=this,d=Object.keys(b),e=0;e<d.length;e++){var f=b[d[e]];c.defineProperty(a,d[e],f)}},d.prototype.copyModel=function(a){var b=this,c=a.modelName,d=a.modelBuilder.definitions[c],e=function(){a.apply(this,[].slice.call(arguments))};return k.inherits(e,a),e.__proto__=a,h(e,"modelBuilder",b),h(e,"modelName",c),h(e,"relations",a.relations),c in b.models||(b.models[c]=e,b.definitions[c]={properties:d.properties,settings:d.settings}),e},d.prototype.getSchemaName=function(a){return a?a:("number"!=typeof this._nameCount?this._nameCount=0:this._nameCount++,"AnonymousModel_"+this._nameCount)},d.prototype.resolveType=function(a){if(!a)return a;if(Array.isArray(a)&&a.length>0){var b=this.resolveType(a[0]);return"function"==typeof b?[b]:b}if("string"==typeof a){var c=d.schemaTypes[a.toLowerCase()]||this.models[a];return c?c:a=this.define(a,{},{unresolved:!0})}return"Object"===a.constructor.name?a.type?this.resolveType(a.type):this.define(this.getSchemaName(null),a,{anonymous:!0,idInjection:!1}):"function"==typeof a?a:a},d.prototype.buildModels=function(a,b){var c={};Array.isArray(a)||(a=a.properties&&a.name?[a]:[{name:this.getSchemaName(),properties:a,options:{anonymous:!0}}]);for(var d=[],e=0,f=a.length;f>e;e++){var g=this.getSchemaName(a[e].name);a[e].name=g;var h;h="function"==typeof b?b(a[e].name,a[e].properties,a[e].options):this.define(a[e].name,a[e].properties,a[e].options),c[g]=h,d=d.concat(h.definition.relations)}for(var i=0;i<d.length;i++){var j=d[i],k=c[j.source],l=c[j.target];k&&l&&"function"==typeof k[j.type]&&k[j.type](l,{as:j.as})}return c},d.prototype.buildModelFromInstance=function(a,b,c){var d=s(b);return this.define(a,d,c)}},{"./introspection":229,"./list.js":231,"./mixins":232,"./model-definition.js":234,"./model.js":235,"./types":239,"./utils":240,assert:38,depd:222,events:179,inflection:217,util:207}],234:[function(a,b){function c(a,b,d,f){if(!(this instanceof c))return new c(a,b,d,f);if(this.modelBuilder=a||j.defaultInstance,e(b,"name is missing"),2===arguments.length&&"object"==typeof b){var g=b;this.name=g.name,this.rawProperties=g.properties||{},this.settings=g.settings||{}}else e("string"==typeof b,"name must be a string"),this.name=b,this.rawProperties=d||{},this.settings=f||{};this.relations=[],this.properties=null,this.build()}function d(a){return a?a.prototype instanceof i:!1}var e=a("assert"),f=a("util"),g=a("events").EventEmitter,h=a("traverse"),i=a("./model"),j=a("./model-builder");b.exports=c,f.inherits(c,g),a("./types")(c),c.prototype.tableName=function(a){var b=this.settings;return b[a]?b[a].table||b[a].tableName||this.name:this.name},c.prototype.columnName=function(a,b){if(!b)return b;this.build();var c=this.properties[b];return c&&c[a]?c[a].column||c[a].columnName||b:b},c.prototype.columnMetadata=function(a,b){if(!b)return b;this.build();var c=this.properties[b];return c&&c[a]?c[a]:null},c.prototype.columnNames=function(a){this.build();var b=this.properties,c=[];for(var d in b)c.push(b[d][a]?property[a].column||b[d][a].columnName||d:d);return c},c.prototype.ids=function(){if(this._ids)return this._ids;var a=[];this.build();var b=this.properties;for(var c in b){var d=b[c].id;d&&("number"!=typeof d&&(d=1),a.push({name:c,id:d,property:b[c]}))}return a.sort(function(a,b){return a.id-b.id}),this._ids=a,a},c.prototype.idColumnName=function(a){return this.columnName(a,this.idName())},c.prototype.idName=function(){var a=this.ids()[0];return this.properties.id&&this.properties.id.id?"id":a&&a.name},c.prototype.idNames=function(){var a=this.ids(),b=a.map(function(a){return a.name});return b},c.prototype.indexes=function(){this.build();var a={};if(this.settings.indexes)for(var b in this.settings.indexes)a[b]=this.settings.indexes[b];for(var c in this.properties)this.properties[c].index&&(a[c+"_index"]=this.properties[c].index);return a},c.prototype.build=function(a){if(a&&(this.properties=null,this.relations=[],this._ids=null,this.json=null),this.properties)return this.properties;this.properties={};for(var b in this.rawProperties){var c=this.rawProperties[b],d=this.modelBuilder.resolveType(c);if("string"==typeof d)this.relations.push({source:this.name,target:d,type:Array.isArray(c)?"hasMany":"belongsTo",as:b});else{var e={type:d};if("object"==typeof c&&null!==c)for(var f in c)"type"!==f&&(e[f]=c[f]);this.properties[b]=e}}return this.properties},c.prototype.defineProperty=function(a,b){this.rawProperties[a]=b,this.build(!0)},c.prototype.toJSON=function(a){if(a&&(this.json=null),this.json)return this.json;var b={name:this.name,properties:{},settings:this.settings};this.build(a);var c=function(a){return void 0===a||null===a?a:"function"==typeof a.toJSON?a.toJSON():"function"==typeof a?d(a)?a.settings&&a.settings.anonymous?a.definition&&a.definition.toJSON().properties:a.modelName:a.name:a};for(var e in this.properties)b.properties[e]=h(this.properties[e]).map(c);return this.json=b,b}},{"./model":235,"./model-builder":233,"./types":239,assert:38,events:179,traverse:251,util:207}],235:[function(a,b){(function(c){function d(a,b){b=b||{},"applySetters"in b||(b.applySetters=!0),this._initProperties(a,b)}b.exports=d;var e=a("async"),f=a("util"),g=a("./jutil"),h=a("./list"),i=a("./hooks"),j=a("./validations"),k=f._extend,l=a("./utils"),m=l.fieldsToArray,n=a("node-uuid"),o={String:!0,Boolean:!0,Number:!0,Date:!0,Text:!0,ObjectID:!0};d.prototype._initProperties=function(a,b){var c=this,e=this.constructor;a instanceof e&&(a=a.toObject(!1));var f=k({},e.definition.properties);a=a||{},"function"==typeof e.applyProperties&&e.applyProperties(a),b=b||{};var g=b.applySetters,i=b.strict;void 0===i&&(i=e.definition.settings.strict),e.hideInternalProperties?Object.defineProperties(this,{__cachedRelations:{writable:!0,enumerable:!1,configurable:!0,value:{}},__data:{writable:!0,enumerable:!1,configurable:!0,value:{}},__dataSource:{writable:!0,enumerable:!1,configurable:!0,value:b.dataSource},__strict:{writable:!0,enumerable:!1,configurable:!0,value:i},__persisted:{writable:!0,enumerable:!1,configurable:!0,value:!1}}):(this.__cachedRelations={},this.__data={},this.__dataSource=b.dataSource,this.__strict=i,this.__persisted=!1),void 0!==b.persisted&&(this.__persisted=b.persisted===!0),a.__cachedRelations&&(this.__cachedRelations=a.__cachedRelations);var j=Object.keys(a);Array.isArray(b.fields)&&(j=j.filter(function(a){return-1!=b.fields.indexOf(a)}));for(var l,p,q=j.length,r=0;q>r;r++)if(l=j[r],p=a[l],"function"!=typeof p)if(f[l])g||f[l].id?c[l]=p:c.__data[l]=p;else if(e.relations[l]){var s=e.relations[l].type;if(!f[l]){var t=e.relations[l].modelTo||d,u=e.relations[l].multiple,v=u?"Array":t.modelName,w=u?[t]:t;f[l]={name:v,type:w},this.setStrict(!1)}if("belongsTo"===s&&null!=p&&(c.__data[e.relations[l].keyFrom]=p[e.relations[l].keyTo],e.relations[l].options.embedsProperties)){var x=m(e.relations[l].properties,t.definition.properties);~x.indexOf(e.relations[l].keyTo)||x.push(e.relations[l].keyTo),c.__data[l]=new t(p,{fields:x,applySetters:!1,persisted:b.persisted})}c.__cachedRelations[l]=p}else if(i===!1||c.__cachedRelations[l])c[l]=c.__data[l]=void 0!==p?p:c.__cachedRelations[l];else if("throw"===i)throw new Error("Unknown property: "+l);for(j=Object.keys(f),Array.isArray(b.fields)&&(j=j.filter(function(a){return-1!=b.fields.indexOf(a)})),q=j.length,r=0;q>r;r++){l=j[r],p=c.__data[l];var y=f[l].type;if(void 0===p){var z=f[l]["default"];void 0!==z&&("function"==typeof z?z=z===Date?new Date:z():"Date"===y.name&&"$now"===z&&(z=new Date),c.__data[l]=p=z)}if(void 0===p){var A=f[l].defaultFn;switch(A){case void 0:break;case"guid":case"uuid":p=n.v1();break;case"now":p=new Date;break;default:console.warn("Unknown default value provider "+A)}void 0!==p&&(c.__data[l]=p)}if(!o[y.name]){if("object"!=typeof c.__data[l]&&c.__data[l])try{c.__data[l]=JSON.parse(c.__data[l]+"")}catch(B){c.__data[l]=String(c.__data[l])}y.prototype instanceof d?c.__data[l]instanceof y||"object"!=typeof c.__data[l]||null===c.__data[l]||(c.__data[l]=new y(c.__data[l])):("Array"===y.name||Array.isArray(y))&&(c.__data[l]instanceof h||void 0===c.__data[l]||null===c.__data[l]||(c.__data[l]=h(c.__data[l],y,c)))}}this.trigger("initialize")},d.defineProperty=function(a,b){this.dataSource?this.dataSource.defineProperty(this.modelName,a,b):this.modelBuilder.defineProperty(this.modelName,a,b)},d.getPropertyType=function(a){var b=this.definition.properties[a];if(!b)return null;if(!b.type)throw new Error("Type not defined for property "+this.modelName+"."+a);return b.type.name},d.prototype.getPropertyType=function(a){return this.constructor.getPropertyType(a)},d.toString=function(){return"[Model "+this.modelName+"]"},d.prototype.toObject=function(a,b,c){void 0===a&&(a=!0);var d={},e=this,f=this.constructor;if(f===Object)return e;for(var g,i,j=this.__strict,k=j===!1||!a,l=f.definition.properties,m=Object.keys(l),n=0;n<m.length;n++)g=m[n],i=e[g],"function"!=typeof i&&(b&&f.isHiddenProperty(g)||c&&f.isProtectedProperty(g)||(d[g]=i instanceof h?i.toObject(!k,b,!0):void 0!==i&&null!==i&&i.toObject?i.toObject(!k,b,!0):i));if(k){m=Object.keys(e);var o=m.length;for(n=0;o>n;n++)if(g=m[n],!l[g]&&0!==g.indexOf("__")&&!(b&&f.isHiddenProperty(g)||c&&f.isProtectedProperty(g)||(i=e[g],void 0===i||void 0!==d[g]))){if("function"==typeof i)continue;d[g]=null!==i&&i.toObject?i.toObject(!k,b,!0):i}for(m=Object.keys(e.__data),o=m.length,n=0;o>n;n++)if(g=m[n],0!==g.indexOf("__")&&void 0===d[g]){if(b&&f.isHiddenProperty(g))continue;if(c&&f.isProtectedProperty(g))continue;var p=e[g];if(i=void 0!==p&&"function"!=typeof p?p:e.__data[g],"function"==typeof i)continue;d[g]=void 0!==i&&null!==i&&i.toObject?i.toObject(!k,b,!0):i}}return d},d.isProtectedProperty=function(a){var b=this,c=b.definition&&b.definition.settings,d=c&&(c.protectedProperties||c["protected"]);if(Array.isArray(d)){c.protectedProperties={};for(var e=0;e<d.length;e++)c.protectedProperties[d[e]]=!0;d=c.protectedProperties}return d?d[a]:!1},d.isHiddenProperty=function(a){var b=this,c=b.definition&&b.definition.settings,d=c&&(c.hiddenProperties||c.hidden);if(Array.isArray(d)){c.hiddenProperties={};for(var e=0;e<d.length;e++)c.hiddenProperties[d[e]]=!0;d=c.hiddenProperties}return d?d[a]:!1},d.prototype.toJSON=function(){return this.toObject(!1,!0,!1)},d.prototype.fromObject=function(a){for(var b in a)this[b]=a[b]},d.prototype.reset=function(){var a=this;for(var b in a)"id"===b||a.constructor.dataSource.definitions[a.constructor.modelName].properties[b]||delete a[b]};var p=c.versions&&c.versions.node?c.versions.node.split(/\./g).map(function(a){return+a}):[1,0,0],q=p[0]>0||p[1]>11||11===p[0]&&p[1]>=14;d.prototype.inspect=function(a){return q?this.__data:f.inspect(this.__data,{showHidden:!1,depth:a,colors:!1})},d.mixin=function(a,b){if("string"!=typeof a){if(a.prototype instanceof d){var c=a.definition.properties;for(var e in c)this.definition.properties[e]||this.defineProperty(e,c[e])}return g.mixin(this,a,b)}this.modelBuilder.mixins.applyMixin(this,a,b)},d.prototype.getDataSource=function(){return this.__dataSource||this.constructor.dataSource},d.getDataSource=function(){return this.dataSource},d.prototype.setStrict=function(a){this.__strict=a},d.observe=function(a,b){this._observers[a]||(this._observers[a]=[]),this._observers[a].push(b)},d.notifyObserversOf=function(a,b,c){var d=this._observers&&this._observers[a];return c||(c=l.createPromiseCallback()),this._notifyBaseObservers(a,b,function(a){return a?c(a,b):d&&d.length?void e.eachSeries(d,function(a,c){var d=a(b,c);d&&"function"==typeof d.then&&d.then(function(){c()},c)},function(a){c(a,b)}):c(null,b)}),c.promise},d._notifyBaseObservers=function(a,b,c){this.base&&this.base.notifyObserversOf?this.base.notifyObserversOf(a,b,c):c()},g.mixin(d,i),g.mixin(d,j.Validatable)}).call(this,a("_process"))},{"./hooks":227,"./jutil":230,"./list":231,"./utils":240,"./validations":241,_process:187,async:35,"node-uuid":245,util:207}],236:[function(a,b,c){(function(b){function d(a){if(!a)return a;var b=a.toLowerCase();for(var c in H)if(c.toLowerCase()===b)return c;return null}function e(a,b,c){function d(a,b){return function(){var c=new f(a,this);return b.apply(c,arguments)}}var e=[],f=I[a.type];if(a.type===H.hasMany&&a.modelThrough&&(f=I.hasManyThrough),"function"==typeof c)e=c.call(a,b,f);else if("object"==typeof c)for(var g in c){var h=c[g],i=b[g]=d(a,h);h.shared&&v(a,g,i,h),e.push(g)}return[].concat(e||[])}function f(a,b,c){var d=c.methods||{};Object.keys(d).forEach(function(c){"function"==typeof d[c]&&(b[c]=d[c].bind(a))})}function g(a){return this instanceof g?(a=a||{},this.name=a.name,w(this.name,"Relation name is missing"),this.type=d(a.type),w(this.type,"Invalid relation type: "+a.type),this.modelFrom=a.modelFrom,w(this.modelFrom,"Source model is required"),this.keyFrom=a.keyFrom,this.modelTo=a.modelTo,this.keyTo=a.keyTo,this.polymorphic=a.polymorphic,"object"!=typeof this.polymorphic&&w(this.modelTo,"Target model is required"),this.modelThrough=a.modelThrough,this.keyThrough=a.keyThrough,this.multiple=a.multiple,this.properties=a.properties||{},this.options=a.options||{},this.scope=a.scope,this.embed=a.embed===!0,void(this.methods=a.methods||{})):new g(a)}function h(a,b){return this instanceof h?(a instanceof g||(a=new g(a)),this.definition=a,void(this.modelInstance=b)):new h(a,b)}function i(a,b){return this instanceof i?(w(a.type===H.hasMany),void h.apply(this,arguments)):new i(a,b)}function j(a,b){return this instanceof j?(w(a.type===H.hasMany),w(a.modelThrough),void i.apply(this,arguments)):new j(a,b)}function k(a,b){return this instanceof k?(w(a.type===H.belongsTo),void h.apply(this,arguments)):new k(a,b)}function l(a,b){return this instanceof l?(w(a.type===H.hasAndBelongsToMany),void h.apply(this,arguments)):new l(a,b)}function m(a,b){return this instanceof m?(w(a.type===H.hasOne),void h.apply(this,arguments)):new m(a,b)}function n(a,b){return this instanceof n?(w(a.type===H.embedsOne),void h.apply(this,arguments)):new n(a,b)}function o(a,b){return this instanceof o?(w(a.type===H.embedsMany),void h.apply(this,arguments)):new o(a,b)}function p(a,b){return this instanceof p?(w(a.type===H.referencesMany),void h.apply(this,arguments)):new p(a,b)}function q(a,b,c){return Object.keys(a.relations).map(function(b){return a.relations[b]}).filter(function(a){return a.type===H.belongsTo&&a.modelTo===b&&(void 0===c||a.keyTo===c)}).map(function(a){return a.keyFrom})}function r(a,b){if(a[b])return a[b];var c=b.toLowerCase();for(var d in a)if(d.toLowerCase()===c)return a[d]}function s(a,b,c,d){if("string"==typeof b){var e;if(c.as=c.as||b,b=c.model||b,"string"==typeof b&&(e=(d?A.singularize(b):b).toLowerCase(),b=r(a.dataSource.modelBuilder.models,e)||b),"string"==typeof b&&(e=(d?A.singularize(c.as):c.as).toLowerCase(),b=r(a.dataSource.modelBuilder.models,e)||b),"function"!=typeof b)throw new Error('Could not find "'+c.as+'" relation for '+a.modelName)}return b}function t(a,b){return"string"==typeof a&&(a={as:a}),"string"!=typeof a.as&&(a.as=b||"reference"),a.foreignKey=a.foreignKey||A.camelize(a.as+"_id",!0),a.discriminator=a.discriminator||A.camelize(a.as+"_type",!0),a}function u(a,b){var c=I[a.type];a.type===H.hasMany&&a.modelThrough&&(c=I.hasManyThrough);var d=function(){var d=new c(a,this);return d[b].apply(d,arguments)},e=c.prototype[b];return e.shared&&v(a,b,d,e),d}function v(a,b,c,d){c.shared=!0,c.accepts=d.accepts,c.returns=d.returns,c.http=d.http,c.description=d.description}var w=a("assert"),x=a("util"),y=a("async"),z=a("./utils"),A=a("inflection"),B=a("./scope.js").defineScope,C=z.mergeQuery,D=a("./model.js"),E=a("./connectors/memory").applyFilter,F=a("./validations.js").ValidationError,G=a("debug")("loopback:relations"),H={belongsTo:"belongsTo",hasMany:"hasMany",hasOne:"hasOne",hasAndBelongsToMany:"hasAndBelongsToMany",referencesMany:"referencesMany",embedsOne:"embedsOne",embedsMany:"embedsMany"},I={belongsTo:k,hasMany:i,hasManyThrough:j,hasOne:m,hasAndBelongsToMany:l,referencesMany:p,embedsOne:n,embedsMany:o};c.Relation=h,c.RelationDefinition=g,c.RelationTypes=H,c.RelationClasses=I,c.HasMany=i,c.HasManyThrough=j,c.HasOne=m,c.HasAndBelongsToMany=l,c.BelongsTo=k,c.ReferencesMany=p,c.EmbedsOne=n,c.EmbedsMany=o,g.prototype.toJSON=function(){var a="object"==typeof this.polymorphic,b=this.modelTo&&this.modelTo.modelName;!b&&a&&"belongsTo"===this.type&&(b="<polymorphic>");var c={name:this.name,type:this.type,modelFrom:this.modelFrom.modelName,keyFrom:this.keyFrom,modelTo:b,keyTo:this.keyTo,multiple:this.multiple};return this.modelThrough&&(c.modelThrough=this.modelThrough.modelName,c.keyThrough=this.keyThrough),a&&(c.polymorphic=this.polymorphic),c},g.prototype.defineMethod=function(a,b){var c,d=I[this.type],e=this.name,f=this.modelFrom,g=this;if(g.multiple){var h=this.modelFrom.scopes[this.name];if(!h)throw new Error("Unknown relation scope: "+this.name);c=h.defineMethod(a,function(){var a=new d(g,this);return b.apply(a,arguments)})}else g.methods[a]=b,c=function(){var b=this[e];return b[a].apply(b,arguments)};return c&&b.shared&&(v(g,a,c,b),f.prototype["__"+a+"__"+e]=c),c},g.prototype.applyScope=function(a,b){if(b=b||{},b.where=b.where||{},("belongsTo"!==this.type||"hasOne"===this.type)&&"object"==typeof this.polymorphic){var c=this.polymorphic.discriminator;b.where[c]=this.polymorphic.invert?this.modelTo.modelName:this.modelFrom.modelName}var d;d="function"==typeof this.scope?this.scope.call(this,a,b):this.scope,"object"==typeof d&&C(b,d)},g.prototype.applyProperties=function(a,b){var c=a,d=b;this.options.invertProperties&&(c=b,d=a),this.options.embedsProperties&&(d=d.__data[this.name]={},d[this.keyTo]=c[this.keyTo]);var e,f;if("function"==typeof this.properties){var g=this.properties.call(this,c,d);for(e in g)d[e]=g[e]}else if(Array.isArray(this.properties))for(e=0;e<this.properties.length;e++)f=this.properties[e],d[f]=c[f];else if("object"==typeof this.properties)for(e in this.properties)f=this.properties[e],d[f]=c[e];if(("belongsTo"!==this.type||"hasOne"===this.type)&&"object"==typeof this.polymorphic){var h=this.polymorphic.discriminator;d[h]=this.polymorphic.invert?this.modelTo.modelName:this.modelFrom.modelName}},h.prototype.resetCache=function(a){a=a||void 0,this.modelInstance.__cachedRelations[this.definition.name]=a},h.prototype.getCache=function(){return this.modelInstance.__cachedRelations[this.definition.name]},h.prototype.callScopeMethod=function(a){var b=Array.prototype.slice.call(arguments,1),c=this.modelInstance,d=c[this.definition.name];if(d&&"function"==typeof d[a])return d[a].apply(d,b);throw new Error("Unknown scope method: "+a)},h.prototype.fetch=function(){this.modelInstance[this.definition.name].apply(this.modelInstance,arguments)},x.inherits(i,h),i.prototype.removeFromCache=function(a){var b=this.modelInstance.__cachedRelations[this.definition.name],c=this.definition.modelTo.definition.idName();if(Array.isArray(b))for(var d=0,e=b.length;e>d;d++)if(b[d][c]===a)return b.splice(d,1);return null},i.prototype.addToCache=function(a){if(a){var b=this.modelInstance.__cachedRelations[this.definition.name];void 0===b&&(b=this.modelInstance.__cachedRelations[this.definition.name]=[]);var c=this.definition.modelTo.definition.idName();if(Array.isArray(b)){for(var d=0,e=b.length;e>d;d++)if(b[d][c]===a[c])return void(b[d]=a);b.push(a)}}},x.inherits(j,i),x.inherits(k,h),x.inherits(l,h),x.inherits(m,h),x.inherits(n,h),x.inherits(o,h),x.inherits(p,h),g.hasMany=function(a,b,c){var d=a.modelName;c=c||{},b=s(a,b,c,!0);var f,h,i=c.as||A.camelize(b.pluralModelName,!0),j=c.foreignKey||A.camelize(d+"_id",!0),k=c.keyThrough||A.camelize(b.modelName+"_id",!0),l=a.dataSource.idName(a.modelName)||"id";c.polymorphic&&(h=t(c.polymorphic),c.invert&&(h.invert=!0,k=h.foreignKey),f=h.discriminator,c.invert||(j=h.foreignKey),c.through||b.dataSource.defineProperty(b.modelName,f,{type:"string",index:!0}));var m=new g({name:i,type:H.hasMany,modelFrom:a,keyFrom:l,keyTo:j,modelTo:b,multiple:!0,properties:c.properties,scope:c.scope,options:c.options,keyThrough:k,polymorphic:h});m.modelThrough=c.through,a.relations[i]=m,c.through||b.dataSource.defineForeignKey(b.modelName,j,a.modelName);var n={findById:u(m,"findById"),destroy:u(m,"destroyById"),updateById:u(m,"updateById"),exists:u(m,"exists")},o=n.findById;a.prototype["__findById__"+i]=o;var p=n.destroy;a.prototype["__destroyById__"+i]=p;var q=n.updateById;a.prototype["__updateById__"+i]=q;var r=n.exists;if(a.prototype["__exists__"+i]=r,m.modelThrough){n.create=u(m,"create"),n.add=u(m,"add"),n.remove=u(m,"remove");var v=n.add;a.prototype["__link__"+i]=v;var w=n.remove;a.prototype["__unlink__"+i]=w}else n.create=u(m,"create"),n.build=u(m,"build");for(var x=e(m,n,c.scopeMethods),y=0;y<x.length;y++){var z=x[y],C=n[z];"function"==typeof C&&C.shared===!0&&(a.prototype["__"+z+"__"+i]=C)}return B(a.prototype,c.through||b,i,function(){var a={};if(a.where={},a.where[j]=this[l],m.applyScope(this,a),m.modelThrough){var c;for(var d in m.modelThrough.relations){var e=m.modelThrough.relations[d];if(e.type===H.belongsTo&&(e.polymorphic&&!e.modelTo||e.modelTo===m.modelTo)&&e.keyFrom===m.keyThrough){c=e.name;break}}m.polymorphic&&m.polymorphic.invert?(a.collect=m.polymorphic.as,a.include=a.collect):(a.collect=c||A.camelize(b.modelName,!0),a.include=a.collect)}return a},n,m.options),m},i.prototype.findById=function(a,c){var d=this.definition.modelTo,e=this.definition.modelFrom,f=this.definition.keyTo,g=this.definition.keyFrom,h=this.modelInstance,i=this.definition.modelTo.definition.idName(),j={};return j.where={},j.where[i]=a,j.where[f]=h[g],void 0===j.where[f]?b.nextTick(c):(this.definition.applyScope(h,j),void d.findOne(j,function(b,i){return b?c(b):i?void(i[f]&&i[f].toString()===h[g].toString()?c(null,i):(b=new Error("Key mismatch: "+e.modelName+"."+g+": "+h[g]+", "+d.modelName+"."+f+": "+i[f]),b.statusCode=400,c(b))):(b=new Error("No instance with id "+a+" found for "+d.modelName),b.statusCode=404,c(b))}))},i.prototype.exists=function(a,b){var c=this.definition.keyTo,d=this.definition.keyFrom,e=this.modelInstance;this.findById(a,function(a,f){return a?b(a):f?void(f[c]&&f[c].toString()===e[d].toString()?b(null,!0):b(null,!1)):b(null,!1)})},i.prototype.updateById=function(a,b,c){this.findById(a,function(a,d){return a?c&&c(a):void d.updateAttributes(b,c)})},i.prototype.destroyById=function(a,b){var c=this;this.findById(a,function(d,e){return d?b(d):(c.removeFromCache(e[a]),void e.destroy(b))})};var J=function(a){var b=a.modelThrough,c=a.modelTo.definition.idName();if("object"==typeof a.polymorphic){var d=a.keyTo;if(a.polymorphic.invert)var e=a.polymorphic.foreignKey;else var e=a.keyThrough}else{if(a.modelFrom===a.modelTo)return q(b,a.modelTo,c);var d=q(b,a.modelFrom,a.keyFrom)[0],e=q(b,a.modelTo,c)[0]}return[d,e]};j.prototype.findById=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyFrom,f=this.modelInstance,g=this.definition.modelThrough;c.exists(a,function(h,i){return h||!i?(h||(h=new Error("No relation found in "+g.modelName+" for ("+c.definition.modelFrom.modelName+"."+f[e]+","+d.modelName+"."+a+")"),h.statusCode=404),b(h)):void d.findById(a,function(c,e){return c?b(c):e?void b(c,e):(c=new Error("No instance with id "+a+" found for "+d.modelName),c.statusCode=404,b(c))})})},j.prototype.destroyById=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyFrom,f=this.modelInstance,g=this.definition.modelThrough;c.exists(a,function(h,i){return h||!i?(h||(h=new Error("No record found in "+g.modelName+" for ("+c.definition.modelFrom.modelName+"."+f[e]+" ,"+d.modelName+"."+a+")"),h.statusCode=404),b(h)):void c.remove(a,function(c){return c?b(c):void d.deleteById(a,b)})})},j.prototype.create=function(a,b){var c=this,d=this.definition,e=d.modelTo,f=d.modelThrough;"function"!=typeof a||b||(b=a,a={}),b=b||function(){};var g=this.modelInstance;e.create(a,function(a,e){function h(b,e){var h={},j={},m={where:j};h[k]=j[k]=g[d.keyFrom],h[l]=j[l]=b[i],d.applyProperties(g,h),d.applyScope(g,m),f.findOrCreate(m,h,function(d){d?b.destroy(function(){e(d)}):(c.addToCache(b),e(a,b))})}if(a)return b(a,e);var i=d.modelTo.definition.idName(),j=J(d),k=j[0],l=j[1];Array.isArray(e)?y.map(e,h,b):h(e,b)})},j.prototype.add=function(a,b,c){var d=this,e=this.definition,f=e.modelThrough,g=e.keyFrom;"function"==typeof b&&(c=b,b={});var h={},i=e.modelTo.definition.idName(),j=J(e),k=j[0],l=j[1];h[k]=this.modelInstance[g],h[l]=a instanceof e.modelTo?a[i]:a;var m={where:h};e.applyScope(this.modelInstance,m),b[k]=this.modelInstance[g],b[l]=a instanceof e.modelTo?a[i]:a,e.applyProperties(this.modelInstance,b),f.findOrCreate(m,b,function(b,f){b||a instanceof e.modelTo&&d.addToCache(a),c(b,f)})},j.prototype.exists=function(a,b){var c=this.definition,d=c.modelThrough,e=c.keyFrom,f={},g=c.modelTo.definition.idName(),h=J(c),i=h[0],j=h[1];f[i]=this.modelInstance[e],f[j]=a instanceof c.modelTo?a[g]:a;var k={where:f};c.applyScope(this.modelInstance,k),d.count(k.where,function(a,c){b(a,c>0)})},j.prototype.remove=function(a,b){var c=this,d=this.definition,e=d.modelThrough,f=d.keyFrom,g={},h=d.modelTo.definition.idName(),i=J(d),j=i[0],k=i[1];g[j]=this.modelInstance[f],g[k]=a instanceof d.modelTo?a[h]:a;var l={where:g};d.applyScope(this.modelInstance,l),e.deleteAll(l.where,function(a){a||c.removeFromCache(g[k]),b(a)})},g.belongsTo=function(a,b,c){var d,e;c=c||{},"string"!=typeof b||c.polymorphic||(b=s(a,b,c));var h,i,j;c.polymorphic?(i=c.as||("string"==typeof b?b:null),e=c.polymorphic===!0?t(b,i):t(c.polymorphic,i),b=null,h=c.idName||"id",i=c.as||e.as,j=e.foreignKey,d=e.discriminator,e.idType?a.dataSource.defineProperty(a.modelName,j,{type:e.idType,index:!0}):a.dataSource.defineForeignKey(a.modelName,j,a.modelName),a.dataSource.defineProperty(a.modelName,d,{type:"string",index:!0})):(h=b.dataSource.idName(b.modelName)||"id",i=c.as||A.camelize(b.modelName,!0),j=c.foreignKey||i+"Id",a.dataSource.defineForeignKey(a.modelName,j,b.modelName));var l=a.relations[i]=new g({name:i,type:H.belongsTo,modelFrom:a,keyFrom:j,keyTo:h,modelTo:b,multiple:!1,properties:c.properties,scope:c.scope,options:c.options,polymorphic:e,methods:c.methods});Object.defineProperty(a.prototype,i,{enumerable:!0,configurable:!0,get:function(){var a=new k(l,this),b=a.related.bind(a);return b.update=a.update.bind(a),b.destroy=a.destroy.bind(a),e||(b.create=a.create.bind(a),b.build=a.build.bind(a),b._targetClass=l.modelTo.modelName),f(a,b,l),b}});var m=function(){var a=this[i];a.apply(this,arguments)};return a.prototype["__get__"+i]=m,l},k.prototype.create=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyFrom,f=this.definition.keyTo,g=this.modelInstance;"function"!=typeof a||b||(b=a,a={}),this.definition.applyProperties(g,a||{}),d.create(a,function(a,d){a?b&&b(a):(g[e]=d[f],g.isNewRecord()?(c.resetCache(d),b&&b(a,d)):g.save(function(a){return b&&a?b&&b(a):(c.resetCache(d),void(b&&b(a,d)))}))})},k.prototype.build=function(a){var b=this.definition.modelTo;return this.definition.applyProperties(this.modelInstance,a||{}),new b(a)},k.prototype.update=function(a,b){var c=this.definition;this.fetch(function(d,e){e instanceof D?e.updateAttributes(a,b):b(new Error("BelongsTo relation "+c.name+" is empty"))})},k.prototype.destroy=function(a){var b=(this.definition.modelTo,this.modelInstance),c=this.definition.keyFrom;this.fetch(function(d,e){e instanceof D?(b[c]=null,b.save(function(b,c){return a&&b?a&&a(b):void(a&&a(b,c))})):a(new Error("BelongsTo relation "+definition.name+" is empty"))})},k.prototype.related=function(a,c){var d,e=this,f=this.definition.modelFrom,g=this.definition.modelTo,h=this.definition.keyTo,i=this.definition.keyFrom,j=this.modelInstance,k=null;if(1===arguments.length)c=a,a=!1;else if(2===arguments.length&&"object"==typeof a&&"function"==typeof c)k=a;else if(arguments.length>2)throw new Error("Method can't be called with more than two arguments");"object"==typeof this.definition.polymorphic&&(d=this.definition.polymorphic.discriminator);var l;if(a||(l=e.getCache()),c instanceof D)j[i]=c[h],d&&(j[d]=c.constructor.modelName),this.definition.applyProperties(j,c),e.resetCache(c);else{if("function"==typeof c){if(d){var m=j[d];if("string"!=typeof m)throw new Error("Polymorphic model not found: `"+d+"` not set");if(m=m.toLowerCase(),g=r(f.dataSource.modelBuilder.models,m),!g)throw new Error("Polymorphic model not found: `"+m+"`")}var n=c;if(void 0!==l&&l instanceof D)return n(null,l),l;var o={where:{}};return o.where[h]=j[i],void 0===o.where[h]||null===o.where[h]?b.nextTick(n):(this.definition.applyScope(j,o),k&&C(o,k),Array.isArray(o.fields)&&-1===o.fields.indexOf(h)&&o.fields.push(h),g.findOne(o,function(a,b){return a?n(a):b?void(b[h]&&j[i]&&b[h].toString()===j[i].toString()?(e.resetCache(b),n(null,b)):(a=new Error("Key mismatch: "+e.definition.modelFrom.modelName+"."+i+": "+j[i]+", "+g.modelName+"."+h+": "+b[h]),a.statusCode=400,n(a))):n(null,null)}),j[i])}if(void 0===c)return l;j[i]=c,e.resetCache()}},g.hasAndBelongsToMany=function(a,b,c){c=c||{},b=s(a,b,c,!0);var d=a.dataSource.modelBuilder.models;if(!c.through){if(c.polymorphic)throw new Error("Polymorphic relations need a through model");var e=a.modelName+b.modelName,f=b.modelName+a.modelName;

c.through=r(d,e)||r(d,f)||a.dataSource.define(e)}var g={as:c.as,through:c.through};if(g.properties=c.properties,g.scope=c.scope,c.polymorphic){var h=t(c.polymorphic);g.polymorphic=h;var i=c.through.prototype[h.as];"function"!=typeof i&&c.through.belongsTo(h.as,{polymorphic:!0})}else c.through.belongsTo(a);return c.through.belongsTo(b),this.hasMany(a,b,g)},g.hasOne=function(a,b,c){c=c||{},b=s(a,b,c);var d,e,h=a.dataSource.idName(a.modelName)||"id",i=c.as||A.camelize(b.modelName,!0),j=c.foreignKey||A.camelize(a.modelName+"_id",!0);c.polymorphic&&(e=t(c.polymorphic),j=e.foreignKey,d=e.discriminator,c.through||b.dataSource.defineProperty(b.modelName,d,{type:"string",index:!0}));var k=a.relations[i]=new g({name:i,type:H.hasOne,modelFrom:a,keyFrom:h,keyTo:j,modelTo:b,multiple:!1,properties:c.properties,scope:c.scope,options:c.options,polymorphic:e,methods:c.methods});return b.dataSource.defineForeignKey(b.modelName,j,a.modelName),Object.defineProperty(a.prototype,i,{enumerable:!0,configurable:!0,get:function(){var a=new m(k,this),b=a.related.bind(a);return b.create=a.create.bind(a),b.build=a.build.bind(a),b.update=a.update.bind(a),b.destroy=a.destroy.bind(a),b._targetClass=k.modelTo.modelName,f(a,b,k),b}}),a.prototype["__get__"+i]=function(){var a=this[i];a.apply(this,arguments)},a.prototype["__create__"+i]=function(){var a=this[i].create;a.apply(this,arguments)},a.prototype["__update__"+i]=function(){var a=this[i].update;a.apply(this,arguments)},a.prototype["__destroy__"+i]=function(){var a=this[i].destroy;a.apply(this,arguments)},k},m.prototype.create=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyTo,f=this.definition.keyFrom,g=this.modelInstance;"function"!=typeof a||b||(b=a,a={}),a=a||{},a[e]=g[f];var h={where:{}};h.where[e]=a[e],this.definition.applyScope(g,h),this.definition.applyProperties(g,a),d.findOrCreate(h,a,function(a,e,f){return a?b&&b(a):void(f?(c.resetCache(e),b&&b(a,e)):b&&b(new Error("HasOne relation cannot create more than one instance of "+d.modelName)))})},m.prototype.update=function(a,b){var c=this.definition,d=this.definition.keyTo;this.fetch(function(e,f){f instanceof D?(delete a[d],f.updateAttributes(a,b)):b(new Error("HasOne relation "+c.name+" is empty"))})},m.prototype.destroy=function(a){this.fetch(function(b,c){c instanceof D?c.destroy(a):a(new Error("HasOne relation "+definition.name+" is empty"))})},i.prototype.create=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyTo,f=this.definition.keyFrom,g=this.modelInstance;"function"!=typeof a||b||(b=a,a={}),a=a||{};var h=function(a){a[e]=g[f],c.definition.applyProperties(g,a)},i=function(a,b){Array.isArray(a)?a.forEach(b):b(a)};i(a,h),d.create(a,function(a,d){a?b&&b(a):(i(d,c.addToCache.bind(c)),b&&b(a,d))})},i.prototype.build=m.prototype.build=function(a){var b=this.definition.modelTo,c=this.definition.keyFrom,d=this.definition.keyTo;return a=a||{},a[d]=this.modelInstance[c],this.definition.applyProperties(this.modelInstance,a),new b(a)},m.prototype.related=function(a,b){var c=this,d=this.definition.modelTo,e=this.definition.keyTo,f=this.definition.keyFrom,g=this.definition,h=this.modelInstance;if(1===arguments.length)b=a,a=!1;else if(arguments.length>2)throw new Error("Method can't be called with more than two arguments");var i;if(a||(i=c.getCache()),b instanceof D)b[e]=h[f],c.resetCache(b);else{if("function"==typeof b){var j=b;if(void 0===i){var k={where:{}};return k.where[e]=h[f],g.applyScope(h,k),d.findOne(k,function(a,b){return a?j(a):b?void(b[e]&&h[f]&&b[e].toString()===h[f].toString()?(c.resetCache(b),j(null,b)):(a=new Error("Key mismatch: "+c.definition.modelFrom.modelName+"."+f+": "+h[f]+", "+d.modelName+"."+e+": "+b[e]),a.statusCode=400,j(a))):j(null,null)}),h[f]}return j(null,i),i}if(void 0===b)return i;b[e]=h[f],c.resetCache()}},g.embedsOne=function(a,b,c){c=c||{},b=s(a,b,c);var d=(a.modelName,c.as||A.camelize(b.modelName,!0)+"Item"),e=c.property||A.camelize(b.modelName,!0),h=b.dataSource.idName(b.modelName)||"id";d===e&&(e="_"+e,G("EmbedsOne property cannot be equal to relation name: forcing property %s for relation %s",e,d));var i=a.relations[d]=new g({name:d,type:H.embedsOne,modelFrom:a,keyFrom:e,keyTo:h,modelTo:b,multiple:!1,properties:c.properties,scope:c.scope,options:c.options,embed:!0,methods:c.methods}),j={type:b};return c["default"]===!0?j["default"]=function(){return new b}:"object"==typeof c["default"]&&(j["default"]=function(a){return function(){return new b(a)}}(c["default"])),a.dataSource.defineProperty(a.modelName,e,j),i.options.validate!==!1&&a.validate(d,function(a){var c=this[e];if(c instanceof b&&!c.isValid()){var f=Object.keys(c.errors)[0],g="is invalid: `"+f+"` "+c.errors[f];this.errors.add(d,g,"invalid"),a(!1)}}),Object.defineProperty(a.prototype,d,{enumerable:!0,configurable:!0,get:function(){var a=new n(i,this),b=a.related.bind(a);return b.create=a.create.bind(a),b.build=a.build.bind(a),b.update=a.update.bind(a),b.destroy=a.destroy.bind(a),b.value=a.embeddedValue.bind(a),b._targetClass=i.modelTo.modelName,f(a,b,i),b}}),a.prototype["__get__"+d]=function(){var a=this[d];a.apply(this,arguments)},a.prototype["__create__"+d]=function(){var a=this[d].create;a.apply(this,arguments)},a.prototype["__update__"+d]=function(){var a=this[d].update;a.apply(this,arguments)},a.prototype["__destroy__"+d]=function(){var a=this[d].destroy;a.apply(this,arguments)},i},n.prototype.related=function(a,c){var d=this.definition.modelTo,e=this.modelInstance,f=this.definition.keyFrom;if(1===arguments.length)c=a,a=!1;else if(arguments.length>2)throw new Error("Method can't be called with more than two arguments");if(c instanceof D)return void(c instanceof d&&(this.definition.applyProperties(e,c),e.setAttribute(f,c)));var g=e[f];if(g&&(g.__persisted=!0),"function"==typeof c){var h=c;b.nextTick(function(){h(null,g)})}else if(void 0===c)return g},n.prototype.embeddedValue=function(a){return a=a||this.modelInstance,a[this.definition.keyFrom]},n.prototype.create=function(a,c){var d=(this.definition.modelTo,this.definition.keyFrom),e=this.modelInstance;"function"!=typeof a||c||(c=a,a={}),a=a||{};var f=this.callScopeMethod("build",a),g=function(){e.updateAttribute(d,f,function(a){c(a,a?null:f)})};if(this.definition.options.persistent)f.save(function(a){return a?c(a,f):void g()});else{var h=f.isValid()?null:new F(f);h?b.nextTick(function(){c(h)}):g()}},n.prototype.build=function(a){var b=this.definition.modelTo,c=this.modelInstance,d=this.definition.keyFrom,e=this.definition.options.forceId,f=this.definition.options.persistent,g=b.dataSource.connector;a=a||{},this.definition.applyProperties(c,a);var h=this.definition.keyTo,i=b.definition.properties[h],j=e||void 0===a[h];if(j=j&&!f&&i&&i.generated,j&&"function"==typeof g.generateId){var k=g.generateId(b.modelName,a,h);a[h]=k}var l=new b(a);return c[d]=l,l},n.prototype.update=function(a,b){var c=this.definition.modelTo,d=this.modelInstance,e=this.definition.keyFrom,f=a instanceof D,g=f?a.toObject():a,h=d[e];h instanceof c?(h.setAttributes(g),"function"==typeof b&&d.save(function(a,c){b(a,c?c[e]:h)})):!h&&b?this.callScopeMethod("create",g,b):h||this.callScopeMethod("build",g)},n.prototype.destroy=function(a){var b=this.modelInstance,c=this.definition.keyFrom;b.unsetAttribute(c,!0),b.save(function(b,c){a&&a(b,c)})},g.embedsMany=function(a,b,c){c=c||{},b=s(a,b,c,!0);var d=(a.modelName,c.as||A.camelize(b.modelName,!0)+"List"),f=c.property||A.camelize(b.pluralModelName,!0),h=b.dataSource.idName(b.modelName)||"id";d===f&&(f="_"+f,G("EmbedsMany property cannot be equal to relation name: forcing property %s for relation %s",f,d));var i=a.relations[d]=new g({name:d,type:H.embedsMany,modelFrom:a,keyFrom:f,keyTo:h,modelTo:b,multiple:!0,properties:c.properties,scope:c.scope,options:c.options,embed:!0});a.dataSource.defineProperty(a.modelName,f,{type:[b],"default":function(){return[]}}),"function"!=typeof b.dataSource.connector.generateId&&a.validate(f,function(a){var c=this,d=this[f]||[],e=!1;d.forEach(function(a,d){if(a instanceof b&&void 0==a[h]){e=!0;var g="contains invalid item at index `"+d+"`:";g+=" `"+h+"` is blank",c.errors.add(f,g,"invalid")}}),e&&a(!1)}),c.polymorphic||a.validate(f,function(a){var b=this[f]||[],c=b.map(function(a){return a[h]}),d=c.filter(function(a,b){return c.indexOf(a)===b});c.length!==d.length&&(this.errors.add(f,"contains duplicate `"+h+"`","uniqueness"),a(!1))},{code:"uniqueness"}),i.options.validate!==!1&&a.validate(f,function(a){var c=this,d=this[f]||[],e=!1;d.forEach(function(a,d){if(a instanceof b){if(!a.isValid()){e=!0;var g=a[h],i=Object.keys(a.errors)[0];if(g)var j="contains invalid item: `"+g+"`";else var j="contains invalid item at index `"+d+"`";j+=" (`"+i+"` "+a.errors[i]+")",c.errors.add(f,j,"invalid")}}else e=!0,c.errors.add(f,"contains invalid item","invalid")}),e&&a(!1)});var j={findById:u(i,"findById"),destroy:u(i,"destroyById"),updateById:u(i,"updateById"),exists:u(i,"exists"),add:u(i,"add"),remove:u(i,"remove"),get:u(i,"get"),set:u(i,"set"),unset:u(i,"unset"),at:u(i,"at"),value:u(i,"embeddedValue")},k=j.findById;a.prototype["__findById__"+d]=k;var l=j.destroy;a.prototype["__destroyById__"+d]=l;var m=j.updateById;a.prototype["__updateById__"+d]=m;var n=j.add;a.prototype["__link__"+d]=n;var o=j.remove;a.prototype["__unlink__"+d]=o,j.create=u(i,"create"),j.build=u(i,"build"),j.related=u(i,"related"),i.options.persistent||(j.destroyAll=u(i,"destroyAll"));for(var p=e(i,j,c.scopeMethods),q=0;q<p.length;q++){var r=p[q],t=j[r];"function"==typeof t&&t.shared===!0&&(a.prototype["__"+r+"__"+d]=t)}var v=B(a.prototype,b,d,function(){return{}},j,i.options);return v.related=j.related,i},o.prototype.prepareEmbeddedInstance=function(a){if(a&&"function"!==a.triggerParent){var c=this,d=this.definition.keyFrom,e=this.modelInstance;if(this.definition.options.persistent){var f=this.definition.keyTo;a.__persisted=!!a[f]}else a.__persisted=!0;a.triggerParent=function(f,g){if("save"===f||"destroy"===f){var h=c.embeddedList();if("destroy"===f){var i=h.indexOf(a);i>-1&&h.splice(i,1)}e.updateAttribute(d,h,function(a,b){g(a,a?null:b)})}else b.nextTick(g)};var g=a.trigger;a.trigger=function(b,c,d,e){if("function"==typeof c){var f=c;c=function(c){f.call(this,function(d){a.triggerParent(b,function(){c(d)})})}}g.call(this,b,c,d,e)}}},o.prototype.embeddedList=o.prototype.embeddedValue=function(a){a=a||this.modelInstance;var b=a[this.definition.keyFrom]||[];return b.forEach(this.prepareEmbeddedInstance.bind(this)),b},o.prototype.related=function(a,c,d,e){var f=this.definition.modelTo,g=(this.modelInstance,{});if(3===arguments.length)e=d;else{if(4!==arguments.length)throw new Error("Method can be only called with one or two arguments");"object"==typeof d&&(g=d)}var h=this.embeddedList(a);this.definition.applyScope(a,g);var i=C(g,c);i.where&&Object.keys(i.where).length>0&&(h=h?h.filter(E(i)):h);var j=function(a){i.include?f.include(a,i.include,e):b.nextTick(function(){e(null,a)})};j(h)},o.prototype.findById=function(a,c){var d=this.definition.keyTo,e=this.definition.modelTo,f=(this.modelInstance,this.embeddedList()),g=function(a){for(var b=0;b<f.length;b++){var c=f[b];if(c[d].toString()===a)return c}return null},h=g(a.toString());return h=h instanceof e?h:null,"function"==typeof c&&b.nextTick(function(){c(null,h)}),h},o.prototype.exists=function(a,b){var c=this.definition.modelTo,d=this.findById(a,function(a,d){b&&b(a,d instanceof c)});return d instanceof c},o.prototype.updateById=function(a,c,d){"function"==typeof c&&(d=c,c={});var e=this.definition.modelTo,f=this.definition.keyFrom,g=this.modelInstance,h=this.embeddedList(),i=this.findById(a);if(i instanceof e){"object"==typeof c&&i.setAttributes(c);var j=i.isValid()?null:new F(i);if(j&&"function"==typeof d)return b.nextTick(function(){d(j,i)});"function"==typeof d&&g.updateAttribute(f,h,function(a){d(a,i)})}else"function"==typeof d&&b.nextTick(function(){d(null,null)});return i},o.prototype.destroyById=function(a,c){var d=this.definition.modelTo,e=this.definition.keyFrom,f=this.modelInstance,g=this.embeddedList(),h=a instanceof d?a:this.findById(a);if(h instanceof d){var i=g.indexOf(h);i>-1&&g.splice(i,1),"function"==typeof c&&f.updateAttribute(e,g,function(a){c(a),d.emit("deleted",h.id,h.toJSON())})}else"function"==typeof c&&b.nextTick(c);return h},o.prototype.destroyAll=function(a,b){"function"==typeof a&&(b=a,a={});var c=this.definition.keyFrom,d=this.modelInstance,e=this.embeddedList();if(a&&Object.keys(a).length>0){var f=E({where:a}),g=function(a){return!f(a)};e=e?e.filter(g):e}else e=[];"function"==typeof b?d.updateAttribute(c,e,function(a){b(a)}):d.setAttribute(c,e)},o.prototype.get=o.prototype.findById,o.prototype.set=o.prototype.updateById,o.prototype.unset=o.prototype.destroyById,o.prototype.at=function(a,c){var d=this.definition.modelTo,e=(this.modelInstance,this.embeddedList()),f=e[parseInt(a)];return f=f instanceof d?f:null,"function"==typeof c&&b.nextTick(function(){c(null,f)}),f},o.prototype.create=function(a,c){var d=(this.definition.keyTo,this.definition.modelTo,this.definition.keyFrom),e=this.modelInstance;"function"!=typeof a||c||(c=a,a={}),a=a||{};var f=this.embeddedList(),g=this.callScopeMethod("build",a),h=function(){e.updateAttribute(d,f,function(a){c(a,a?null:g)})};if(this.definition.options.persistent)g.save(function(a){return a?c(a,g):void h()});else{var i=g.isValid()?null:new F(g);i?b.nextTick(function(){c(i)}):h()}},o.prototype.build=function(a){var b=this.definition.modelTo,c=this.modelInstance,d=this.definition.options.forceId,e=this.definition.options.persistent,f=b.dataSource.connector,g=this.definition.keyTo,h=b.definition.properties[g],i=h&&h.type,j=this.embeddedList();a=a||{};var k=d||void 0===a[g];if(k=k&&!e,k&&i===Number){var l=j.map(function(a){return"number"==typeof a[g]?a[g]:0});a[g]=l.length>0?Math.max.apply(null,l)+1:1}else if(k&&"function"==typeof f.generateId){var m=f.generateId(b.modelName,a,g);a[g]=m}this.definition.applyProperties(c,a);var n=new b(a);return this.definition.options.prepend?j.unshift(n):j.push(n),this.prepareEmbeddedInstance(n),n},o.prototype.add=function(a,b,c){"function"==typeof b&&(c=b,b={});var d=this,e=this.definition,f=this.definition.modelTo,g=this.modelInstance,h=e.options,i=h.belongsTo&&f.relations[h.belongsTo];if(!i)throw new Error("Invalid reference: "+h.belongsTo||"(none)");var j=i.keyTo,k=i.modelTo.definition.idName()||"id",l={};l[j]=a instanceof i.modelTo?a[k]:a;var m={where:l};i.applyScope(g,m),i.modelTo.findOne(m,function(a,e){if(e instanceof i.modelTo){var f=d.build(b||{});f[h.belongsTo](e),g.save(function(a){c(a,a?null:f)})}else c(null,null)})},o.prototype.remove=function(a,b){var c=this,d=this.definition,e=this.definition.modelTo,f=this.modelInstance,g=d.options,h=g.belongsTo&&e.relations[g.belongsTo];if(!h)throw new Error("Invalid reference: "+g.belongsTo||"(none)");var i=h.keyTo,j=h.modelTo.definition.idName()||"id",k={};k[i]=a instanceof h.modelTo?a[j]:a;var l={where:k};h.applyScope(f,l),f[d.name](l,function(a,d){return a?b(a):(d.forEach(function(a){c.unset(a)}),void f.save(function(a){b(a)}))})},g.referencesMany=function(a,b,c){c=c||{},b=s(a,b,c,!0);var d=(a.modelName,c.as||A.camelize(b.pluralModelName,!0)),f=c.foreignKey||A.camelize(b.modelName+"_ids",!0),h=b.dataSource.idName(b.modelName)||"id",i=b.definition.properties[h].type,j=a.relations[d]=new g({name:d,type:H.referencesMany,modelFrom:a,keyFrom:f,keyTo:h,modelTo:b,multiple:!0,properties:c.properties,scope:c.scope,options:c.options});a.dataSource.defineProperty(a.modelName,f,{type:[i],"default":function(){return[]}}),a.validate(d,function(a){var c=this[f]||[],e=c.filter(function(a,b){return c.indexOf(a)===b});if(c.length!==e.length){var g="contains duplicate `"+b.modelName+"` instance";this.errors.add(d,g,"uniqueness"),a(!1)}},{code:"uniqueness"});var k={findById:u(j,"findById"),destroy:u(j,"destroyById"),updateById:u(j,"updateById"),exists:u(j,"exists"),add:u(j,"add"),remove:u(j,"remove"),at:u(j,"at")},l=k.findById;a.prototype["__findById__"+d]=l;var m=k.destroy;a.prototype["__destroyById__"+d]=m;var n=k.updateById;a.prototype["__updateById__"+d]=n;var o=k.add;a.prototype["__link__"+d]=o;var p=k.remove;a.prototype["__unlink__"+d]=p,k.create=u(j,"create"),k.build=u(j,"build"),k.related=u(j,"related");for(var q=e(j,k,c.scopeMethods),r=0;r<q.length;r++){var t=q[r],v=k[t];"function"==typeof v&&v.shared===!0&&(a.prototype["__"+t+"__"+d]=v)}var w=B(a.prototype,b,d,function(){return{}},k,j.options);return w.related=k.related,j},p.prototype.related=function(a,b,c,d){var e=this.definition.keyFrom,f=this.definition.modelTo,g=(this.definition.name,this.modelInstance),h=a,i={},j=!1;if(3===arguments.length)d=c;else{if(4!==arguments.length)throw new Error("Method can be only called with one or two arguments");"boolean"==typeof c?j=c:(i=c,j=!0)}var k=h[e]||[];this.definition.applyScope(g,i);var l=C(i,b);f.findByIds(k,l,d)},p.prototype.findById=function(a,b){var c=this.definition.modelTo,d=this.definition.modelFrom,e=(this.definition.name,this.modelInstance),c=this.definition.modelTo,f=this.definition.keyTo,g=this.definition.keyFrom;"object"==typeof a&&(a=a.toString());var h=[a],i={};this.definition.applyScope(e,i),c.findByIds(h,i,function(i,j){if(i)return b(i);var k=j[0];if(!k)return i=new Error("No instance with id "+a+" found for "+c.modelName),i.statusCode=404,b(i);var l=h.map(function(a){return a.toString()}),m=(k[f]||"").toString();l.indexOf(m)>-1?b(null,k):(i=new Error("Key mismatch: "+d.modelName+"."+g+": "+e[g]+", "+c.modelName+"."+f+": "+k[f]),i.statusCode=400,b(i))})},p.prototype.exists=function(a,c){var d=this.definition.keyFrom,e=this.modelInstance[d]||[],f=e.map(function(a){return a.toString()}),a=(a||"").toString();b.nextTick(function(){c(null,f.indexOf(a)>-1)})},p.prototype.updateById=function(a,b,c){"function"==typeof b&&(c=b,b={}),this.findById(a,function(a,d){return a?c(a):void d.updateAttributes(b,c)})},p.prototype.destroyById=function(a,b){var c=this;this.findById(a,function(a,d){return a?b(a):void c.remove(d,function(){d.destroy(b)})})},p.prototype.at=function(a,b){var c=this.definition.keyFrom,d=this.modelInstance[c]||[];this.findById(d[a],b)},p.prototype.create=function(a,b){var c=this.definition,d=(this.definition.modelTo,this.definition.name,this.modelInstance),e=this.definition.keyTo,f=this.definition.keyFrom;"function"!=typeof a||b||(b=a,a={}),a=a||{};var g=d[f]||[],h=this.callScopeMethod("build",a);h.save(function(a,h){if(a)return b(a,h);var i=h[e];"object"==typeof i&&(i=i.toString()),c.options.prepend?g.unshift(i):g.push(i),d.updateAttribute(f,g,function(a){b(a,h)})})},p.prototype.build=function(a){var b=this.definition.modelTo;return a=a||{},this.definition.applyProperties(this.modelInstance,a),new b(a)},p.prototype.add=function(a,b){var c=this.definition,d=this.definition.modelTo,e=this.modelInstance,f=this.definition.keyTo,g=this.definition.keyFrom,h=function(a,b){var d=a[f];"object"==typeof d&&(d=d.toString());var h=e[g]||[];c.options.prepend?h.unshift(d):h.push(d),e.updateAttribute(g,h,function(c){b(c,c?null:a)})};if(a instanceof d)h(a,b);else{var i={where:{}};i.where[f]=a,c.applyScope(e,i),d.findOne(i,function(a,c){return a||!c?b(a,null):void h(c,b)})}},p.prototype.remove=function(a,c){var d=this.definition,e=this.modelInstance,f=this.definition.keyTo,g=this.definition.keyFrom,h=e[g]||[],i=h.map(function(a){return a.toString()}),j=a instanceof d.modelTo?a[f]:a;j=j.toString();var k=i.indexOf(j);k>-1?(h.splice(k,1),e.updateAttribute(g,h,function(a,b){c(a,b[g]||[])})):b.nextTick(function(){c(null,h)})}}).call(this,a("_process"))},{"./connectors/memory":223,"./model.js":235,"./scope.js":238,"./utils":240,"./validations.js":241,_process:187,assert:38,async:35,debug:211,inflection:217,util:207}],237:[function(a,b){function c(){}var d=a("./relation-definition"),e=d.RelationDefinition;b.exports=c,c.hasMany=function(a,b){return e.hasMany(this,a,b)},c.belongsTo=function(a,b){return e.belongsTo(this,a,b)},c.hasAndBelongsToMany=function(a,b){return e.hasAndBelongsToMany(this,a,b)},c.hasOne=function(a,b){return e.hasOne(this,a,b)},c.referencesMany=function(a,b){return e.referencesMany(this,a,b)},c.embedsOne=function(a,b){return e.embedsOne(this,a,b)},c.embedsMany=function(a,b){return e.embedsMany(this,a,b)}},{"./relation-definition":236}],238:[function(a,b,c){function d(a){this.isStatic=a.isStatic,this.modelFrom=a.modelFrom,this.modelTo=a.modelTo||a.modelFrom,this.name=a.name,this.params=a.params,this.methods=a.methods||{},this.options=a.options||{}}function e(a,b,c,e,g,h){function k(a){a=a||{};var b=r.targetModel(this._receiver),c=this._scope&&this._scope.where||{};return i(a,c,b),new b(a)}function l(a,b){"function"==typeof a&&(b=a,a={}),this.build(a).save(b)}function m(a,b){"function"==typeof a&&(b=a,a={});var c=r.targetModel(this._receiver),d=this._scope&&this._scope.where||{},e=j({where:d},{where:a||{}});c.destroyAll(e.where,b)}function n(a,b){var c=r.targetModel(this._receiver),d=c.definition.idName(),e={where:{}};e.where[d]=a,this.findOne(e,b)}function o(a,b){"function"==typeof a&&(b=a,a={});var c=r.targetModel(this._receiver),d=this._scope&&this._scope.where||{},a=j({where:d},a||{});c.findOne(a,b)}function p(a,b){"function"==typeof a&&(b=a,a={});var c=r.targetModel(this._receiver),d=this._scope&&this._scope.where||{},e=j({where:d},{where:a||{}});c.count(e.where,b)}a._scopeMeta||(a._scopeMeta={}),a===b?a._scopeMeta[c]=e:b&&(b._scopeMeta||(b._scopeMeta={})),h=h||{};var q="function"==typeof a||h.isStatic||!1,r=new d({isStatic:q,modelFrom:a,modelTo:b,name:c,params:e,methods:g,options:h});q?(a.scopes=a.scopes||{},a.scopes[c]=r):(a.constructor.scopes=a.constructor.scopes||{},a.constructor.scopes[c]=r),Object.defineProperty(a,c,{enumerable:!1,configurable:!0,get:function(){var a=r.targetModel(this),d=this,e=function(a,b){return 0!==arguments.length?(e._scope.collect&&null!==a&&"object"==typeof a&&(e._scope.include={relation:e._scope.collect,scope:a},a={}),1===arguments.length?r.related(d,e._scope,a):r.related(d,e._scope,a,b)):"function"==typeof e.value?e.value(d):d.__cachedRelations?d.__cachedRelations[c]:void 0};e._receiver=this,e._scope="function"==typeof r.params?r.params.call(d):r.params,e._targetClass=a.modelName,e._scope.collect&&(e._targetClass=f.camelize(e._scope.collect)),e.build=k,e.create=l,e.destroyAll=m,e.findById=n,e.findOne=o,e.count=p;for(var g in r.methods)e[g]=r.methods[g].bind(d);return b?(Object.keys(b._scopeMeta).forEach(function(b){Object.defineProperty(e,b,{enumerable:!1,get:function(){return j(e._scope,a._scopeMeta[b]),e}})}.bind(d)),e):e}});var s=function(){var a=this[c];a.apply(this[c],arguments)};a["__get__"+c]=s;var t=function(){var a=this[c].create;a.apply(this[c],arguments)};a["__create__"+c]=t;var u=function(){var a=this[c].destroyAll;a.apply(this[c],arguments)};a["__delete__"+c]=u;var v=function(){var a=this[c].findById;a.apply(this[c],arguments)};a["__findById__"+c]=v;var w=function(){var a=this[c].findOne;a.apply(this[c],arguments)};a["__findOne__"+c]=w;var x=function(){var a=this[c].count;a.apply(this[c],arguments)};return a["__count__"+c]=x,r}var f=a("inflection"),g=a("./utils"),h=g.defineCachedRelations,i=g.setScopeValuesFromWhere,j=g.mergeQuery,k=a("./model.js");c.defineScope=e,d.prototype.targetModel=function(a){if("function"==typeof this.options.modelTo)var b=this.options.modelTo.call(this,a)||this.modelTo;else var b=this.modelTo;if(!(b.prototype instanceof k)){var c="Invalid target model for scope `";throw c+=(this.isStatic?this.modelFrom:this.modelFrom.constructor).modelName,c+=this.isStatic?".":".prototype.",c+=this.name+"`.",new Error(c)}return b},d.prototype.related=function(a,b,c,d){var e=this.name,f=a,g={},i=!1,k=!0;if(3===arguments.length)d=c;else{if(4!==arguments.length)throw new Error("Method can be only called with one or two arguments");"boolean"==typeof c?i=c:(g=c,i=!0,k=!1)}if(!f.__cachedRelations||void 0===f.__cachedRelations[e]||i){var l=j(g,b),m=this.targetModel(a);m.find(l,function(a,b){!a&&k&&(h(f),f.__cachedRelations[e]=b),d(a,b)})}else d(null,f.__cachedRelations[e])},d.prototype.defineMethod=function(a,b){return this.methods[a]=b}},{"./model.js":235,"./utils":240,inflection:217}],239:[function(a,b){(function(c){var d={};d.Text=function e(a){return this instanceof e?void(this.value=a):a},d.Text.prototype.toObject=d.Text.prototype.toJSON=function(){return this.value},d.JSON=function f(a){return this instanceof f?void(this.value=a):a},d.JSON.prototype.toObject=d.JSON.prototype.toJSON=function(){return this.value},d.Any=function g(a){return this instanceof g?void(this.value=a):a},d.Any.prototype.toObject=d.Any.prototype.toJSON=function(){return this.value},b.exports=function(b){var e=a("./geo").GeoPoint;for(var f in d)b[f]=d[f];b.schemaTypes={},b.registerType=function(a,b){b=b||[],b=b.concat([a.name]);for(var c=0;c<b.length;c++)this.schemaTypes[b[c].toLowerCase()]=a},b.registerType(d.Text),b.registerType(d.JSON),b.registerType(d.Any),b.registerType(String),b.registerType(Number),b.registerType(Boolean),b.registerType(Date),b.registerType(c,["Binary"]),b.registerType(Array),b.registerType(e),b.registerType(Object)},b.exports.Types=d}).call(this,a("buffer").Buffer)},{"./geo":226,buffer:40}],240:[function(a,b,c){(function(b,d){function e(c){try{return a(c)}catch(d){console.log('Run "npm install loopback-datasource-juggler '+c+'" command to use loopback-datasource-juggler using '+c+" database engine"),b.exit(1)}}function f(a,b,c){for(var d in b)if("and"!==d){var e=c.definition.properties[d];if(e){var g=b[d];("object"!=typeof g||g instanceof e.type||"ObjectID"===e.type.name)&&(a[d]=b[d])}}else for(var h=0,i=b[d].length;i>h;h++)f(a,b[d][h],c)}function g(a,b,c){if(b){if(c=c||{},a=a||{},b.where&&Object.keys(b.where).length>0&&(a.where=a.where&&Object.keys(a.where).length>0?{and:[a.where,b.where]}:b.where),c.include!==!1&&b.include)if(a.include){var d=a.include;a.include={},a.include[b.include]=d}else a.include=b.include;c.collect!==!1&&b.collect&&(a.collect=b.collect),c.fields!==!1&&void 0!==b.fields?a.fields=b.fields:void 0!==b.fields&&(a.fields=[].concat(a.fields).concat(b.fields)),a.order&&c.order!==!1||!b.order||(a.order=b.order),c.limit!==!1&&void 0!==b.limit&&(a.limit=b.limit);var e=c.skip!==!1&&c.offset!==!1;return e&&void 0!==b.skip&&(a.skip=b.skip),e&&void 0!==b.offset&&(a.offset=b.offset),a}}function h(a,b){if(a){var c=b;if("string"==typeof a)return[a];if(Array.isArray(a)&&a.length>0)return a;if("object"==typeof a){var d=[],e=[],f=Object.keys(a);if(!f.length)return;f.forEach(function(b){a[b]?d.push(b):b in a&&!a[b]&&e.push(b)}),d.length>0?c=d:e.length>0&&e.forEach(function(a){var b=c.indexOf(a);c.splice(b,1)})}return c}}function i(a){return function(b){for(var c,d={},e=0;e<a.length;e++)c=a[e],d[c]=b[c];return d}}function j(a){return"object"!=typeof a||null===a?a:r(a).forEach(function(a){return void 0===a&&this.remove(),Array.isArray(a)||"object"!=typeof a||null===a||a.constructor===Object?a:(this.update(a,!0),a)})}function k(a){if(!a)return{};var b=s.parse(a,!1),c={};if(c.connector=b.protocol&&b.protocol.split(":")[0],c.host=c.hostname=b.hostname,c.port=b.port&&Number(b.port),c.user=c.username=b.auth&&b.auth.split(":")[0],c.password=b.auth&&b.auth.split(":")[1],c.database=b.pathname&&b.pathname.split("/")[1],c.url=a,b.query){var d=t.parse(b.query);for(var e in d)c[e]=d[e]}return c}function l(a,b){var c=Array.isArray(b),d=c&&[]||{};return c?(a=a||[],d=d.concat(a),b.forEach(function(a){-1===d.indexOf(a)&&d.push(a)})):(a&&"object"==typeof a&&Object.keys(a).forEach(function(b){d[b]=a[b]}),Object.keys(b).forEach(function(c){d[c]="object"==typeof b[c]&&b[c]&&a[c]?l(a[c],b[c]):b[c]})),d}function m(a){a.__cachedRelations||Object.defineProperty(a,"__cachedRelations",{writable:!0,enumerable:!1,configurable:!0,value:{}})}function n(a){return"object"==typeof a&&null!==a&&a.constructor===Object}function o(a,b,c,d){b=b.map(function(a){return"object"==typeof a?String(a):a});var e=function(c){var d="object"==typeof c[a],e=d?String(c[a]):c[a];return b.indexOf(e)},f=[],g=[];return c.forEach(function(a){if("object"==typeof a){var b=e(a);if(d&&-1===b)return;-1===b?g.push(a):f.push(a)}}),f.sort(function(a,b){var c=e(a),d=e(b);return-1===c||-1===d?1:c===d?0:c>d?1:d>c?-1:void 0}),f.concat(g)}function p(){var a;if(!d.Promise)return a=function(){},a.promise={},Object.defineProperty(a.promise,"then",{get:q}),Object.defineProperty(a.promise,"catch",{get:q}),a;var b=new Promise(function(b,c){a=function(a,d){return a?c(a):b(d)}});return a.promise=b,a}function q(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')}c.safeRequire=e,c.fieldsToArray=h,c.selectFields=i,c.removeUndefined=j,c.parseSettings=k,c.mergeSettings=c.deepMerge=l,c.isPlainObject=n,c.defineCachedRelations=m,c.sortObjectsByIds=o,c.setScopeValuesFromWhere=f,c.mergeQuery=g,c.createPromiseCallback=p;var r=a("traverse"),s=a("url"),t=a("qs")}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:187,qs:246,traverse:251,url:205}],241:[function(a,b,c){(function(b){function d(){}function e(a,b,c){s(this[a])&&c()}function f(a,b,c){s(this[a])||c()}function g(a,b,c){if(!r.call(this,a,b,c)){var d=this[a].length;b.min&&d<b.min&&c("min"),b.max&&d>b.max&&c("max"),b.is&&d!==b.is&&c("is")}}function h(a,b,c){return r.call(this,a,b,c)?void 0:"number"!=typeof this[a]?c("number"):b["int"]&&this[a]!==Math.round(this[a])?c("int"):void 0}function i(a,b,c){r.call(this,a,b,c)||~b["in"].indexOf(this[a])||c()}function j(a,b,c){r.call(this,a,b,c)||~b["in"].indexOf(this[a])&&c()}function k(a,b,c){r.call(this,a,b,c)||("string"==typeof this[a]?this[a].match(b["with"])||c():c())}function l(a,b,c,d){b.customValidator.call(this,c,d)}function m(a,c,d,e){if(s(this[a]))return b.nextTick(e);var f={where:{}};f.where[a]=this[a],c&&c.scopedTo&&c.scopedTo.forEach(function(a){var b=this[a];void 0!==b&&(f.where[a]=this[a])},this),this.constructor.find(f,function(a,b){return a?d():(b.length>1?d():1!==b.length||this.id&&b[0].id&&b[0].id.toString()==this.id.toString()||d(),void e())}.bind(this))}function n(a,b){return function(){var c=Array.prototype.slice.call(arguments);c[1]=c[1]||{},t(this,a,c,b)}}function o(a){Object.defineProperty(a,"errors",{enumerable:!1,configurable:!0,value:!1})}function p(a,b,c,d){c.options||{};if("string"!=typeof b)return!1;if(q(a,c,"if")||q(a,c,"unless"))return d&&d(!1),!1;var e=!1,f=B[c.validation],g=[];return g.push(b),g.push(c),g.push(function(d){var f,g=c.code||c.validation;c.message&&(f=c.message),!f&&C[c.validation]&&(f=C[c.validation]),f||(f="is invalid"),d&&(g+="."+d,f=f[d]?f[d]:C.common[d]?C.common[d]:"is invalid"),d!==!1&&a.errors.add(b,f,g),e=!0}),d&&g.push(function(){d(e)}),f.apply(a,g),e}function q(a,b,c){var d=!0;return"function"==typeof b[c]?(d=b[c].call(a),"unless"===c&&(d=!d)):"string"==typeof b[c]&&("function"==typeof a[b[c]]?(d=a[b[c]].call(a),"unless"===c&&(d=!d)):a.__data.hasOwnProperty(b[c])?(d=a[b[c]],"unless"===c&&(d=!d)):d="if"===c),!d}function r(a,b,c){return null==this[a]?(b.allowNull||c("null"),!0):s(this[a])?(b.allowBlank||c("blank"),!0):!1}function s(a){return"undefined"==typeof a?!0:a instanceof Array&&0===a.length?!0:null===a?!0:"string"==typeof a&&""===a?!0:!1}function t(a,b,c,d){a.validations||Object.defineProperty(a,"validations",{writable:!0,configurable:!0,enumerable:!1,value:{}}),c=[].slice.call(c);var e;e="object"==typeof c[c.length-1]?c.pop():{},"custom"===b&&"function"==typeof c[c.length-1]&&(e.customValidator=c.pop()),e.validation=b,c.forEach(function(b){if("string"==typeof b){var c=A({},e);c.options=d||{},a.validations[b]=a.validations[b]||[],a.validations[b].push(c)}})}function u(){Object.defineProperty(this,"codes",{enumerable:!1,configurable:!0,value:{}})}function v(a){if(!(this instanceof v))return new v(a);this.name="ValidationError";var b=a&&a.constructor&&a.constructor.modelName;this.message=z.format("The %s instance is not valid. Details: %s.",b?"`"+b+"`":"model",w(a.errors,a.toJSON())||"(unknown)"),
this.statusCode=422,this.details={context:b,codes:a.errors&&a.errors.codes,messages:a.errors},Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):D&&(this.stack=(new Error).stack)}function w(a,b){var c="; ";return a=a||{},Object.getOwnPropertyNames(a).filter(function(b){return Array.isArray(a[b])}).map(function(d){var e=a[d],f=b[d];return e.map(function(a){return x(d,f,a)}).join(c)}).join(c)}function x(a,b,c){var d,e=typeof b;return"string"===e?d=JSON.stringify(y(b)):b instanceof Date?d=b.toISOString():"object"===e?(d=z.inspect(b,{showHidden:!1,color:!1,depth:Array.isArray(b)?1:0}),d=y(d)):d=y(""+b),"`"+a+"` "+c+" (value: "+d+")"}function y(a){var b=v.maxPropertyStringLength;if(a.length<=b)return a;var c,d=a.match(/([ \t})\]]+)$/);return d?(c=d[1].slice(-3),b-=c.length):(c=a.slice(-3),b-=3),a.slice(0,b-4)+"..."+c}var z=a("util"),A=z._extend;c.ValidationError=v,c.Validatable=d,d.validatesPresenceOf=n("presence"),d.validatesAbsenceOf=n("absence"),d.validatesLengthOf=n("length"),d.validatesNumericalityOf=n("numericality"),d.validatesInclusionOf=n("inclusion"),d.validatesExclusionOf=n("exclusion"),d.validatesFormatOf=n("format"),d.validate=n("custom"),d.validateAsync=n("custom",{async:!0}),d.validatesUniquenessOf=n("uniqueness",{async:!0});var B={presence:e,absence:f,length:g,numericality:h,inclusion:i,exclusion:j,format:k,custom:l,uniqueness:m};d.prototype.isValid=function(a,c){var d=!0,e=this,f=0,g=!1,h=this.constructor.validations;return"object"!=typeof h?(o(this),a&&this.trigger("validate",function(b){b.call(e,function(){a(d)})},c,a),d):(Object.defineProperty(this,"errors",{enumerable:!1,configurable:!0,value:new u}),this.trigger("validate",function(c){function e(b){j=j||b,0===--f&&c.call(i,function(){d&&!j&&o(i),a&&a(d&&!j)})}var i=this,j=!1,k=Object.keys(h||{});k.forEach(function(a){var c=h[a]||[];c.forEach(function(c){c.options&&c.options.async?(g=!0,f+=1,b.nextTick(function(){p(i,a,c,e)})):p(i,a,c)&&(d=!1)})}),g||c.call(i,function(){d&&o(i),a&&a(d)})},c,a),g?void 0:d)};var C={presence:"can't be blank",absence:"can't be set",length:{min:"too short",max:"too long",is:"length is wrong"},common:{blank:"is blank","null":"is null"},numericality:{"int":"is not an integer",number:"is not a number"},inclusion:"is not included in the list",exclusion:"is reserved",uniqueness:"is not unique"};u.prototype.add=function(a,b,c){c=c||"invalid",this[a]||(this[a]=[],this.codes[a]=[]),this[a].push(b),this.codes[a].push(c)},z.inherits(v,Error);var D=!!(new Error).stack;v.maxPropertyStringLength=32}).call(this,a("_process"))},{_process:187,util:207}],242:[function(a,b,c){c.Connector=a("./lib/connector"),c.SqlConnector=a("./lib/sql")},{"./lib/connector":243,"./lib/sql":244}],243:[function(a,b){(function(a){function c(a,b){this._models={},this.name=a,this.settings=b||{}}b.exports=c,c.prototype.relational=!1,c.prototype.getTypes=function(){return["db","nosql"]},c.prototype.getDefaultIdType=function(){return String},c.prototype.getMedadata=function(){return this._metadata||(this._metadata={types:this.getTypes(),defaultIdType:this.getDefaultIdType(),isRelational:this.isRelational||-1!==this.getTypes().indexOf("rdbms"),schemaForSettings:{}}),this._metadata},c.prototype.execute=function(){throw new Error("query method should be declared in connector")},c.prototype.getDataSource=function(a){var b=this._models[a];return b||console.trace("Model not found: "+a),b&&b.model.dataSource},c.prototype.idName=function(a){return this.getDataSource(a).idName(a)},c.prototype.idNames=function(a){return this.getDataSource(a).idNames(a)},c.prototype.id=function(a,b){var c=this._models[a].properties[b];return c&&c.id},c.prototype.define=function(a){a.settings||(a.settings={}),this._models[a.model.modelName]=a},c.prototype.defineProperty=function(a,b,c){this._models[a].properties[b]=c},c.prototype.disconnect=function(b){b&&a.nextTick(b)},c.prototype.getIdValue=function(a,b){return b&&b[this.idName(a)]},c.prototype.setIdValue=function(a,b,c){b&&(b[this.idName(a)]=c)},c.prototype.getType=function(){return this.type}}).call(this,a("_process"))},{_process:187}],244:[function(a,b){(function(c){function d(){j.apply(this,[].slice.call(arguments))}function e(a,b,d){try{return i(null!==a&&void 0!==a,"id value is required"),!0}catch(e){return c.nextTick(function(){b&&b(d?null:e)}),!1}}function f(a,b,c){if("function"==typeof a.buildWhere)return a.buildWhere(b,c);var d=a._models[b].properties,e=[];return Object.keys(c||{}).forEach(function(f){var g=a.columnEscaped(b,f);e.push(null===c[f]?g+" IS NULL":g+" = "+a.toDatabase(d[f],c[f]))}),e.length?" WHERE "+e.join(" AND "):""}var g=a("util"),h=a("async"),i=a("assert"),j=a("./connector");b.exports=d,g.inherits(d,j),d.prototype.relational=!0,d.prototype.getTypes=function(){return["db","rdbms","sql"]},d.prototype.getDefaultIdType=function(){return Number},d.prototype.query=function(){throw new Error("query method should be declared in connector")},d.prototype.command=function(a,b,c){return this.query(a,b,c)},d.prototype.queryOne=function(a,b){return this.query(a,function(a,c){return a?b(a):void b(a,c&&c[0])})},d.prototype.table=function(a){var b=this.getDataSource(a).tableName(a),c=this.dbName;return"function"==typeof c&&(b=c(b)),b},d.prototype.column=function(a,b){var c=this.getDataSource(a).columnName(a,b),d=this.dbName;return"function"==typeof d&&(c=d(c)),c},d.prototype.columnMetadata=function(a,b){return this.getDataSource(a).columnMetadata(a,b)},d.prototype.propertyName=function(a,b){var c=this._models[a].properties;for(var d in c)if(this.column(a,d)===b)return d;return null},d.prototype.idColumn=function(a){var b=this.getDataSource(a).idColumnName(a),c=this.dbName;return"function"==typeof c&&(b=c(b)),b},d.prototype.idColumnEscaped=function(a){return this.escapeName(this.getDataSource(a).idColumnName(a))},d.prototype.escapeName=function(){throw new Error("escapeName method should be declared in connector")},d.prototype.tableEscaped=function(a){return this.escapeName(this.table(a))},d.prototype.columnEscaped=function(a,b){return this.escapeName(this.column(a,b))},d.prototype.save=function(a,b,c){var d=this.getDataSource(a).idName(a),f=b[d];if(e(f,c)){f=this._escapeIdValue(a,f);var g="UPDATE "+this.tableEscaped(a)+" SET "+this.toFields(a,b)+" WHERE "+this.idColumnEscaped(a)+" = "+f;this.query(g,function(a,b){c&&c(a,b)})}},d.prototype.exists=function(a,b,c){if(e(b,c,!0)){var d="SELECT 1 FROM "+this.tableEscaped(a)+" WHERE "+this.idColumnEscaped(a)+" = "+this._escapeIdValue(a,b)+" LIMIT 1";this.query(d,function(a,b){c&&(a?c(a):c(null,b.length>=1))})}},d.prototype.find=function(a,b,c){if(e(b,c,!0)){var d=this,f=this.idColumnEscaped(a)+" = "+this._escapeIdValue(a,b),g="SELECT * FROM "+this.tableEscaped(a)+" WHERE "+f+" LIMIT 1";this.query(g,function(b,e){var f=e&&e.length>=1?e[0]:null;c&&c(b,d.fromDatabase(a,f))})}},d.prototype["delete"]=d.prototype.destroy=function(a,b,c){if(e(b,c,!0)){var d="DELETE FROM "+this.tableEscaped(a)+" WHERE "+this.idColumnEscaped(a)+" = "+this._escapeIdValue(a,b);this.command(d,function(a,b){c&&c(a,b)})}},d.prototype._escapeIdValue=function(a,b){var c=this.getDataSource(a).idProperty(a);return"function"==typeof this.toDatabase?this.toDatabase(c,b):c.type===Number?b:"'"+b+"'"},d.prototype.deleteAll=d.prototype.destroyAll=function(a,b,c){this.command("DELETE FROM "+this.tableEscaped(a)+f(this,a,b),function(a,b){c&&c(a,b)})},d.prototype.count=function(a,b,c){var d=this,e=f(d,a,c);this.queryOne("SELECT count(*) as cnt FROM "+this.tableEscaped(a)+" "+e,function(a,c){return a?b(a):void b(a,c&&c.cnt)})},d.prototype.updateAttributes=function(a,b,c,d){if(e(b,d)){var f=this.getDataSource(a).idName(a);delete c[f];var g={};g[f]=b,this.updateAll(a,g,c,d)}},d.prototype.disconnect=function(){},d.prototype.automigrate=function(a,b){var d=this;if(b||"function"!=typeof a||(b=a,a=void 0),"string"==typeof a&&(a=[a]),a=a||Object.keys(d._models),0===a.length)return c.nextTick(b);var e=a.filter(function(a){return!(a in d._models)});return e.length?c.nextTick(function(){b(new Error("Cannot migrate models not attached to this datasource: "+e.join(" ")))}):void h.each(a,function(a,b){d.dropTable(a,function(c){c&&console.error(c),d.createTable(a,function(a,c){a&&console.error(a),b(a,c)})})},b)},d.prototype.dropTable=function(a,b){this.command("DROP TABLE IF EXISTS "+this.tableEscaped(a),b)},d.prototype.createTable=function(a,b){this.command("CREATE TABLE "+this.tableEscaped(a)+" (\n  "+this.propertiesSQL(a)+"\n)",b)},d.prototype.update=d.prototype.updateAll=function(a,b,c,d){var e=f(this,a,b),g="UPDATE "+this.tableEscaped(a)+" SET "+this.toFields(a,c)+" "+e;this.query(g,function(a,b){d&&d(a,b)})}}).call(this,a("_process"))},{"./connector":243,_process:187,assert:38,async:35,util:207}],245:[function(a,b){(function(){function a(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=n[a])});16>e;)b[d+e++]=0;return b}function c(a,b){var c=b||0,d=m;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function d(a,b,d){var e=b&&d||0,f=b||[];a=a||{};var g=null!=a.clockseq?a.clockseq:r,h=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:t+1,j=h-s+(i-t)/1e4;if(0>j&&null==a.clockseq&&(g=g+1&16383),(0>j||h>s)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,t=i,r=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[e++]=k>>>24&255,f[e++]=k>>>16&255,f[e++]=k>>>8&255,f[e++]=255&k;var l=h/4294967296*1e4&268435455;f[e++]=l>>>8&255,f[e++]=255&l,f[e++]=l>>>24&15|16,f[e++]=l>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var m=a.node||q,n=0;6>n;n++)f[e+n]=m[n];return b?b:c(f)}function e(a,b,d){var e=b&&d||0;"string"==typeof a&&(b="binary"==a?new l(16):null,a=null),a=a||{};var g=a.random||(a.rng||f)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,b)for(var h=0;16>h;h++)b[e+h]=g[h];return b||c(g)}var f,g=this;if("function"==typeof g.require)try{var h=g.require("crypto").randomBytes;f=h&&function(){return h(16)}}catch(i){}if(!f&&g.crypto&&crypto.getRandomValues){var j=new Uint8Array(16);f=function(){return crypto.getRandomValues(j),j}}if(!f){var k=new Array(16);f=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),k[b]=a>>>((3&b)<<3)&255;return k}}for(var l="function"==typeof g.Buffer?g.Buffer:Array,m=[],n={},o=0;256>o;o++)m[o]=(o+256).toString(16).substr(1),n[m[o]]=o;var p=f(),q=[1|p[0],p[1],p[2],p[3],p[4],p[5]],r=16383&(p[6]<<8|p[7]),s=0,t=0,u=e;if(u.v1=d,u.v4=e,u.parse=a,u.unparse=c,u.BufferClass=l,"undefined"!=typeof b&&b.exports)b.exports=u;else if("function"==typeof define&&define.amd)define(function(){return u});else{var v=g.uuid;u.noConflict=function(){return g.uuid=v,u},g.uuid=u}}).call(this)},{}],246:[function(a,b){b.exports=a("./lib/")},{"./lib/":247}],247:[function(a,b){var c=a("./stringify"),d=a("./parse");b.exports={stringify:c,parse:d}},{"./parse":248,"./stringify":249}],248:[function(a,b){var c=a("./utils"),d={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};d.parseValues=function(a,b){for(var d={},e=a.split(b.delimiter,b.parameterLimit===1/0?void 0:b.parameterLimit),f=0,g=e.length;g>f;++f){var h=e[f],i=-1===h.indexOf("]=")?h.indexOf("="):h.indexOf("]=")+1;if(-1===i)d[c.decode(h)]="";else{var j=c.decode(h.slice(0,i)),k=c.decode(h.slice(i+1));if(Object.prototype.hasOwnProperty(j))continue;d[j]=d.hasOwnProperty(j)?[].concat(d[j]).concat(k):k}}return d},d.parseObject=function(a,b,c){if(!a.length)return b;var e=a.shift(),f={};if("[]"===e)f=[],f=f.concat(d.parseObject(a,b,c));else{var g="["===e[0]&&"]"===e[e.length-1]?e.slice(1,e.length-1):e,h=parseInt(g,10),i=""+h;!isNaN(h)&&e!==g&&i===g&&h>=0&&h<=c.arrayLimit?(f=[],f[h]=d.parseObject(a,b,c)):f[g]=d.parseObject(a,b,c)}return f},d.parseKeys=function(a,b,c){if(a){var e=/^([^\[\]]*)/,f=/(\[[^\[\]]*\])/g,g=e.exec(a);if(!Object.prototype.hasOwnProperty(g[1])){var h=[];g[1]&&h.push(g[1]);for(var i=0;null!==(g=f.exec(a))&&i<c.depth;)++i,Object.prototype.hasOwnProperty(g[1].replace(/\[|\]/g,""))||h.push(g[1]);return g&&h.push("["+a.slice(g.index)+"]"),d.parseObject(h,b,c)}}},b.exports=function(a,b){if(""===a||null===a||"undefined"==typeof a)return{};b=b||{},b.delimiter="string"==typeof b.delimiter||c.isRegExp(b.delimiter)?b.delimiter:d.delimiter,b.depth="number"==typeof b.depth?b.depth:d.depth,b.arrayLimit="number"==typeof b.arrayLimit?b.arrayLimit:d.arrayLimit,b.parameterLimit="number"==typeof b.parameterLimit?b.parameterLimit:d.parameterLimit;for(var e="string"==typeof a?d.parseValues(a,b):a,f={},g=Object.keys(e),h=0,i=g.length;i>h;++h){var j=g[h],k=d.parseKeys(j,e[j],b);f=c.merge(f,k)}return c.compact(f)}},{"./utils":250}],249:[function(a,b){var c=a("./utils"),d={delimiter:"&",arrayPrefixGenerators:{brackets:function(a){return a+"[]"},indices:function(a,b){return a+"["+b+"]"},repeat:function(a){return a}}};d.stringify=function(a,b,e){if(c.isBuffer(a)?a=a.toString():a instanceof Date?a=a.toISOString():null===a&&(a=""),"string"==typeof a||"number"==typeof a||"boolean"==typeof a)return[encodeURIComponent(b)+"="+encodeURIComponent(a)];var f=[];if("undefined"==typeof a)return f;for(var g=Object.keys(a),h=0,i=g.length;i>h;++h){var j=g[h];f=f.concat(Array.isArray(a)?d.stringify(a[j],e(b,j),e):d.stringify(a[j],b+"["+j+"]",e))}return f},b.exports=function(a,b){b=b||{};var c="undefined"==typeof b.delimiter?d.delimiter:b.delimiter,e=[];if("object"!=typeof a||null===a)return"";var f;f=b.arrayFormat in d.arrayPrefixGenerators?b.arrayFormat:"indices"in b?b.indices?"indices":"repeat":"indices";for(var g=d.arrayPrefixGenerators[f],h=Object.keys(a),i=0,j=h.length;j>i;++i){var k=h[i];e=e.concat(d.stringify(a[k],k,g))}return e.join(c)}},{"./utils":250}],250:[function(a,b,c){c.arrayToObject=function(a){for(var b={},c=0,d=a.length;d>c;++c)"undefined"!=typeof a[c]&&(b[c]=a[c]);return b},c.merge=function(a,b){if(!b)return a;if("object"!=typeof b)return Array.isArray(a)?a.push(b):a[b]=!0,a;if("object"!=typeof a)return a=[a].concat(b);Array.isArray(a)&&!Array.isArray(b)&&(a=c.arrayToObject(a));for(var d=Object.keys(b),e=0,f=d.length;f>e;++e){var g=d[e],h=b[g];a[g]=a[g]?c.merge(a[g],h):h}return a},c.decode=function(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}},c.compact=function(a,b){if("object"!=typeof a||null===a)return a;b=b||[];var d=b.indexOf(a);if(-1!==d)return b[d];if(b.push(a),Array.isArray(a)){for(var e=[],f=0,g=a.length;g>f;++f)"undefined"!=typeof a[f]&&e.push(a[f]);return e}var h=Object.keys(a);for(f=0,g=h.length;g>f;++f){var i=h[f];a[i]=c.compact(a[i],b)}return a},c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},c.isBuffer=function(a){return null===a||"undefined"==typeof a?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))}},{}],251:[function(a,b){function c(a){this.value=a}function d(a,b,c){var d=[],f=[],g=!0;return function h(a){function i(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=n(m.node)),m.isLeaf=0==m.keys.length;for(var b=0;b<f.length;b++)if(f[b].node_===a){m.circular=f[b];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}var j=c?e(a):a,k={},l=!0,m={node:j,node_:a,path:[].concat(d),parent:f[f.length-1],parents:f,key:d.slice(-1)[0],isRoot:0===d.length,level:d.length,circular:null,update:function(a,b){m.isRoot||(m.parent.node[m.key]=a),m.node=a,b&&(l=!1)},"delete":function(a){delete m.parent.node[m.key],a&&(l=!1)},remove:function(a){o(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],a&&(l=!1)},keys:null,before:function(a){k.before=a},after:function(a){k.after=a},pre:function(a){k.pre=a},post:function(a){k.post=a},stop:function(){g=!1},block:function(){l=!1}};if(!g)return m;i();var r=b.call(m,m.node);return void 0!==r&&m.update&&m.update(r),k.before&&k.before.call(m,m.node),l?("object"!=typeof m.node||null===m.node||m.circular||(f.push(m),i(),p(m.keys,function(a,b){d.push(a),k.pre&&k.pre.call(m,m.node[a],a);var e=h(m.node[a]);c&&q.call(m.node,a)&&(m.node[a]=e.node),e.isLast=b==m.keys.length-1,e.isFirst=0==b,k.post&&k.post.call(m,e),d.pop()}),f.pop()),k.after&&k.after.call(m,m.node),m):m}(a).node}function e(a){if("object"==typeof a&&null!==a){var b;if(o(a))b=[];else if(g(a))b=new Date(a.getTime?a.getTime():a);else if(h(a))b=new RegExp(a);else if(i(a))b={message:a.message};else if(j(a))b=new Boolean(a);else if(k(a))b=new Number(a);else if(l(a))b=new String(a);else if(Object.create&&Object.getPrototypeOf)b=Object.create(Object.getPrototypeOf(a));else if(a.constructor===Object)b={};else{var c=a.constructor&&a.constructor.prototype||a.__proto__||{},d=function(){};d.prototype=c,b=new d}return p(n(a),function(c){b[c]=a[c]}),b}return a}function f(a){return Object.prototype.toString.call(a)}function g(a){return"[object Date]"===f(a)}function h(a){return"[object RegExp]"===f(a)}function i(a){return"[object Error]"===f(a)}function j(a){return"[object Boolean]"===f(a)}function k(a){return"[object Number]"===f(a)}function l(a){return"[object String]"===f(a)}var m=b.exports=function(a){return new c(a)};c.prototype.get=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!q.call(b,d)){b=void 0;break}b=b[d]}return b},c.prototype.has=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!q.call(b,d))return!1;b=b[d]}return!0},c.prototype.set=function(a,b){for(var c=this.value,d=0;d<a.length-1;d++){var e=a[d];q.call(c,e)||(c[e]={}),c=c[e]}return c[a[d]]=b,b},c.prototype.map=function(a){return d(this.value,a,!0)},c.prototype.forEach=function(a){return this.value=d(this.value,a,!1),this.value},c.prototype.reduce=function(a,b){var c=1===arguments.length,d=c?this.value:b;return this.forEach(function(b){this.isRoot&&c||(d=a.call(this,d,b))}),d},c.prototype.paths=function(){var a=[];return this.forEach(function(){a.push(this.path)}),a},c.prototype.nodes=function(){var a=[];return this.forEach(function(){a.push(this.node)}),a},c.prototype.clone=function(){var a=[],b=[];return function c(d){for(var f=0;f<a.length;f++)if(a[f]===d)return b[f];if("object"==typeof d&&null!==d){var g=e(d);return a.push(d),b.push(g),p(n(d),function(a){g[a]=c(d[a])}),a.pop(),b.pop(),g}return d}(this.value)};var n=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},o=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},p=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)};p(n(c.prototype),function(a){m[a]=function(b){var d=[].slice.call(arguments,1),e=new c(b);return e[a].apply(e,d)}});var q=Object.hasOwnProperty||function(a,b){return b in a}},{}],252:[function(a,b){b.exports={name:"loopback-datasource-juggler",version:"2.21.0",description:"LoopBack DataSoure Juggler",keywords:["StrongLoop","LoopBack","DataSource","Connector","Database","Juggler","ORM"],repository:{type:"git",url:"https://github.com/strongloop/loopback-datasource-juggler"},main:"index.js",browser:{depd:"./lib/browser.depd.js"},scripts:{test:"make test"},engines:["node >= 0.6"],devDependencies:{bluebird:"^2.9.9",mocha:"^2.1.0",should:"^5.0.0"},dependencies:{async:"^0.9.0",debug:"^2.1.1",depd:"^1.0.0",inflection:"^1.6.0","loopback-connector":"1.x","node-uuid":"^1.4.2",qs:"^2.3.3",traverse:"^0.6.6"},license:{name:"Dual MIT/StrongLoop",url:"https://github.com/strongloop/loopback-datasource-juggler/blob/master/LICENSE"},readme:"# LoopBack DataSource Juggler\n\nLoopBack DataSource Juggler is an ORM that provides a common set of interfaces\nfor interacting with databases, REST APIs, and other data sources. It was\ninitially forked from [JugglingDB](https://github.com/1602/jugglingdb).\n\n**For full documentation, see the official StrongLoop documentation**:\n [Connecting models to data sources](http://docs.strongloop.com/display/LB/Connecting+models+to+data+sources)\n \nFor information on creating data sources programmatically, see [Advanced topics: data sources](http://docs.strongloop.com/display/LB/Advanced+topics%3A+data+sources). \n\n## Installation\n\n    npm install loopback-datasource-juggler\n\nAlso install the appropriated connector, for example for mongodb:\n\n    npm install loopback-connector-mongodb\n\nSee [StrongLoop Documentation](http://docs.strongloop.com/) for more information.\n\n\n",readmeFilename:"README.md",bugs:{url:"https://github.com/strongloop/loopback-datasource-juggler/issues"},homepage:"https://github.com/strongloop/loopback-datasource-juggler",_id:"loopback-datasource-juggler@2.21.0",_shasum:"fc204d9b2338dabf66653053a15836aef7b5e215",_resolved:"file:../datasource-juggler/loopback-datasource-juggler-2.21.0.tgz",_from:"../datasource-juggler/loopback-datasource-juggler-2.21.0.tgz"}},{}],253:[function(a,b){b.exports=a("./lib/remote-objects"),b.exports.SharedClass=a("./lib/shared-class")},{"./lib/remote-objects":258,"./lib/shared-class":260}],254:[function(a,b){function c(a,b){this.val=a,this.ctx=b}b.exports=c;var d=(a("debug")("strong-remoting:dynamic"),a("assert"));c.converters=[],c.define=function(a,b){b.typeName=a,this.converters.unshift(b)},c.canConvert=function(a){return!!this.getConverter(a)},c.getConverter=function(a){for(var b,c=this.converters,d=0;d<c.length;d++)if(b=c[d],b.typeName===a)return b},c.prototype.to=function(a){var b=this.constructor.getConverter(a);return d(b,"No Type converter defined for "+a),b(this.val,this.ctx)},c.define("boolean",function(a){switch(typeof a){case"string":switch(a){case"false":case"undefined":case"null":case"0":case"":return!1;default:return!0}break;case"number":return 0!==a;default:return Boolean(a)}}),c.define("number",function(a){return 0===a?a:a?Number(a):a})},{assert:38,debug:211}],255:[function(a,b){function c(a){return this instanceof c?void(this._obj=a):new c(a)}function d(a,b){var c=this,d=c._obj,e=a.split("."),f=e.pop();return e.forEach(function(a){d[a]||(d[a]={}),d=d[a]}),g("Setting %s to %s",a,b),d[f]=b,c}function e(a,b){var d=this,e=b.path||b.name||a.name||null,f=b.sharedCtor||null,g=b.accepts||null;return e?(f||(f=function(){var b=[].slice.call(arguments);b.pop()(null,a.apply(null,b))}),f.accepts||(f.accepts=g),f.returns||(f.returns={type:"object",root:!0}),h.forEach(function(a){b[a]&&(f[a]=b[a])}),d.setPath(e,a),a.shared=!0,a.sharedCtor=f,new c(a.prototype)):d}function f(a,b){var c=this,d=b.path||b.name||a.name||null,e=b.accepts||null,f=b.returns||null,g=b.errors||null;return d?(c.setPath(d,a),a.shared=!0,a.accepts=e,a.returns=f,a.errors=g,h.forEach(function(c){b[c]&&(a[c]=b[c])}),c):c}b.exports=c;var g=a("debug")("strong-remoting:exports-helper"),h=["http","description","notes"];c.prototype.setPath=d,c.prototype.addType=e,c.prototype.type=e,c.prototype.addMethod=f,c.prototype.method=f},{debug:211}],256:[function(a,b){(function(c){function d(a,b,c,d){this.req=a,this.res=b,this.method=c,this.args=this.buildArgs(c),this.methodString=c.stringName,this.options=d||{},this.supportedTypes=this.options.supportedTypes||o,this.supportedTypes!==o||this.options.xml||(this.supportedTypes=this.supportedTypes.filter(function(a){return!/\bxml\b/i.test(a)}))}function e(a){return"string"!=typeof a?a:"null"===a?null:"true"===a?!0:"false"===a?!1:q.test(a)?parseFloat(a,10):p.test(a)&&"0"!==a.charAt(0)?parseInt(a,10):a}function f(a){var b,c,d=Array.isArray(a)?"array":typeof a;switch(d){case"string":return e(a);case"object":if(a){var g=Object.keys(a);for(b=0,c=g.length;c>b;b++){var h=g[b];a[h]=f(a[h])}}break;case"array":for(b=0,c=a.length;c>b;b++)f(a[b])}return a}function g(a,b,d){try{return a.buildArgs(b)}catch(e){return void c.nextTick(function(){d(e)})}}function h(a){return a?"function"==typeof a.toJSON?a.toJSON():Array.isArray(a)?a.map(h):a:a}function i(a){var b;return a&&"function"==typeof a.toXML?b=a.toXML():(a&&(a=h(a)),Array.isArray(a)&&(a={result:a}),b=n("response",a,{prettyPrinting:{indentString:"  "},convertMap:{"[object Date]":function(a){return a.toISOString()}}})),b}b.exports=d;var j=a("events").EventEmitter,k=(a("debug")("strong-remoting:http-context"),a("util")),l=k.inherits,m=(a("assert"),a("./dynamic")),n=a("js2xmlparser"),o=["application/json","application/javascript","application/xml","text/javascript","text/xml","json","xml","*/*"];l(d,j),d.prototype.buildArgs=function(a){for(var b={},c=this,d=a.accepts,f=0,g=d.length;g>f;f++){var h,i=d[f],j=i.http,k=i.name||i.arg;if(j)switch(typeof j){case"function":h=j(c);break;case"object":switch(j.source){case"body":h=c.req.body;break;case"form":h=c.req.body&&c.req.body[k];break;case"query":h=c.req.query[k];break;case"path":h=c.req.params[k];break;case"header":h=c.req.get(k);break;case"req":h=c.req;break;case"res":h=c.res;break;case"context":h=c}}else h=c.getArgByName(k,i);var l,n="string"==typeof i.type&&i.type.toLowerCase(),o=!n||"any"===n;o&&"string"==typeof h&&(h=e(h)),m.canConvert(n)&&(l=new m(h,c),h=l.to(n)),b[i.arg]=h}return b},d.prototype.getArgByName=function(a){var b=this.req,c=b.params&&void 0!==b.params.args?b.params.args:b.body&&void 0!==b.body.args?b.body.args:b.query&&void 0!==b.query.args?b.query.args:void 0;c&&(c=JSON.parse(c)),"object"==typeof c&&c||(c={});var d=c&&void 0!==c[a]?c[a]:void 0!==this.req.params[a]?this.req.params[a]:void 0!==(this.req.body&&this.req.body[a])?this.req.body[a]:void 0!==this.req.query[a]?this.req.query[a]:this.req.get(a);return"object"==typeof d&&(d=f(d)),d};var p=/^[0-9]+$/,q=/^([0-9]+)?\.[0-9]+$/;d.prototype.invoke=function(a,b,c,d){var e=this.args;if(!d||(e=g(this,b,c),void 0!==e)){var f=b.http,h=f&&f.pipe,i=h&&h.dest,j=h&&h.source;if(i)switch(i){case"res":this.res.header("Content-Type","application/json"),this.res.header("Transfer-Encoding","chunked");var k=b.invoke(a,e,this.options,c);k.pipe(this.res);break;default:c(new Error("unsupported pipe destination"))}else if(j)switch(i){case"req":this.req.pipe(b.invoke(a,e,this.options,c));break;default:c(new Error("unsupported pipe source"))}else b.invoke(a,e,this.options,c)}},d.prototype.done=function(){var a=this.result,b=this.res,c=this.req.accepts(this.supportedTypes);this.req.query._format&&(c=this.req.query._format.toLowerCase());var d="undefined"!=typeof a;if(d)switch(c){case"*/*":case"application/json":case"json":b.json(a);break;case"application/javascript":case"text/javascript":b.jsonp(a);break;case"application/xml":case"text/xml":case"xml":if("application/xml"===c?b.header("Content-Type","application/xml"):b.header("Content-Type","text/xml"),null===a)b.header("Content-Length","7"),b.end("<null/>");else try{var e=i(a);b.send(e)}catch(f){b.send(500,f+"\n"+a)}break;default:b.send(406)}else b.get("Content-Type")||b.header("Content-Type","application/json"),(void 0===b.statusCode||200===b.statusCode)&&(b.statusCode=204),b.end()}}).call(this,a("_process"))},{"./dynamic":254,_process:187,assert:38,debug:211,events:179,js2xmlparser:39,util:207}],257:[function(a,b){function c(a,b,d,e,f){this.base=e,this.auth=f,this.method=a,this.args=d||[],this.ctorArgs=b||[],this.isStatic=a.hasOwnProperty("isStatic")&&a.isStatic||a.hasOwnProperty("sharedMethod")&&a.sharedMethod.isStatic;var g,h=this.namedArgs={};this.isStatic||a.restClass.ctor.accepts.forEach(function(a){g=b.shift(),c.isAcceptable(g,a)&&(h[a.arg||a.name]=g)}),a.accepts.forEach(function(a){g=d.shift(),c.isAcceptable(g,a)&&(h[a.arg||a.name]=g)})}b.exports=c;var d=a("events").EventEmitter,e=(a("debug")("strong-remoting:http-invocation"),a("util")),f=e.inherits,g=(a("path"),a("assert"),a("request")),h=a("./dynamic"),i=a("qs"),j=(a("url"),["boolean","string","object","number"]);f(c,d),c.isAcceptable=function(a,b){var c=Array.isArray(b.type)||"array"===b.type.toLowerCase(),d=c?"array":b.type&&b.type.toLowerCase(),e=d&&"any"!==d;return c?Array.isArray(a):e?-1===j.indexOf(d)?"object"==typeof a:(typeof a).toLowerCase()===d:!0},c.prototype._processArg=function(a,b,c,d){var e=d.http,f=d.name||d.arg,g=this.getArgByName(f);if(e)switch(typeof e){case"function":break;case"object":switch(e.source){case"body":a.body=g;break;case"form":a.body=a.body||{},a.body[f]=g;break;case"query":void 0!==g&&(c=c||{},c[f]=g);break;case"header":void 0!==g&&(a.headers=a.headers||{},a.headers[f]=g);break;case"path":a.url=a.url.replace(":"+f,g)}}else"get"===b.toLowerCase()?void 0!==g&&(c=c||{},c[f]=g):(a.body=a.body||{},a.body[f]=g);return c},c.prototype.createRequest=function(){var a,b,c=this.method,d=c.getHttpMethod(),e=this.req={json:!0,method:d||"GET"},f=c.accepts,g=null,h=this.auth;if(e.url=this.base+c.getFullPath(),h&&(e.auth={},h.username&&h.password&&(e.auth.username=h.username,e.auth.password=h.password),h.bearer&&(e.auth.bearer=h.bearer),e.auth.sendImmediately="sendImmediately"in h?h.sendImmediately:!1),!this.isStatic){g=c.restClass.ctor.accepts;for(b in g)a=this._processArg(e,d,a,g[b])}for(b in f)a=this._processArg(e,d,a,f[b]);return a&&(e.url+="?"+i.stringify(a)),e},c.prototype.getArgByName=function(a){return this.namedArgs[a]},c.prototype.invoke=function(a){var b=this;this.req||this.createRequest(),g(this.req,function(c,d,e){return c instanceof SyntaxError&&204===d.status&&(c=null),c?a(c):(b.res=d,void b.transformResponse(d,e,a))})},c.prototype.getResponse=function(){return this.res||null},c.prototype.transformResponse=function(a,b,c){var d,e=[null],f=this.method,g=f.returns,i="object"==typeof b,j=a.statusCode>=400,k={method:f,req:a.req,res:a};if(j)return i&&b.error?(d=new Error(b.error.message),d.name=b.error.name,d.stack=b.error.stack,d.details=b.error.details):d=new Error("Error: "+a.statusCode),c(d);for(var l=0,m=g.length;m>l;l++){var n,o,p=g[l],q=p.name||p.arg,r=p.type;if(n=p.root?a.body:a.body[q],"string"==typeof r&&h.canConvert(r))o=new h(n,k),n=o.to(r);else if(Array.isArray(r)&&h.canConvert(r[0])){r=r[0];for(var s=0,t=n.length;t>s;s++){var u=n[s];o=new h(u,k),n[s]=o.to(r)}}e.push(n)}c.apply(this,e)}},{"./dynamic":254,assert:38,debug:211,events:179,path:186,qs:264,request:262,url:205,util:207}],258:[function(a,b){function c(a){e.call(this,{wildcard:!0}),this.setMaxListeners(16),this.options=a||{},this.exports=this.options.exports||{},this._classes={}}function d(a,b,c,e){if(!c)return[];var f,g,h,i,j,k,l,m=[],n=b.length,o=b[e],p=b[e+1];if(e===n&&c._listeners){if("function"==typeof c._listeners)return a&&a.push(c._listeners),[c];for(f=0,g=c._listeners.length;g>f;f++)a&&a.push(c._listeners[f]);return[c]}if("*"===o||"**"===o||c[o]){if("*"===o){for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&(m=m.concat(d(a,b,c[h],e+1)));return m}if("**"===o){l=e+1===n||e+2===n&&"*"===p,l&&c._listeners&&(m=m.concat(d(a,b,c,n)));for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&("*"===h||"**"===h?(c[h]._listeners&&!l&&(m=m.concat(d(a,b,c[h],n))),m=m.concat(d(a,b,c[h],e))):m=m.concat(h===p?d(a,b,c[h],e+2):d(a,b,c[h],e)));return m}m=m.concat(d(a,b,c[o],e+1))}if(i=c["*"],i&&d(a,b,i,e+1),j=c["**"])if(n>e){j._listeners&&d(a,b,j,n);for(h in j)"_listeners"!==h&&j.hasOwnProperty(h)&&(h===p?d(a,b,j[h],e+2):h===o?d(a,b,j[h],e+1):(k={},k[h]=j[h],d(a,b,{"**":k},e+1)))}else j._listeners?d(a,b,j,n):j["*"]&&j["*"]._listeners&&d(a,b,j["*"],n);return m}b.exports=c;var e=a("eventemitter2").EventEmitter2,f=(a("debug")("strong-remoting:remotes"),a("util")),g=a("url"),h=f.inherits,i=a("assert"),j=a("./dynamic"),k=a("./shared-class"),l=a("./exports-helper");a("./rest-adapter"),h(c,e),c.create=function(a){return new c(a)},c.extend=function(a){return new l(a)},c.prototype.handler=function(a,b){var c=this.adapter(a),d=new c(this,b),e=d.createHandler();return e&&(e.adapter=d),e},c.prototype.connect=function(a,b){var c,d=a,e=g.parse(a);e.auth&&(c=this.auth={},c.username=e.auth.split(":")[0],c.password=e.auth.split(":")[1],delete e.auth,d=g.format(e),a[a.length-1]!==d[d.length-1]&&(d=d.slice(0,-1)));var f=this.adapter(b),h=new f(this);return this.serverAdapter=h,h.connect(d)},c.prototype.invoke=function(a,b,c,d){return i(this.serverAdapter,"Cannot invoke method without an adapter. See RemoteObjects#connect()."),this.serverAdapter.invoke.apply(this.serverAdapter,arguments,d)},c.prototype.adapter=function(b){
return a("./"+b+"-adapter")},c.prototype.classes=function(a){a=a||{};var b=this.exports,c=[],d=this._classes;return Object.keys(b).forEach(function(d){c.push(new k(d,b[d],a))}),Object.keys(d).forEach(function(a){c.push(d[a])}),c},c.prototype.addClass=function(a){i(a instanceof k),this._classes[a.name]=a},c.prototype.findMethod=function(a){for(var b=this.methods(),c=0;c<b.length;c++)if(b[c].stringName===a)return b[c]},c.prototype.methods=function(){var a=[];return this.classes().forEach(function(b){a=b.methods().concat(a)}),a},c.prototype.toJSON=function(){var a={},b=this.methods();return b.forEach(function(b){a[b.stringName]={http:b.fn&&b.fn.http,accepts:b.accepts,returns:b.returns,errors:b.errors}}),a},c.prototype.before=function(a,b){this.on("before."+a,b)},c.prototype.after=function(a,b){this.on("after."+a,b)},c.prototype.execHooks=function(a,b,c,e,f){function g(a){k.push(a)}function h(a){if(a)return f(a);var d=k.shift();if(d)try{var g=d.call(c,e,h,b);g&&"function"==typeof g.then&&g.then(function(){f()},f)}catch(a){f(a)}else f()}var i,j,k=[],l=b.isStatic||b.sharedMethod&&b.sharedMethod.isStatic;if(this.objectName=b.sharedClass&&b.sharedClass.name||b.restClass&&b.restClass.name,this.methodName=b.name,i=b.fullName?a+"."+b.fullName:a+"."+this.objectName+(l?".":".prototype.")+this.methodName,this.wildcard){j=[];var m="string"==typeof i?i.split(this.delimiter):i.slice();d.call(this,j,m,this.listenerTree,0)}else j=this._events[i];if("function"==typeof j)return this.event=i,g(j),h();if(j){var n,o=arguments.length,p=new Array(o-1);for(n=1;o>n;n++)p[n-1]=arguments[n];var q=j.slice();for(n=0,o=q.length;o>n;n++)g(q[n])}return h()},c.prototype.invokeMethodInContext=function(a,b,c){var d=this,e=this.getScope(a,b);d.execHooks("before",b,e,a,function(f){return f?c(f):void a.invoke(e,b,function(f,g){return f?c(f):(a.result=g,void d.execHooks("after",b,e,a,function(a){return a?c(a):void c()}))})})},c.prototype.getScope=function(a,b){return a.instance||b.ctor||b.sharedMethod&&b.sharedMethod.ctor},c.defineType=c.convert=c.prototype.defineType=c.prototype.convert=function(a,b){j.define(a,b)}},{"./dynamic":254,"./exports-helper":255,"./rest-adapter":259,"./shared-class":260,assert:38,debug:211,eventemitter2:263,url:205,util:207}],259:[function(a,b){(function(c){function d(a,b){l.call(this),this.remotes=a,this.Context=v,this.options=b||(a.options||{}).rest}function e(a){var b=a.http;return b&&!Array.isArray(b)&&(b=[b]),b?b.forEach(function(b){b.verb=String(b.verb||"all").toLowerCase(),b.path=b.path||"/"+a.name}):b="sharedCtor"===a.name?[{verb:"all",path:"/prototype"}]:[{verb:"all",path:a.name?"/"+a.name:""}],b}function f(a,b){var c=a.route,d=b.route,e=c.verb.toLowerCase(),f=d.verb.toLowerCase();if("del"===e&&(e="delete"),"del"===f&&(f="delete"),e>f)return-1;if(f>e)return 1;for(var g=c.path.split("/"),h=d.path.split("/"),i=Math.min(g.length,h.length),j=0;i>j;j++){if(""===g[j]&&""!==h[j])return 1;if(""!==g[j]&&""===h[j])return-1;if(":"===g[j][0]&&":"!==h[j][0])return 1;if(":"!==g[j][0]&&":"===h[j][0])return-1;if(g[j]>h[j])return 1;if(g[j]<h[j])return-1}return h.length-g.length}function g(a){j(this,"sharedClass",a),this.name=a.name,this.routes=e(a),this.ctor=a.sharedCtor&&new h(this,a.sharedCtor),this.methods=a.methods().filter(function(a){return!a.isSharedCtor}).map(function(a){return new h(this,a)}.bind(this))}function h(a,b){j(this,"restClass",a),j(this,"sharedMethod",b),this.fullName=b.stringName,this.name=this.fullName.split(".").slice(1).join("."),this.accepts=b.accepts,this.returns=b.returns,this.errors=b.errors,this.description=b.description,this.notes=b.notes,this.documented=b.documented;var c=e(b);if(b.isStatic||!a.ctor)this.routes=c;else{var d=this.routes=[];c.forEach(function(b){a.ctor.routes.forEach(function(a){var c=n._extend({},b);c.path=k(a.path,b.path),d.push(c)})})}}function i(a){return"function"==typeof a&&(a=a.name),"string"==typeof a?a.toLowerCase():Array.isArray(a)?"array":(m("WARNING: unkown ctorOrName of type %s: %j",typeof a,a),"undefined")}function j(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!1,writable:!1,configurable:!1})}function k(a,b){if(!a)return b;if(!b||"/"==b)return a;var c=a[a.length-1]+b[0];return"//"==c?a+b.slice(1):"/"==c[0]||"/"==c[1]?a+b:a+"/"+b}b.exports=d,d.RestClass=g,d.RestMethod=h;var l=a("events").EventEmitter,m=a("debug")("strong-remoting:rest-adapter"),n=a("util"),o=n.inherits,p=a("assert"),q=a("express"),r=a("body-parser"),s=a("cors"),t=a("async"),u=a("./http-invocation"),v=a("./http-context"),w=r.json,x=r.urlencoded;o(d,l),d.create=d.createRestAdapter=function(a){return new d(a)},d.prototype.getRoutes=e,d.prototype.connect=function(a){this.connection=a},d.prototype.invoke=function(a,b,c,d){p(this.connection,"Cannot invoke method without a connection. See RemoteObjects#connect()."),p("string"==typeof a,"method is required when calling invoke()");var e=arguments[arguments.length-1];d="function"==typeof e?e:void 0,b=Array.isArray(b)?b:[],Array.isArray(c)||(c=b,b=[]);var f=this.remotes,g=this.getRestMethodByName(a),h=new u(g,b,c,this.connection,f.auth),i={req:h.createRequest()},j=f.getScope(i,g);f.execHooks("before",g,j,i,function(a){return a?d(a):void h.invoke(function(a){if(a)return d(a);var b=Array.prototype.slice.call(arguments);i.result=b.slice(1),i.res=h.getResponse(),f.execHooks("after",g,j,i,function(a){return a?d(a):void d.apply(h,b)})})})},d.prototype.getRestMethodByName=function(a){for(var b=this.getClasses(),c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.methods.length;e++){var f=d.methods[e];if(f.fullName===a)return f}},d.sortRoutes=f,d.prototype.createHandler=function(){var a=q.Router(),b=this,c=this.getClasses();a.use(function(a,b,c){a.is("application/json")&&"0"===a.get("Content-Length")&&(a._body=!0,a.body={}),c()}),m("remoting options: %j",this.remotes.options);var e=this.remotes.options.urlencoded||{extended:!0};void 0===e.extended&&(e.extended=!0);var g=this.remotes.options.json||{strict:!1},h=this.remotes.options.cors;void 0===h&&(h={origin:!0,credentials:!0});var i=function(a,b,c){var d=a.protocol+"://"+a.get("host");"OPTIONS"===a.method||d!==a.get("origin")?s(h)(a,b,c):c()};h&&a.use(i),a.use(x(e)),a.use(w(g));var j=this._shouldHandleUnknownPaths();return c.forEach(function(c){var e=q.Router(),g=c.sharedClass.name;m("registering REST handler for class %j",g);var h=[];c.methods.forEach(function(a){var b=a.sharedMethod;m("    method %s",b.stringName),a.routes.forEach(function(a){h.push({route:a,method:b})})}),h.sort(f),h.forEach(function(a){b._registerMethodRouteHandlers(e,a.method,a.route)}),j&&e.use(d.remoteMethodNotFoundHandler(g)),c.routes.forEach(function(b){m("    at %s",b.path),a.use(b.path,e)})}),j&&a.use(d.urlNotFoundHandler()),a.use(d.errorHandler(this.remotes.options.errorHandler)),a},d.prototype._shouldHandleUnknownPaths=function(){return!(this.options&&this.options.handleUnknownPaths===!1)},d.remoteMethodNotFoundHandler=function(a){return a=a||"(unknown)",function(b,c,d){var e='Shared class "'+a+'" has no method handling '+b.method+" "+b.url,f=new Error(e);f.status=f.statusCode=404,d(f)}},d.urlNotFoundHandler=function(){return function(a,b,c){var d="There is no method to handle "+a.method+" "+a.url,e=new Error(d);e.status=e.statusCode=404,c(e)}},d.errorHandler=function(a){return a=a||{},function(b,d,e){function f(f){f&&(b=f),"string"==typeof b&&(b=new Error(b),b.status=b.statusCode=500),e.statusCode=b.statusCode||b.status||500,m("Error in %s %s: %s",d.method,d.url,b.stack);var g={name:b.name,status:e.statusCode,message:b.message||"An unknown error occurred"};for(var h in b)g[h]=b[h];g.stack=b.stack,("production"===c.env.NODE_ENV||a.disableStackTrace)&&delete g.stack,e.send({error:g})}if("function"!=typeof a.handler)return f();try{a.handler(b,d,e,f)}catch(g){f(g)}}},d.prototype._registerMethodRouteHandlers=function(a,b,c){var d=b.isStatic?this._createStaticMethodHandler(b):this._createPrototypeMethodHandler(b);m("        %s %s %s",c.verb,c.path,d.name);var e=c.verb;"del"===e&&(e="delete"),a[e](c.path,d)},d.prototype._createStaticMethodHandler=function(a){var b=this,c=this.Context;return function(d,e,f){var g=new c(d,e,a,b.options);b._invokeMethod(g,a,f)}},d.prototype._createPrototypeMethodHandler=function(a){var b=this,c=this.Context;return function(d,e,f){var g=new c(d,e,a,b.options);g.invoke(a.ctor,a.sharedCtor,function(c,d){return c?f(c):(g.instance=d,void b._invokeMethod(g,a,f))},!0)}},d.prototype._invokeMethod=function(a,b,c){var d=this.remotes,e=[];b.rest.before&&e.push(function(c){m("Invoking rest.before for "+a.methodString),b.rest.before.call(d.getScope(a,b),a,c)}),e.push(this.remotes.invokeMethodInContext.bind(this.remotes,a,b)),b.rest.after&&e.push(function(c){m("Invoking rest.after for "+a.methodString),b.rest.after.call(d.getScope(a,b),a,c)}),t.series(e,function(b){return b?c(b):void a.done()})},d.prototype.allRoutes=function(){function a(a,c,d){c="/"===c||"//"===c?e:e+c,"/"===c[c.length-1]&&(c=c.substr(0,c.length-1)),c=c.replace(/\/\//g,"/"),b.push({verb:a,path:c,description:d.description,notes:d.notes,documented:d.documented,method:d.stringName,accepts:d.accepts&&d.accepts.length?d.accepts:void 0,returns:d.returns&&d.returns.length?d.returns:void 0,errors:d.errors&&d.errors.length?d.errors:void 0})}var b=[],c=this,d=this.remotes.classes(this.options),e="";return d.forEach(function(b){c.getRoutes(b).forEach(function(d){e=d.path;var f=b.methods();f.forEach(function(b){c.getRoutes(b).forEach(function(d){b.isStatic?a(d.verb,d.path,b):c.getRoutes(b.sharedCtor).forEach(function(c){a(d.verb,c.path+d.path,b)})})})})}),b},d.prototype.getClasses=function(){return this.remotes.classes(this.options).map(function(a){return new g(a)})},g.prototype.getPath=function(){return this.routes[0].path},h.prototype.isReturningArray=function(){return 1==this.returns.length&&this.returns[0].root&&"array"===i(this.returns[0].type)||!1},h.prototype.acceptsSingleBodyArgument=function(){if(1!=this.accepts.length)return!1;var a=this.accepts[0];return a.http&&"body"==a.http.source&&"object"==i(a.type)||!1},h.prototype.getHttpMethod=function(){var a=this.routes[0].verb;return"all"==a?"POST":"del"==a?"DELETE":a.toUpperCase()},h.prototype.getPath=function(){return this.routes[0].path},h.prototype.getFullPath=function(){return k(this.restClass.getPath(),this.getPath())}}).call(this,a("_process"))},{"./http-context":256,"./http-invocation":257,_process:187,assert:38,async:35,"body-parser":39,cors:39,debug:211,events:179,express:39,util:207}],260:[function(a,b){function c(a,b,d){d=d||{},this.name=a||b.remoteNamespace,this.ctor=b,this._methods=[],this._resolvers=[],this._disabledMethods={};var e=b&&b.http,f=d.normalizeHttpPath,h={};h.path="/"+this.name,Array.isArray(e)?(this.http=e,0===e.length&&e.push(h),f&&this.http.forEach(function(a){a.path=c.normalizeHttpPath(a.path)})):(this.http=g._extend(h,e),f&&(this.http.path=c.normalizeHttpPath(this.http.path))),"function"==typeof b&&b.sharedCtor&&(this.sharedCtor=new i(b.sharedCtor,"sharedCtor",this)),j(this.name,"must include a remoteNamespace when creating a SharedClass")}function d(a,b,c,d){c=c||{};var e=new i(d,b,this,c);return a.push(e),e}function e(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.isDelegateFor(b,c))return e}return null}function f(a,b){if(a)for(var c in a)if("super_"!==c){var d;try{d=a[c]}catch(e){}"function"==typeof d&&d.shared&&!d.modelName&&b(d,c)}}b.exports=c;var g=(a("debug")("strong-remoting:shared-class"),a("util")),h=(g.inherits,a("inflection")),i=a("./shared-method"),j=a("assert");c.normalizeHttpPath=function(a){return"string"==typeof a?a.replace(/[^\/]+/g,function(a){return a.indexOf(":")>-1?a:h.transform(a,["underscore","dasherize"])}):void 0},c.prototype.methods=function(){var a=this.ctor,b=[],c=this,g=[];return f(a,function(a,d){if(-1!==g.indexOf(a)){var f=e(b,a);return void f.addAlias(d)}g.push(a),b.push(i.fromFunction(a,d,c,!0))}),f(a.prototype,function(a,d){if(-1!==g.indexOf(a)){var f=e(b,a);return void f.addAlias(d)}g.push(a),b.push(i.fromFunction(a,d,c))}),this._resolvers.forEach(function(a){a.call(this,d.bind(c,b))}),b=b.concat(this._methods),b.filter(c.isMethodEnabled.bind(c))},c.prototype.isMethodEnabled=function(a){if(!a.shared)return!1;var b=this.getKeyFromMethodNameAndTarget(a.name,a.isStatic);return this._disabledMethods.hasOwnProperty(b)?!1:!0},c.prototype.defineMethod=function(a,b,c){return d.call(this,this._methods,a,b,c)},c.prototype.resolve=function(a){this._resolvers.push(a)},c.prototype.find=function(a,b){var c=this.methods();return e(c,a,b)},c.prototype.disableMethod=function(a,b){var c=this._disabledMethods,d=this.getKeyFromMethodNameAndTarget(a,b);c[d]=!0},c.prototype.getKeyFromMethodNameAndTarget=function(a,b){return(b?"":"prototype.")+a}},{"./shared-method":261,assert:38,debug:211,inflection:217,util:207}],261:[function(a,b){(function(c){function d(a,b,c,d){"boolean"==typeof d&&(d={isStatic:d}),this.fn=a,a=a||{},this.name=b,k("string"==typeof b,"The method name must be a string"),d=d||{},this.aliases=d.aliases||[];var e=this.isStatic=d.isStatic||!1;this.accepts=d.accepts||a.accepts||[],this.returns=d.returns||a.returns||[],this.errors=d.errors||a.errors||[],this.description=d.description||a.description,this.accessType=d.accessType||a.accessType,this.notes=d.notes||a.notes,this.documented=(d.documented||a.documented)!==!1,this.http=d.http||a.http||{},this.rest=d.rest||a.rest||{},this.shared=d.shared,void 0===this.shared&&(this.shared=!0),a.shared===!1&&(this.shared=!1),this.sharedClass=c,c&&(this.ctor=c.ctor,this.sharedCtor=c.sharedCtor),"sharedCtor"===b&&(this.isSharedCtor=!0),this.accepts&&!Array.isArray(this.accepts)&&(this.accepts=[this.accepts]),this.returns&&!Array.isArray(this.returns)&&(this.returns=[this.returns]),this.errors&&!Array.isArray(this.errors)&&(this.errors=[this.errors]),this.stringName=(c?c.name:"")+(e?".":".prototype.")+b}function e(a){var b=new Error(a);return b.statusCode=400,b}function f(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function g(a,b){switch(b){case"string":return a;case"date":return new Date(a);case"number":return Number(a);case"boolean":return Boolean(a);default:return JSON.parse(a)}}b.exports=d;var h=a("debug")("strong-remoting:shared-method"),i=a("util"),j=a("traverse"),k=a("assert");d.fromFunction=function(a,b,c,e){return new d(a,b,c,{isStatic:e,accepts:a.accepts,returns:a.returns,errors:a.errors,description:a.description,notes:a.notes,http:a.http,rest:a.rest})},d.prototype.invoke=function(a,b,c,j){function k(a){if(a)return j(a);var b=d.toResult(m,[].slice.call(arguments,1));h("- %s - result %j",o.name,b),j(null,b)}var l=this.accepts,m=this.returns,n=(this.errors,this.getFunction()),o=this,p=[];if(void 0===j&&"function"==typeof c&&(j=c,c={}),l)for(var q=0;q<l.length;q++){var r=l[q],s=r.name||r.arg,t=r.type,u=d.convertArg(r,b[s]),v=d.getType(u);if("undefined"!==v){if("number"===v&&Number.isNaN(u))return j(e(s+" must be a number"));if("string"===v&&"any"!==r.type&&v!==t)try{u=g(u,t)}catch(w){var x=Array.isArray(t)&&1===t.length;if(!x||!c.arrayItemDelimiters){var y=i.format("invalid value for argument '%s' of type '%s': %s",s,r.type,u);return h("- %s - "+y,o.name),j(e(y))}var z=c.arrayItemDelimiters;Array.isArray(z)&&(z=new RegExp(z.map(f).join("|"),"g"),c.arrayItemDelimiters=z),u=u.length?u.split(z):[];for(var A in u)h("convert %j to %s",u[A],t[0]),u[A]=g(u[A],t[0])}p.push(u)}else{if(r.required)return j(e(s+" is a required arg"));p.push(void 0)}}p.push(k),h("- %s - invoke with",this.name,p);try{var B=n.apply(a,p);return B&&"function"==typeof B.then?B.then(function(a){1===m.length&&(a=[a]);var b=d.toResult(m,a);h("- %s - promise result %j",o.name,b),j(null,b)},j):B}catch(C){return h("error caught during the invocation of %s",this.name),j(C)}},d.getType=function(a){var b=typeof a;switch(b){case"undefined":case"boolean":case"number":case"function":case"string":return b;case"object":return null===a?"null":c.isBuffer(a)?"buffer":Array.isArray(a)?"array":a instanceof Date?"date":"object"}},d.convertArg=function(a,b){if(a.http&&("req"===a.http.source||"res"===a.http.source||"context"===a.http.source))return b;if(null===b||"object"!=typeof b)return b;var d=j(b).forEach(function(a){if(null===a||"object"!=typeof a)return a;var b=a;if("base64"===a.$type||"date"===a.$type){switch(a.$type){case"base64":b=new c(a.$data,"base64");break;case"date":b=new Date(a.$data)}this.update(b)}return b});return d},d.toResult=function(a,b){function c(a){switch(d.getType(a)){case"date":return{$type:"date",$data:a.toString()};case"buffer":return{$type:"base64",$data:a.toString("base64")}}return a}var e={};if(a.length)return a=a.filter(function(a,d){return d>=b.length?!1:a.root?(e=c(b[d]),!1):!0}),a.forEach(function(a,d){e[a.name||a.arg]=c(b[d])}),e},d.prototype.getFunction=function(){var a;return this.ctor?(a=this.isStatic?this.ctor[this.name]:this.ctor.prototype[this.name],a||this.fn):this.fn},d.prototype.isDelegateFor=function(a,b){var c=typeof a;if(b=b||!1,a)switch(c){case"function":return this.getFunction()===a;case"string":return this.isStatic!==b?!1:this.name===a||-1!==this.aliases.indexOf(a)}return!1},d.prototype.addAlias=function(a){-1===this.aliases.indexOf(a)&&this.aliases.push(a)}}).call(this,a("buffer").Buffer)},{assert:38,buffer:40,debug:211,traverse:269,util:207}],262:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.returnExports=d()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&&(a.log=d()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j<i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);e.uri=-1!==e.uri.indexOf("?")?e.uri+"&"+l:e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,e.onResponse===!0&&(e.onResponse=f,e.callback=c),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});if(a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED){a.log.debug("Request started",{id:k.id});for(var c in b.headers)k.setRequestHeader(c,b.headers[c])}else k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&&(e(),g(),i())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&&0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function i(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(c){return b.callback(c,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(j+=1,k.seq_id=j,k.id=j+": "+b.method+" "+b.uri,k._id=k.id,m&&!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};return k.onreadystatechange=d,k.open(b.method,b.uri,!0),m&&(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b<f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&&console&&console[a]&&(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&&(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(d){b=document.createElement("a"),b.href="",b=b.href}var e=c.exec(b.toLowerCase())||[],f=c.exec(a.toLowerCase()),g=!(!f||f[1]==e[1]&&f[2]==e[2]&&(f[3]||("http:"===f[1]?80:443))==(e[3]||("http:"===e[1]?80:443)));return g}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=18e4,j=0;a.withCredentials=!1,a.DEFAULT_TIMEOUT=i,a.defaults=function(b){var c=function(a){var c=function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&&(c[e]=b[e]);return a(c,d)};return c},d=c(a);return d.get=c(a.get),d.post=c(a.post),d.put=c(a.put),d.head=c(a.head),d};var k=["get","put","post","head"];return k.forEach(function(b){var c=b.toUpperCase(),d=b.toLowerCase();a[d]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode<200||b.statusCode>299)&&c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}"string"==typeof b&&(b={uri:b}),b.json=!0,b.body&&(b.json=b.body),delete b.body,d=d||c;var f=a(b,e);return f},a})},{}],263:[function(a,b,c){!function(){function a(){this._events={},this._conf&&b.call(this,this._conf)}function b(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function d(a){this._events={},this.newListener=!1,b.call(this,a)}function e(a,b,c,d){if(!c)return[];var f,g,h,i,j,k,l,m=[],n=b.length,o=b[d],p=b[d+1];if(d===n&&c._listeners){if("function"==typeof c._listeners)return a&&a.push(c._listeners),[c];for(f=0,g=c._listeners.length;g>f;f++)a&&a.push(c._listeners[f]);return[c]}if("*"===o||"**"===o||c[o]){if("*"===o){for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&(m=m.concat(e(a,b,c[h],d+1)));return m}if("**"===o){l=d+1===n||d+2===n&&"*"===p,l&&c._listeners&&(m=m.concat(e(a,b,c,n)));for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&("*"===h||"**"===h?(c[h]._listeners&&!l&&(m=m.concat(e(a,b,c[h],n))),m=m.concat(e(a,b,c[h],d))):m=m.concat(h===p?e(a,b,c[h],d+2):e(a,b,c[h],d)));return m}m=m.concat(e(a,b,c[o],d+1))}if(i=c["*"],i&&e(a,b,i,d+1),j=c["**"])if(n>d){j._listeners&&e(a,b,j,n);for(h in j)"_listeners"!==h&&j.hasOwnProperty(h)&&(h===p?e(a,b,j[h],d+2):h===o?e(a,b,j[h],d+1):(k={},k[h]=j[h],e(a,b,{"**":k},d+1)))}else j._listeners?e(a,b,j,n):j["*"]&&j["*"]._listeners&&e(a,b,j["*"],n);return m}function f(a,b){a="string"==typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;d>c+1;c++)if("**"===a[c]&&"**"===a[c+1])return;for(var e=this.listenerTree,f=a.shift();f;){if(e[f]||(e[f]={}),e=e[f],0===a.length){if(e._listeners){if("function"==typeof e._listeners)e._listeners=[e._listeners,b];else if(g(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var i=h;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&e._listeners.length>i&&(e._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",e._listeners.length),console.trace())}}else e._listeners=b;return!0}f=a.shift()}return!0}var g=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=10;d.prototype.delimiter=".",d.prototype.setMaxListeners=function(b){this._events||a.call(this),this._events.maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b},d.prototype.event="",d.prototype.once=function(a,b){return this.many(a,1,b),this},d.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if("function"!=typeof c)throw new Error("many only accepts instances of Function");return d._origin=c,this.on(a,d),e},d.prototype.emit=function(){this._events||a.call(this);var b=arguments[0];if("newListener"===b&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];for(f=0,c=this._all.length;c>f;f++)this.event=b,this._all[f].apply(this,d)}if("error"===b&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var g;if(this.wildcard){g=[];var h="string"==typeof b?b.split(this.delimiter):b.slice();e.call(this,g,h,this.listenerTree,0)}else g=this._events[b];if("function"==typeof g){if(this.event=b,1===arguments.length)g.call(this);else if(arguments.length>1)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];g.apply(this,d)}return!0}if(g){for(var c=arguments.length,d=new Array(c-1),f=1;c>f;f++)d[f-1]=arguments[f];for(var i=g.slice(),f=0,c=i.length;c>f;f++)this.event=b,i[f].apply(this,d);return i.length>0||!!this._all}return!!this._all},d.prototype.on=function(b,c){if("function"==typeof b)return this.onAny(b),this;if("function"!=typeof c)throw new Error("on only accepts instances of Function");if(this._events||a.call(this),this.emit("newListener",b,c),this.wildcard)return f.call(this,b,c),this;if(this._events[b]){if("function"==typeof this._events[b])this._events[b]=[this._events[b],c];else if(g(this._events[b])&&(this._events[b].push(c),!this._events[b].warned)){var d=h;"undefined"!=typeof this._events.maxListeners&&(d=this._events.maxListeners),d>0&&this._events[b].length>d&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),console.trace())}}else this._events[b]=c;return this},d.prototype.onAny=function(a){if("function"!=typeof a)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(a),this},d.prototype.addListener=d.prototype.on,d.prototype.off=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");var c,d=[];if(this.wildcard){var f="string"==typeof a?a.split(this.delimiter):a.slice();d=e.call(this,null,f,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],d.push({_listeners:c})}for(var h=0;h<d.length;h++){var i=d[h];if(c=i._listeners,g(c)){for(var j=-1,k=0,l=c.length;l>k;k++)if(c[k]===b||c[k].listener&&c[k].listener===b||c[k]._origin&&c[k]._origin===b){j=k;break}if(0>j)continue;return this.wildcard?i._listeners.splice(j,1):this._events[a].splice(j,1),0===c.length&&(this.wildcard?delete i._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete i._listeners:delete this._events[a])}return this},d.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&this._all.length>0){for(b=this._all,c=0,d=b.length;d>c;c++)if(a===b[c])return b.splice(c,1),this}else this._all=[];return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(b){if(0===arguments.length)return!this._events||a.call(this),this;if(this.wildcard)for(var c="string"==typeof b?b.split(this.delimiter):b.slice(),d=e.call(this,null,c,this.listenerTree,0),f=0;f<d.length;f++){var g=d[f];g._listeners=null}else{if(!this._events[b])return this;this._events[b]=null}return this},d.prototype.listeners=function(b){if(this.wildcard){var c=[],d="string"==typeof b?b.split(this.delimiter):b.slice();return e.call(this,c,d,this.listenerTree,0),c}return this._events||a.call(this),this._events[b]||(this._events[b]=[]),g(this._events[b])||(this._events[b]=[this._events[b]]),this._events[b]},d.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof c?c.EventEmitter2=d:window.EventEmitter2=d}()},{}],264:[function(a,b,c){arguments[4][246][0].apply(c,arguments)},{"./lib/":265,dup:246}],265:[function(a,b,c){arguments[4][247][0].apply(c,arguments)},{"./parse":266,"./stringify":267,dup:247}],266:[function(a,b,c){arguments[4][248][0].apply(c,arguments)},{"./utils":268,dup:248}],267:[function(a,b,c){arguments[4][249][0].apply(c,arguments)},{"./utils":268,dup:249}],268:[function(a,b,c){arguments[4][250][0].apply(c,arguments)},{dup:250}],269:[function(a,b,c){arguments[4][251][0].apply(c,arguments)},{dup:251}],270:[function(a,b){function c(a){var b,c;for(b=[],c=0;c<a.length;c++)b.push(f[a[c]%f.length]);return b.join("")}function d(a,b){return"undefined"==typeof b?c(e.pseudoRandomBytes(a)):void e.pseudoRandomBytes(a,function(a,d){return a?b(a):void b(null,c(d))})}var e=a("crypto"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";b.exports=d},{crypto:44}],271:[function(a,b){var c=a("./trim"),d=a("./decapitalize");b.exports=function(a,b){return a=c(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""}),b===!0?d(a):a}},{"./decapitalize":274,"./trim":278}],272:[function(a,b){var c=a("./helper/makeString");b.exports=function(a){return a=c(a),a.charAt(0).toUpperCase()+a.slice(1)}},{"./helper/makeString":277}],273:[function(a,b){var c=a("./capitalize"),d=a("./camelize"),e=a("./helper/makeString");b.exports=function(a){return a=e(a),c(d(a.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":271,"./capitalize":272,"./helper/makeString":277}],274:[function(a,b){var c=a("./helper/makeString");b.exports=function(a){return a=c(a),a.charAt(0).toLowerCase()+a.slice(1)}},{"./helper/makeString":277}],275:[function(a,b){var c=a("./escapeRegExp");b.exports=function(a){return null==a?"\\s":a.source?a.source:"["+c(a)+"]";

}},{"./escapeRegExp":276}],276:[function(a,b){var c=a("./makeString");b.exports=function(a){return c(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":277}],277:[function(a,b){b.exports=function(a){return null==a?"":""+a}},{}],278:[function(a,b){var c=a("./helper/makeString"),d=a("./helper/defaultToWhiteSpace"),e=String.prototype.trim;b.exports=function(a,b){return a=c(a),!b&&e?e.call(a):(b=d(b),a.replace(new RegExp("^"+b+"+|"+b+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":275,"./helper/makeString":277}],279:[function(a,b){b.exports={name:"loopback",version:"2.14.0",description:"LoopBack: Open Source Framework for Node.js",homepage:"http://loopback.io",keywords:["web","restful","rest","api","express","restify","koa","auth","security","oracle","mysql","nosql","mongo","mongodb","sqlserver","mssql","postgres","postgresql","soap","StrongLoop","framework","mobile","mBaaS"],scripts:{test:"grunt mocha-and-karma"},dependencies:{async:"^0.9.0",bcryptjs:"^2.1.0","body-parser":"^1.12.0","canonical-json":"0.0.4","continuation-local-storage":"^3.1.3",debug:"^2.1.2",depd:"^1.0.0",ejs:"^2.3.1",express:"^4.12.2",inflection:"^1.6.0","loopback-connector-remote":"^1.0.3","loopback-phase":"^1.2.0",nodemailer:"^1.3.1","nodemailer-stub-transport":"^0.1.5","serve-favicon":"^2.2.0",stable:"^0.1.5","strong-remoting":"^2.13.2",uid2:"0.0.3","underscore.string":"^3.0.3"},peerDependencies:{"loopback-datasource-juggler":"^2.19.0"},devDependencies:{browserify:"^9.0.3",chai:"^2.1.1","cookie-parser":"^1.3.4",errorhandler:"^1.3.4","es5-shim":"^4.1.0",grunt:"^0.4.5","grunt-browserify":"^3.5.0","grunt-cli":"^0.1.13","grunt-contrib-jshint":"^0.11.0","grunt-contrib-uglify":"^0.8.0","grunt-contrib-watch":"^0.6.1","grunt-jscs":"^1.5.0","grunt-karma":"^0.10.1","grunt-mocha-test":"^0.12.7",karma:"^0.12.31","karma-browserify":"^4.0.0","karma-chrome-launcher":"^0.1.7","karma-firefox-launcher":"^0.1.4","karma-html2js-preprocessor":"^0.1.0","karma-junit-reporter":"^0.2.2","karma-mocha":"^0.1.10","karma-phantomjs-launcher":"^0.1.4","karma-script-launcher":"^0.1.0","loopback-boot":"^1.1.0","loopback-datasource-juggler":"^2.19.1","loopback-testing":"^1.1.0",mocha:"^2.1.0","strong-task-emitter":"^0.0.6",supertest:"^0.15.0"},repository:{type:"git",url:"https://github.com/strongloop/loopback"},browser:{express:"./lib/browser-express.js","./lib/server-app.js":"./lib/browser-express.js",connect:!1,nodemailer:!1,supertest:!1,depd:"loopback-datasource-juggler/lib/browser.depd.js",bcrypt:!1},license:{name:"Dual MIT/StrongLoop",url:"https://github.com/strongloop/loopback/blob/master/LICENSE"},optionalDependencies:{"sl-blip":"http://blip.strongloop.com/loopback@2.14.0"}}},{}]},{},[21]);